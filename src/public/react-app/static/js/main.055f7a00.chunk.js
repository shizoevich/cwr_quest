(this["webpackJsonpcwr-front"]=this["webpackJsonpcwr-front"]||[]).push([[0],{110:function(e,t,a){e.exports={patientCard:"PatientCard_patientCard__2NLBI",patientInfo:"PatientCard_patientInfo__1Molq",patientName:"PatientCard_patientName__2Z6Ey",patientStatus:"PatientCard_patientStatus__GOXVJ",dates:"PatientCard_dates__2N6WQ",therapistInfo:"PatientCard_therapistInfo__3dqu2",providerName:"PatientCard_providerName__1N96q",active:"PatientCard_active__3Bo3t",completed:"PatientCard_completed__2grnu",rescheduled:"PatientCard_rescheduled__4KkJB",archived:"PatientCard_archived__3-ANZ",threeDotsButton:"PatientCard_threeDotsButton__2vqRF"}},117:function(e,t,a){e.exports={diagnosesSelect:"DiagnosesSelect_diagnosesSelect__2KMpF",header:"DiagnosesSelect_header__2LKmf",diagnose:"DiagnosesSelect_diagnose__14te_",inputSelect:"DiagnosesSelect_inputSelect__3hvAW",arrow:"DiagnosesSelect_arrow__2uzA5",options:"DiagnosesSelect_options__2gPgB",option:"DiagnosesSelect_option__2JF1R",noData:"DiagnosesSelect_noData__kZu63"}},118:function(e,t,a){e.exports={tableCaption:"FormRequestLog_tableCaption__voV77",tableLogs:"FormRequestLog_tableLogs__1C9lY",empty:"FormRequestLog_empty__D2oc3",tdActions:"FormRequestLog_tdActions__yXghf",buttons:"FormRequestLog_buttons__3S5yZ",btnTableAction:"FormRequestLog_btnTableAction__LQEPo",eventSucceed:"FormRequestLog_eventSucceed__2EC1A",eventFailed:"FormRequestLog_eventFailed__mOhCu",paymentForServiceLogTooltip:"FormRequestLog_paymentForServiceLogTooltip__48o27"}},119:function(e,t,a){e.exports={actionsButton:"ActionsButton_actionsButton__2L5I1",menuDialog:"ActionsButton_menuDialog__3vech",menuItem:"ActionsButton_menuItem__1ochd"}},126:function(e,t,a){e.exports={showFormButton:"ExpandableForm_showFormButton__GwbzT",inputNumber:"ExpandableForm_inputNumber__sY3Np"}},127:function(e,t,a){e.exports={formListInput:"FormListInput_formListInput__2p7LT",formListInputField:"FormListInput_formListInputField__3955K","has-error":"FormListInput_has-error__zlDRS",formListInputBtn:"FormListInput_formListInputBtn__2pOim",hidden:"FormListInput_hidden__1ltzz",formTagList:"FormListInput_formTagList__Aewyx",formTagListItem:"FormListInput_formTagListItem__3UiWF",formTag:"FormListInput_formTag__17bFe",formTagText:"FormListInput_formTagText__2IvKg",formTagRemove:"FormListInput_formTagRemove__qr9MK"}},139:function(e,t,a){e.exports={filterMultipleSelect:"FilterMultipleSelect_filterMultipleSelect__1z4H6",title:"FilterMultipleSelect_title__3m_nD",arrow:"FilterMultipleSelect_arrow__e8SLX",showOptions:"FilterMultipleSelect_showOptions__20Kny",options:"FilterMultipleSelect_options__2UB3z",option:"FilterMultipleSelect_option__2dNob"}},141:function(e,t,a){e.exports={toast:"Notifications_toast__2w3Hf",toastError:"Notifications_toastError__2NszH",toastIcon:"Notifications_toastIcon__1tO8H",toastHeader:"Notifications_toastHeader__2cgQ7",toastBody:"Notifications_toastBody__3M3Te"}},151:function(e,t,a){e.exports={messagesCard:"Messages_messagesCard__d1Ni5",title:"Messages_title__thL6O",text:"Messages_text__1o3ez",loader:"Messages_loader__3zis5"}},152:function(e,t,a){e.exports={indicator:"AppointmentScheduledModal_indicator__34kt5",green:"AppointmentScheduledModal_green__2oeyA",yellow:"AppointmentScheduledModal_yellow__3SpZT",red:"AppointmentScheduledModal_red__18n22"}},153:function(e,t,a){e.exports={tabsContainer:"TabMate_tabsContainer__14oQy",tabs:"TabMate_tabs__jGO6x",tab:"TabMate_tab__1L9qO",active:"TabMate_active__2-ePC",title:"TabMate_title__lgYNs",text:"TabMate_text__1JG9W"}},154:function(e,t,a){e.exports={stageSelect:"StageSelect_stageSelect__3oR2k",tooltipFieldName:"StageSelect_tooltipFieldName__3BVgX"}},180:function(e,t,a){e.exports={dashboardCard:"SecretaryDashboard_dashboardCard__2EBUf",title:"SecretaryDashboard_title__2USlT",dashboardTableWrapper:"SecretaryDashboard_dashboardTableWrapper__1U5kw",tabLink:"SecretaryDashboard_tabLink__2oSvD"}},187:function(e,t,a){e.exports={helpIcon:"InsuranceAuthorizationNumber_helpIcon__3gX75",almostOverdue:"InsuranceAuthorizationNumber_almostOverdue__2S0xK",overdue:"InsuranceAuthorizationNumber_overdue__gUXln"}},190:function(e,t,a){e.exports={body:"AddPatientModal_body__2kzKN",patientInfo:"AddPatientModal_patientInfo__p_Ih-",forms:"AddPatientModal_forms__2FHQO",clearSelectedPatientIcon:"AddPatientModal_clearSelectedPatientIcon__2f7Yy",btnClearSelectedPatient:"AddPatientModal_btnClearSelectedPatient__G0bdF"}},20:function(e,t,a){e.exports={dashboardCard:"PatientTransfersDashboard_dashboardCard__33CnN",title:"PatientTransfersDashboard_title__2oqnx",dashboardTableWrapper:"PatientTransfersDashboard_dashboardTableWrapper__2a_Ft",selectBlock:"PatientTransfersDashboard_selectBlock__1eR1G",disabled:"PatientTransfersDashboard_disabled__1JAOL",cross:"PatientTransfersDashboard_cross__1wkJR",selectCross:"PatientTransfersDashboard_selectCross__jUZxe",searchInput:"PatientTransfersDashboard_searchInput__2FAOk",formCheck:"PatientTransfersDashboard_formCheck__1F_WQ",formCheckInput:"PatientTransfersDashboard_formCheckInput__1dnWT",formCheckLabel:"PatientTransfersDashboard_formCheckLabel__1kTI7",tableActionButton:"PatientTransfersDashboard_tableActionButton__1R1Ot",formGroup:"PatientTransfersDashboard_formGroup__2j1pS",formInput:"PatientTransfersDashboard_formInput__3cCt5",formLabel:"PatientTransfersDashboard_formLabel__60bqV",formGroupHasError:"PatientTransfersDashboard_formGroupHasError__14tjG",formErrors:"PatientTransfersDashboard_formErrors__3RCtf"}},210:function(e,t,a){e.exports={box:"InputSearch_box__25p-I",search:"InputSearch_search__tKINX",clear:"InputSearch_clear__3uRSS",input:"InputSearch_input__1vrSU"}},211:function(e,t,a){e.exports={logs:"FaxLogs_logs__1p0N4",singleLog:"FaxLogs_singleLog__22bbD",test:"FaxLogs_test__3gTdF",collapse:"FaxLogs_collapse__13zSR"}},212:function(e,t,a){e.exports={"circle-loader":"CircleLoader_circle-loader__1hgea","circle-loader--absolute":"CircleLoader_circle-loader--absolute__3-XG1","spinner-border-small":"CircleLoader_spinner-border-small__1tVqi"}},213:function(e,t,a){e.exports={patient:"Patient_patient__2U3f1",name:"Patient_name__3hViN",email:"Patient_email__MnDNg",status:"Patient_status__3YetR"}},214:function(e,t,a){e.exports={selectInput:"CustomSelect_selectInput__14niP",arrow:"CustomSelect_arrow__1lukE",options:"CustomSelect_options__3u7fe",isFocused:"CustomSelect_isFocused__WuDU2"}},215:function(e,t,a){e.exports={status:"FormStatusIndicator_status__1mGrJ",notSend:"FormStatusIndicator_notSend__1vyOZ",send:"FormStatusIndicator_send__1wa2J",signed:"FormStatusIndicator_signed__3MSZk"}},24:function(e,t,a){e.exports={header:"PatientDetailsModal_header__19AaK",age:"PatientDetailsModal_age__gLxVK",patientDetails:"PatientDetailsModal_patientDetails__2MxGQ",title:"PatientDetailsModal_title__3koep",info:"PatientDetailsModal_info__1KXzm",field:"PatientDetailsModal_field__VgSzd",value:"PatientDetailsModal_value__1ACVD",fieldTag:"PatientDetailsModal_fieldTag__271LT",sendFormDialog:"PatientDetailsModal_sendFormDialog__1C6dZ",commentTextarea:"PatientDetailsModal_commentTextarea__NzQ72",clip:"PatientDetailsModal_clip__2TlV7",active:"PatientDetailsModal_active__2kBTg",completed:"PatientDetailsModal_completed___srvM",rescheduled:"PatientDetailsModal_rescheduled__2K7vJ",comment:"PatientDetailsModal_comment__19khK",name:"PatientDetailsModal_name__1fMpP",date:"PatientDetailsModal_date__2zYch",systemComment:"PatientDetailsModal_systemComment__2PJwL",content:"PatientDetailsModal_content__s2XIS"}},287:function(e,t,a){e.exports={default:"ToggleSwitch_default__1wA2v",toggleButton:"ToggleSwitch_toggleButton__pdV0L",activeButton:"ToggleSwitch_activeButton__31Qg4"}},288:function(e,t,a){e.exports={"dot-1":"DataIsLoading_dot-1__3uPds","dot-animation":"DataIsLoading_dot-animation__1qa5S","dot-2":"DataIsLoading_dot-2__f1PbM","dot-3":"DataIsLoading_dot-3__3IIHD"}},289:function(e,t,a){e.exports={box:"FaxToolbar_box__Sky7r",counter:"FaxToolbar_counter__1dVfT",zoom:"FaxToolbar_zoom__iSwx3"}},290:function(e,t,a){e.exports={insurance:"InsuranceOption_insurance__P0V4f",name:"InsuranceOption_name__vjWSS",address:"InsuranceOption_address__37YS8"}},292:function(e,t,a){e.exports={optionComponent:"CustomOption_optionComponent__el8zx",option:"CustomOption_option__1VaZg",groupTitle:"CustomOption_groupTitle__3tpwp"}},293:function(e,t,a){e.exports={header:"SuperviseeBlock_header__1t_Lz",body:"SuperviseeBlock_body__rRieW"}},294:function(e,t,a){e.exports={sendByEmailDialog:"SendDocumentByEmailModal_sendByEmailDialog__2ImwB",label:"SendDocumentByEmailModal_label__1UDCF"}},328:function(e,t,a){e.exports={header:"AppMainLayout_header__1EZBb",main:"AppMainLayout_main__2OOCG"}},329:function(e,t,a){e.exports={menu:"ButtonOptions_menu__2-6B1",link:"ButtonOptions_link__38_Ec"}},330:function(e,t,a){e.exports={default:"Table_default__1ubRV",extendedHeight:"Table_extendedHeight__1TcC_",faxes:"Table_faxes__2xZAI"}},332:function(e,t,a){e.exports={scroll:"FaxView_scroll__2mXlD",canvas:"FaxView_canvas__1G-8i"}},333:function(e,t,a){e.exports={tridiumAppointmentsInfo:"TridiumAppointmentsInfo_tridiumAppointmentsInfo__3oEdo",btnRestartTridiuumParsers:"TridiumAppointmentsInfo_btnRestartTridiuumParsers__S3OcF"}},334:function(e,t,a){e.exports={star:"StarRating_star__3XRcL",starHover:"StarRating_starHover__OWGjB"}},335:function(e,t,a){e.exports={existingPatientDialog:"ExistingPatientDialog_existingPatientDialog__1UaHS",noData:"ExistingPatientDialog_noData__1ITmG"}},336:function(e,t,a){e.exports={sourceTag:"SourceTag_sourceTag__ZWJds",sourceTageLarge:"SourceTag_sourceTageLarge__1Xzd8"}},337:function(e,t,a){e.exports={dotsIcon:"ThreeDotsMenu_dotsIcon__2Ap7E",menuDialog:"ThreeDotsMenu_menuDialog__2YATw"}},338:function(e,t,a){e.exports={searchIcon:"SearchInput_searchIcon__1fjdD",searchInput:"SearchInput_searchInput__2OZ7q"}},340:function(e,t,a){e.exports={laneHeader:"CustomLaneHeader_laneHeader__1cujr",label:"CustomLaneHeader_label__1PpS1"}},348:function(e,t){},395:function(e,t,a){e.exports={container:"Faxes_container__3okwz"}},396:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__3SUcH"}},397:function(e,t,a){e.exports={helpIcon:"HelpIcon_helpIcon__1083V"}},398:function(e,t,a){e.exports={helpIcon:"PatientStatusDateTooltip_helpIcon__38Ygs"}},399:function(e,t,a){e.exports={callButton:"CallButtonWithModals_callButton__2ggC1"}},407:function(e,t,a){e.exports={overlay:"CircleLoaderWithOverlay_overlay__2ZwUZ"}},409:function(e,t,a){e.exports={modalDialog:"PatientFormsModal_modalDialog__3nVIu"}},415:function(e,t,a){e.exports={durationIndicator:"DurationIndicator_durationIndicator__p5hkM"}},416:function(e,t,a){e.exports={selectSupervisorBlock:"SupervisorDashboard_selectSupervisorBlock__131O5"}},417:function(e,t,a){e.exports={sendByFaxDialog:"SendDocumentByFaxModal_sendByFaxDialog__3E-70"}},418:function(e,t,a){e.exports={tableWrapper:"StageChangeHistoryModal_tableWrapper__2IWBC"}},419:function(e,t,a){e.exports={tableActionButton:"CreateRequestButton_tableActionButton__2zDKS"}},462:function(e,t,a){},466:function(e,t,a){},47:function(e,t,a){e.exports={dashboardCard:"DoctorsRequestsDashboard_dashboardCard__1gQ0g",title:"DoctorsRequestsDashboard_title__uYPPt",dashboardTableWrapper:"DoctorsRequestsDashboard_dashboardTableWrapper__1gxyv",tabLink:"DoctorsRequestsDashboard_tabLink__1FxmA",formGroup:"DoctorsRequestsDashboard_formGroup__3CbPm",formInput:"DoctorsRequestsDashboard_formInput__1vro2",formLabel:"DoctorsRequestsDashboard_formLabel__2y7kb",formGroupHasError:"DoctorsRequestsDashboard_formGroupHasError__43eAE",formErrors:"DoctorsRequestsDashboard_formErrors__2Sxu0",tableActionButton:"DoctorsRequestsDashboard_tableActionButton__2FOkG",searchInput:"DoctorsRequestsDashboard_searchInput__1AtvD",selectBlock:"DoctorsRequestsDashboard_selectBlock__3vIR5",disabled:"DoctorsRequestsDashboard_disabled__2d4Z6",actionsButton:"DoctorsRequestsDashboard_actionsButton__RMhs-",menuDialog:"DoctorsRequestsDashboard_menuDialog__XIdKT",menuItem:"DoctorsRequestsDashboard_menuItem__1nOJw"}},470:function(e,t,a){},476:function(e,t){},477:function(e,t){},478:function(e,t){},479:function(e,t){},480:function(e,t){},498:function(e,t,a){},629:function(e,t,a){"use strict";a.r(t);var n,s=a(1),r=a.n(s),i=a(385),c=a.n(i),o=a(195),l=a(10),d=(a(462),a(21)),u=a(4),m=a(685),b=a(690),j=a(701),p=a(708),f=a(686),h=a(699),v="row_number",O="active",x="rescheduled",_=a(6),g=a.n(_),y=(a(466),a(0)),N=function(e){var t=e.click,a=e.on,n=e.setRef,r=Object(s.useRef)();return Object(s.useEffect)((function(){n(r)}),[]),Object(y.jsx)("div",{onClick:t,className:"burger-button",ref:r,children:Object(y.jsx)(j.a.Toggle,{className:"shadow-none","aria-controls":"basic-navbar-nav",children:Object(y.jsxs)("div",{className:g()("burger-icon",a&&"show"),children:[Object(y.jsx)("div",{className:"bar"}),Object(y.jsx)("div",{className:"bar"}),Object(y.jsx)("div",{className:"bar"})]})})})},C=a(60),w=(a(470),function(){var e,t=Object(l.c)((function(e){return e.app})).user,a=Object(s.useState)(null),n=Object(u.a)(a,2),r=n[0],i=n[1],c=Object(s.useState)(!1),o=Object(u.a)(c,2),d=o[0],b=o[1],v=Object(s.useState)(null),O=Object(u.a)(v,2),x=O[0],_=O[1],g=Object(s.useRef)();Object(C.j)(g,(function(e){x.current&&x.current.contains(e.target)||b(!1)}));var w=function(e){e.preventDefault(),document.getElementById("logout-form").submit()};Object(s.useEffect)((function(){h.a.get("/api/menu-api").then((function(e){var t=e.data;return i(t)}))}),[]);var D=3===t.role.id?"md":"xxxl",S=["d-none d-".concat(D,"-flex"),"d-".concat(D,"-none custom-dropdown")];return Object(y.jsxs)(j.a,{expand:D,expanded:d,className:"custom-navbar",children:[Object(y.jsxs)(m.a,{fluid:!0,children:[Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(j.a.Brand,{href:"/",children:"Change Within Reach"}),Object(y.jsx)(N,{click:function(){b(!d)},on:d,setRef:_})]}),Object(y.jsx)("div",{className:"nav-container",children:Object(y.jsxs)(j.a.Collapse,{id:"basic-navbar-nav",ref:g,children:[Object(y.jsx)(p.a,{className:"me-auto links",children:r&&(null===(e=r.links)||void 0===e?void 0:e.map((function(e){if(e.submenu){if("items_count"in e){var t=Object(y.jsxs)("span",{children:[Object(y.jsx)("span",{children:e.name}),e.items_count?Object(y.jsxs)("span",{className:"counter ms-1 text-red",children:["(",e.items_count,")"]}):null]});return S.map((function(a,n){return Object(y.jsx)(f.a,{className:a,title:t,children:e.submenu.map((function(e,t){return Object(y.jsxs)(f.a.Item,{href:e.link,children:[Object(y.jsx)("span",{children:e.name}),e.items_count?Object(y.jsxs)("span",{className:"counter ms-1 text-danger",children:["(",e.items_count,")"]}):null]},"".concat(e.name,"-").concat(t))}))},"".concat(e.name,"-").concat(n))}))}return S.map((function(t,a){return Object(y.jsx)(f.a,{className:t,title:e.name,children:e.submenu.map((function(e,t){return Object(y.jsx)(f.a.Item,{href:e.link,children:e.name},"".concat(e.name,"-").concat(t))}))},"".concat(e.name,"-").concat(a))}))}return Object(y.jsx)(p.a.Item,{children:Object(y.jsxs)(p.a.Link,{href:e.link,children:[e.name,e.items_count?Object(y.jsxs)("span",{className:"counter ms-1 text-red",children:["(",e.items_count,")"]}):null]})},e.name)})))}),r&&Object(y.jsx)(p.a,{className:"ms-auto d-none d-".concat(D,"-flex user-name-dropdown"),children:Object(y.jsx)(f.a,{align:"end",title:r.user_name,children:r.user_links.map((function(e){return"/logout"===e.link?Object(y.jsxs)(f.a.Item,{href:"#",onClick:w,children:[e.img&&Object(y.jsx)("img",{className:"icon",src:e.img.url,alt:e.img.alt}),e.name]},e.name):Object(y.jsxs)(f.a.Item,{href:e.link,children:[e.img&&Object(y.jsx)("img",{className:"icon",src:e.img.url,alt:e.img.alt}),e.name]},e.name)}))})}),r&&Object(y.jsxs)(p.a,{className:"ms-auto d-".concat(D,"-none"),children:[Object(y.jsx)("hr",{}),Object(y.jsx)(p.a.Item,{className:"user-name",children:r.user_name}),r.user_links.map((function(e){return"/logout"===e.link?Object(y.jsx)(p.a.Item,{children:Object(y.jsxs)(p.a.Link,{href:"#",onClick:w,children:[e.img&&Object(y.jsx)("img",{className:"icon",src:e.img.url,alt:e.img.alt}),e.name]})},e.name):Object(y.jsx)(p.a.Item,{children:Object(y.jsxs)(p.a.Link,{href:e.link,children:[e.img&&Object(y.jsx)("img",{className:"icon",src:e.img.url,alt:e.img.alt}),e.name]})},e.name)}))]}),Object(y.jsx)("form",{id:"logout-form",action:"/logout",method:"POST",hidden:!0})]})})]}),Object(y.jsx)("hr",{className:"additional-border"})]})}),D=a(328),S=a.n(D),P=function(e){var t=e.children;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("header",{className:S.a.header,children:Object(y.jsx)(w,{})}),Object(y.jsx)("main",{className:S.a.main,children:t})]})},k=r.a.createContext({}),I=a(688),A=a(9),M=a(15),T=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next="all"===e.t0?4:"unread"===e.t0?7:"unassigned"===e.t0?10:13;break;case 4:return e.next=6,h.a.get("api/ringcentral/faxes?page=".concat(a));case 6:case 9:case 12:case 15:return e.abrupt("return",e.sent);case 7:return e.next=9,h.a.get("api/ringcentral/faxes?page=".concat(a,"&unread=false"));case 10:return e.next=12,h.a.get("api/ringcentral/faxes?page=".concat(a,"&unassigned=false"));case 13:return e.next=15,h.a.get("api/ringcentral/faxes?page=".concat(a));case 16:e.next=21;break;case 18:return e.prev=18,e.t1=e.catch(0),e.abrupt("return",e.t1.response);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,a){return e.apply(this,arguments)}}(),F=function(){return h.a.get("api/ringcentral/faxes?unread=false").then((function(e){return e})).catch((function(e){return e.response}))},L=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a){var n,s;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=encodeURIComponent(t),e.t0=a,e.next="all"===e.t0?4:"unread"===e.t0?6:"targetSearch"===e.t0?8:10;break;case 4:return n="",e.abrupt("break",11);case 6:case 8:return n="unread=false",e.abrupt("break",11);case 10:console.error("Unexpected table data");case 11:return e.next=13,h.a.get("api/ringcentral/faxes?".concat(n,"&search=").concat(s)).catch((function(e){return e.response}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("api/patients/".concat(t,"/faxes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("api/leads/".concat(t,"/faxes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("api/ringcentral/faxes/read-status",{fax_id:[t.id]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){var a;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach((function(e){return a.push(e.id)})),e.next=4,h.a.post("api/ringcentral/faxes/unread-status",{fax_id:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a,n,s,r){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("api/ringcentral/faxes/patient-add-pdf",{assign:1,fax_id:t.id,fax_name:n,content:r,document_type_id:70,patient_id:a.id,only_for_admin:s?1:0});case 2:return e.next=4,h.a.post("api/ringcentral/fax-attach",{fax_id:t.id,comment:r,patient_id:a.id,status:s?"private":"public"});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,s,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a,n,s,r){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("api/leads/".concat(a.id,"/attach-fax/").concat(t.id),{comment:r,fax_name:n,only_for_admin:s?1:0,status:s?"private":"public"});case 2:case"end":return e.stop()}}),e)})));return function(t,a,n,s,r){return e.apply(this,arguments)}}(),z=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("api/ringcentral/faxes/patient-remove-pdf",{detach_pdf:1,fax_id:t.id,patient_id:t.patient_id});case 2:return e.next=4,h.a.post("api/ringcentral/fax-detach",{fax_id:t.id});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("api/leads/".concat(t.patient_lead_id,"/detach-fax/").concat(t.id));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/ringcentral/fax-logging",{fax_id:t,download:!0});case 2:return e.next=4,h.a.get("api/ringcentral/fax-download?fax_id=".concat(t),{responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(e){var t=e.headers["content-disposition"].split("filename=")[1].replaceAll('"',"");console.log(t);var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),console.log(n),document.body.appendChild(n),n.click()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/ringcentral/fax-logging",{fax_id:t});case 2:return e.next=4,h.a.get("api/ringcentral/fax-view?fax_id=".concat(t),{responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}}).then((function(e){var t=new Blob([e.data],{type:"application/pdf"});return"".concat(window.URL.createObjectURL(t))})).catch((function(e){return e.response}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){var a,n=arguments;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:1,e.next=3,h.a.get("api/ringcentral/fax-logs?fax_id=".concat(t,"&page=").concat(a)).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=a(266),Z=function(){var e=Object(s.useContext)(k),t=e.selectedRow,a=e.markedRows,n=e.setLoading,r=e.setUnreadCount;return Object(y.jsxs)(G.a,{className:"d-flex align-items-center text-body me-2",onClick:function(){if(n(!0),!a.length&&t&&E([t]).then((function(e){200===e.status&&(t.is_read=!1,F().then((function(e){r(e.data.meta.total)})))})).finally((function(){n(!1)})),a.length&&!t){var e=[];a.forEach((function(t){e.push(t.original)})),E([].concat(e)).then((function(t){200===t.status&&([].concat(e).forEach((function(e){e.is_read=!1})),F().then((function(e){r(e.data.meta.total)})))})).finally((function(){n(!1),a.forEach((function(e){return e.toggleRowSelected()}))}))}if(a.length&&t){var s=[];a.forEach((function(e){s.push(e.original)})),E([t].concat(s)).then((function(e){200===e.status&&([t].concat(s).forEach((function(e){e.is_read=!1})),F().then((function(e){r(e.data.meta.total)})))})).finally((function(){n(!1),a.forEach((function(e){return e.toggleRowSelected()}))}))}},variant:"outline-secondary",disabled:!(t||a.length),children:[Object(y.jsx)("span",{children:"Mark as unread"}),Object(y.jsx)("div",{className:"ms-1",children:function(){var e=a.filter((function(e){return e.original===t}));return a.length&&t&&!e.length?"(".concat(a.length+1,")"):a.length&&t&&e.length||!t&&a.length?"(".concat(a.length,")"):!a.length&&t?"(".concat(1,")"):void 0}()})]})},J=a(135),X=["title","titleId"];function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Q.apply(this,arguments)}function $(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ee(e,t){var a=e.title,r=e.titleId,i=$(e,X);return s.createElement("svg",Q({width:16,height:17,viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,n||(n=s.createElement("path",{d:"M12.6666 8.49992C12.6666 8.86811 12.3682 9.16659 12 9.16659H3.99998C3.63179 9.16659 3.33331 8.86811 3.33331 8.49992C3.33331 8.13173 3.63179 7.83325 3.99998 7.83325H12C12.3682 7.83325 12.6666 8.13173 12.6666 8.49992Z",fill:"white"})))}var te,ae,ne=s.forwardRef(ee),se=(a.p,r.a.createContext({})),re=a(709),ie=function(e){var t=e.data,a=e.state,n=e.handleDecline,s=e.handleAccept;return Object(y.jsx)(re.a,{show:a,backdrop:"true",onHide:n,centered:!0,children:Object(y.jsxs)(re.a.Body,{className:"pt-4",children:[Object(y.jsxs)("div",{className:"text-center mb-4",children:[Object(y.jsx)("p",{className:"mb-4",children:Object(y.jsx)("b",{children:"Are you sure you want to detach the Fax?"})}),Object(y.jsxs)("p",{style:{maxWidth:"260px",margin:"0 auto",lineHeight:"160%"},children:["This action can\u2019t be undone!",Object(y.jsx)("br",{}),"You will detach Fax ",Object(y.jsx)("b",{children:null===t||void 0===t?void 0:t.phone})," from",Object(y.jsx)("br",{}),null===t||void 0===t?void 0:t.patient," patient\u2019s card"]})]}),Object(y.jsxs)("div",{className:"d-flex justify-content-center gap-2 pt-2",children:[Object(y.jsx)(G.a,{className:"text-white",variant:"primary",onClick:n,children:"Cancel"}),Object(y.jsx)(G.a,{className:"text-body",variant:"outline-secondary",onClick:s,children:"Yes, Detach"})]})]})})},ce=a(142),oe=["title","titleId"];function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},le.apply(this,arguments)}function de(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ue(e,t){var a=e.title,n=e.titleId,r=de(e,oe);return s.createElement("svg",le({width:12,height:13,viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,te||(te=s.createElement("path",{d:"M2.125 6.36279H9.625",stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})),ae||(ae=s.createElement("path",{d:"M5.1499 3.3505L2.1249 6.3625L5.1499 9.375",stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})))}var me,be,je=s.forwardRef(ue),pe=(a.p,["title","titleId"]);function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},fe.apply(this,arguments)}function he(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ve(e,t){var a=e.title,n=e.titleId,r=he(e,pe);return s.createElement("svg",fe({width:16,height:17,viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,me||(me=s.createElement("path",{d:"M12.6668 8.49992C12.6668 8.86811 12.3684 9.16659 12.0002 9.16659H4.00016C3.63197 9.16659 3.3335 8.86811 3.3335 8.49992C3.3335 8.13173 3.63197 7.83325 4.00016 7.83325H12.0002C12.3684 7.83325 12.6668 8.13173 12.6668 8.49992Z",fill:"white"})),be||(be=s.createElement("path",{d:"M8.00033 13.1668C7.63214 13.1668 7.33366 12.8684 7.33366 12.5002L7.33366 4.50016C7.33366 4.13197 7.63214 3.8335 8.00033 3.8335C8.36852 3.8335 8.66699 4.13197 8.66699 4.50016L8.66699 12.5002C8.66699 12.8684 8.36851 13.1668 8.00033 13.1668Z",fill:"white"})))}var Oe,xe=s.forwardRef(ve),_e=(a.p,["title","titleId"]);function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ge.apply(this,arguments)}function ye(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Ne(e,t){var a=e.title,n=e.titleId,r=ye(e,_e);return s.createElement("svg",ge({width:12,height:13,viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Oe||(Oe=s.createElement("path",{d:"M9.5498 2.9498C7.5998 0.999805 4.3998 0.999805 2.4498 2.9498C0.499805 4.8998 0.499805 8.0998 2.4498 10.0498C4.3998 11.9998 7.5498 11.9998 9.4998 10.0498C11.4498 8.0998 11.4998 4.8998 9.5498 2.9498ZM7.3998 8.5998L5.9998 7.1998L4.5998 8.5998L3.8998 7.8998L5.2998 6.4998L3.8998 5.0998L4.5998 4.3998L5.9998 5.7998L7.3998 4.3998L8.0998 5.0998L6.6998 6.4998L8.0998 7.8998L7.3998 8.5998Z",fill:"#3E4855"})))}var Ce,we,De,Se=s.forwardRef(Ne),Pe=(a.p,a(88)),ke=a.n(Pe),Ie=function(e){return g()({"patient-status--active":"Active"===e},{"patient-status--archived":"Archived"===e},{"patient-status--discharged":"Discharged"===e},{"patient-status--inactive":"Inactive"===e},{"patient-status--lost":"Lost"===e},{"patient-status--new ":"New"===e},{"patient-status--other":"Other"===e},{"patient-status--other":"Not created"===e})},Ae=function(e){var t=e.handlePatientSearch,a=e.handlePatientChoice,n=e.attachButtonHandler,r=e.row,i=e.disabled,c=(Object(d.m)(),Object(s.forwardRef)((function(e,t){var a=e.onClick;return Object(y.jsxs)("button",{className:"d-flex align-items-center text-white btn btn-primary me-2",disabled:i,ref:t,onClick:function(e){e.preventDefault(),a(e)},children:[Object(y.jsx)("span",{className:"me-2",children:"Assign to patient"}),Object(y.jsx)(xe,{})]})}))),o=Object(s.forwardRef)((function(e,i){e.children;var c,o=e.style,l=e.className,d=Object(s.useState)(1),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)([]),f=Object(u.a)(p,2),h=f[0],v=f[1],O=Object(s.useState)([]),x=Object(u.a)(O,2),_=x[0],g=x[1],N=Object(s.useState)(""),C=Object(u.a)(N,2),w=C[0],D=C[1],S=Object(s.useState)(""),P=Object(u.a)(S,2),k=P[0],I=P[1],A=Object(s.useState)(!0),M=Object(u.a)(A,2),T=M[0],F=M[1],L=Object(s.useRef)();return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{ref:i,style:o,className:"".concat(l," ").concat(ke.a.formWrapper),onClick:function(e){return e.stopPropagation()},children:[Object(y.jsxs)("div",{className:1===b?"visible":"visually-hidden",style:{width:"200px"},children:[Object(y.jsx)("div",{className:ke.a.title,children:"Search by patient:"}),Object(y.jsxs)("div",{className:ke.a.patientSearch,children:[Object(y.jsx)("input",{autoFocus:!0,type:"text",ref:L,className:ke.a.input,placeholder:"Start typing name",onInput:function(e){return t(e.target.value,v)}}),(null===(c=L.current)||void 0===c?void 0:c.value)&&Object(y.jsx)(Se,{className:ke.a.patientSearchClear,onClick:function(){t("",v),L.current.value=""}})]}),Object(y.jsx)("ul",{className:ke.a.list,children:h.map((function(e,t){return e.patient_status?Object(y.jsx)("li",{className:Ie(e.patient_status),onClick:function(t){return a(t,e,g,j)},children:e.patient},t):Object(y.jsxs)("li",{onClick:function(t){return a(t,e,g,j)},children:[e.patient," (Not Created)"]},t)}))})]}),Object(y.jsxs)("div",{className:2===b?"".concat(ke.a.stepTwo," visible"):"visually-hidden",style:{width:"367px"},children:[Object(y.jsxs)("div",{role:"button",className:ke.a.buttonBack,onClick:function(){return j(1)},children:[Object(y.jsx)("div",{className:"d-flex me-2 flex-shrink-0",children:Object(y.jsx)(je,{})}),Object(y.jsx)("div",{className:"d-flex",children:Object(y.jsx)("small",{children:"Back to search"})})]}),Object(y.jsxs)("div",{className:ke.a.patient,children:[Object(y.jsx)("small",{children:"Assign Fax to patient:"}),Object(y.jsx)("small",{className:"flex-shrink-0 ms-2 ".concat(Ie(_.patient_status)),children:_.patient})]}),Object(y.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(y.jsxs)("div",{className:ke.a.textareaBox,children:[Object(y.jsx)("textarea",{rows:3,required:!0,value:w,className:ke.a.textarea,placeholder:"Add comment which will be added to patient\u2019s chart*",onChange:function(e){return D(e.target.value)}}),Object(y.jsx)("input",{type:"text",checked:T,id:"set-fax-name",placeholder:"Set fax name",className:"".concat(ke.a.textarea," mb-1"),onChange:function(e){return I(e.target.value)}})]}),Object(y.jsxs)("div",{className:ke.a.checkbox,children:[Object(y.jsx)("input",{id:"make-private",type:"checkbox",checked:T,onChange:function(e){return F(e.target.checked)}}),Object(y.jsxs)("div",{className:"d-grid m-0 ms-2",children:[Object(y.jsx)("label",{htmlFor:"make-private",className:"m-0",children:"Make private"}),Object(y.jsx)("span",{children:"(visible for Admin and Secretary only)"})]})]}),Object(y.jsx)("div",{className:"d-grid gap-2 mt-3",children:Object(y.jsxs)("button",{type:"submit",className:"btn btn-primary text-white",onClick:function(){return n(r,_,k,T,w)},children:["Assign to ",_.patient]})})]})]})]})})}));return Object(y.jsxs)(ce.a,{children:[Object(y.jsx)(ce.a.Toggle,{as:c}),Object(y.jsx)(ce.a.Menu,{as:o,align:"end",renderOnMount:!0})]})},Me=function(e){var t=e.state,a=Object(s.useContext)(se).enqueueNotification,n=Object(s.useContext)(k),r=n.selectedRow,i=n.setLoading,c=n.updateData,o=n.activeTab,l=n.currentPage,d=Object(s.useState)(!1),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(J.a)(300,(function(e,t){var a;e.trim().length?(a=e.trim(),h.a.get("api/ringcentral/patients?search=".concat(a)).catch((function(e){return e.response}))).then((function(e){404===e.status?t([]):t(e.data.data)})):t([])})),f=function(e){j(e)};return Object(y.jsxs)(y.Fragment,{children:[null!==r&&void 0!==r&&r.patient||null!==r&&void 0!==r&&r.patient_lead?Object(y.jsxs)(G.a,{className:"d-flex align-items-center text-white me-2",disabled:t,onClick:function(){return f(!0)},children:[Object(y.jsx)("span",{className:"me-2",children:"Detach Fax "}),Object(y.jsx)(ne,{})]}):Object(y.jsx)(Ae,{row:r,disabled:t,handlePatientSearch:p,attachButtonHandler:function(e,t,n,s,r){if(!r.length)return!1;(t.patient_status?H:B)(e,t,n,s,r).then((function(){i(!0),T(o,l).then((function(n){c(n);var s=e.phone?e.phone:"Fax";a("Success","".concat(s," successfully assigned to ").concat(t.patient))}))})).finally((function(){i(!1)}))},handlePatientChoice:function(e,t,a,n){e.stopPropagation(),a(t),n(2)}}),Object(y.jsx)(ie,{data:r,state:b,handleAccept:function(){return function(e){(e.patient?z:U)(e).then((function(){i(!0),f(!1),T(o,l).then((function(e){c(e),a("Success","Successfully unattached")})).finally((function(){i(!1)}))}))}(r)},handleDecline:function(){return f(!1)}})]})},Te=["title","titleId"];function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fe.apply(this,arguments)}function Le(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function qe(e,t){var a=e.title,n=e.titleId,r=Le(e,Te);return s.createElement("svg",Fe({width:16,height:17,viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Ce||(Ce=s.createElement("path",{d:"M8.08122 10.7905L8.08122 2.76318",stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})),we||(we=s.createElement("path",{d:"M10.0254 8.83887L8.08139 10.7909L6.13739 8.83887",stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})),De||(De=s.createElement("path",{d:"M11.17 5.91846H11.792C13.1487 5.91846 14.248 7.01779 14.248 8.37512L14.248 11.6311C14.248 12.9845 13.1514 14.0811 11.798 14.0811L4.37138 14.0811C3.01471 14.0811 1.91471 12.9811 1.91471 11.6245L1.91471 8.36779C1.91471 7.01512 3.01205 5.91846 4.36471 5.91846H4.99271",stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})))}var Ye=s.forwardRef(qe),Re=(a.p,a(329)),Ee=a.n(Re),He=Object(s.forwardRef)((function(e,t){e.children;var a=e.onClick,n=e.disabled;return Object(y.jsx)("button",{className:"d-flex align-items-center text-body btn btn-outline-secondary",disabled:n,ref:t,onClick:function(e){a(e)},children:Object(y.jsx)("span",{children:"\u2022\u2022\u2022"})})})),Be=function(e){return Object(y.jsxs)("li",{className:"".concat(Ee.a.link," ").concat(e.className),onClick:e.onClick,children:[Object(y.jsx)(e.icon,{}),Object(y.jsx)("span",{children:e.children})]})},ze=function(e){var t=e.state,a=Object(s.useContext)(k).selectedRow;return Object(y.jsx)("div",{children:Object(y.jsxs)(ce.a,{align:"start",autoClose:"outside",children:[Object(y.jsx)(ce.a.Toggle,{as:He,disabled:t,variant:"success"}),Object(y.jsx)(ce.a.Menu,{className:Ee.a.menu,as:"ul",align:"end",renderOnMount:!0,children:Object(y.jsx)(ce.a.Item,{as:Be,onClick:function(){return function(e){V(e.id).then((function(e){return e}))}(a)},icon:Ye,children:"Download Fax"})})]})})},Ue=a(710),Ve=a(391),We=a(287),Ke=a.n(We),Ge=function(e){var t=e.type,a=e.name,n=e.value,s=e.onChange,r=e.buttons,i=e.className,c=void 0===i?"default":i;return Object(y.jsx)(Ue.a,{type:t,name:a,value:n,onChange:s,className:Ke.a[c],children:r.map((function(e){return Object(y.jsxs)(Ve.a,{variant:"outline-secondary outline-toggle",id:e.id,value:e.value,className:g()(Ke.a.toggleButton,n===e.value?Ke.a.activeButton:""),children:[Object(y.jsx)("span",{children:e.label}),e.counter&&Object(y.jsx)("span",{className:"counter ms-1",children:"(".concat(e.counter,")")})]},e.id)}))})},Ze=function(){var e=Object(s.useContext)(k),t=e.activeTab,a=e.setActiveTab,n=e.selectedRow,r=e.markedRows,i=e.unreadCount,c=e.updateData,o=e.setLoading,l=e.setButtonBackState;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(I.a,{children:Object(y.jsx)(Ge,{type:"radio",name:"tabs-buttons",value:t,onChange:function(e){a(e),o(!0),T(e,1).then((function(e){e.status,c(e)})).finally((function(){o(!1),l(!1)}))},buttons:[{id:"tab-btn-1",value:"all",label:"All Faxes"},{id:"tab-btn-2",value:"unread",label:"Unread",counter:i},{id:"tab-btn-3",value:"unassigned",label:"Unassigned"}],className:"faxes"})}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(Me,{state:!(n&&!r.length)}),Object(y.jsx)(Z,{state:(!r.length||null!==n||1!==r.length)&&(!n||0!==r.length)}),Object(y.jsx)(ze,{state:!n}),Object(y.jsx)("a",{type:"button",rel:"noreferrer",target:"_blank",title:"How to use Faxes?",className:"d-flex align-items-center text-body ms-2 btn btn-outline-secondary",href:"https://cwr.zendesk.com/hc/en-us/articles/4413923854866-How-to-use-Faxes",children:"?"})]})]})};function Je(e){var t=e.getHours(),a=e.getMinutes(),n=t>=12?"PM":"AM";return"".concat(t=(t%=12)||12,":").concat(a," ").concat(n)}var Xe,Qe,$e=["title","titleId"];function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},et.apply(this,arguments)}function tt(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function at(e,t){var a=e.title,n=e.titleId,r=tt(e,$e);return s.createElement("svg",et({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Xe||(Xe=s.createElement("circle",{cx:7.84442,cy:7.84394,r:5.99237,stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})),Qe||(Qe=s.createElement("path",{d:"M12.0122 12.3232L14.3616 14.6665",stroke:"#3E4855",strokeLinecap:"round",strokeLinejoin:"round"})))}var nt,st=s.forwardRef(at),rt=(a.p,function(e){var t=e.cell,a=Object(s.useContext)(k),n=a.activeTab,r=a.setTableData,i=a.setTableParams,c=a.setSearchBarState,o=a.setButtonBackState,l=a.setLoading,d=a.searchParams,u=a.setSearchParams;return Object(y.jsx)(y.Fragment,{children:t.value&&Object(y.jsx)("div",{role:"button",className:"d-flex p-1 pt-0 pb-0 ".concat("targetSearch"===n?"d-none":""),onClick:function(e){return function(e,t){var a,n=e.value;t.stopPropagation(),n&&(a=e.row.original.patient_id?q(e.row.original.patient_id):Y(e.row.original.patient_lead_id),c(!1),o(!0),l(!0),a.then((function(e){r(e.data.faxes),i(e.data.meta)})).finally((function(){l(!1),u(n)})))}(t,e)},children:!d&&Object(y.jsx)(st,{})})})}),it=a(12),ct=a(2),ot=a(14),lt=a(189),dt=a(31),ut=a(36),mt=a.n(ut),bt=a(288),jt=a.n(bt),pt=function(e){var t=e.showLabelNotLoaded,a=e.labelNotLoaded;return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"3",className:"text-center p-5 h6",children:t&&a?Object(y.jsx)("span",{children:a}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{children:"Data is loading "}),Object(y.jsx)("span",{className:jt.a["dot-1"],children:"."}),Object(y.jsx)("span",{className:jt.a["dot-2"],children:"."}),Object(y.jsx)("span",{className:jt.a["dot-3"],children:"."})]})})})},ft=function(){return Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"3",className:"text-center p-5 h6",children:"No data"})})},ht=a(330),vt=a.n(ht),Ot=["indeterminate","isVerticallyCentered"],xt=Object(s.forwardRef)((function(e,t){var a=e.indeterminate,n=e.isVerticallyCentered,i=void 0!==n&&n,c=Object(ot.a)(e,Ot),o=r.a.useRef(),l=t||o;return Object(s.useEffect)((function(){l.current.indeterminate=a}),[l,a]),Object(y.jsx)("div",{className:g()(i&&" d-flex align-items-center h-100"),children:Object(y.jsx)("label",{style:{padding:"8px"},onClick:function(e){return e.stopPropagation()},children:Object(y.jsx)("input",Object(ct.a)({className:"position-relative",type:"checkbox",ref:l},c))})})})),_t=function(e){var t=e.columns,a=e.data,n=e.dataIsLoaded,r=e.pageSize,i=void 0===r?1e4:r,c=e.currentPage,o=void 0===c?1:c,l=e.withCheckbox,d=e.checkboxVerticallyCentered,u=void 0!==d&&d,m=e.className,b=void 0===m?"default":m,j=e.rowIsClickable,p=void 0!==j&&j,f=e.showLabelNotLoaded,h=void 0!==f&&f,O=e.labelNotLoaded,x=void 0===O?"":O,_=e.options,N=void 0===_?{applyMinHeightToHeader:!1}:_,C=Object(s.useContext)(k),w=C.setMarkedRows,D=C.selectedRow,S=C.setSelectedRow,P=C.faxViewRef,I=C.loading,A=C.tableData,M=C.setUnreadCount,T=C.setPdfFile,F=function(e){return!1===e.is_read?"unread":""},L=function(e){return e.id===(null===D||void 0===D?void 0:D.id)?"selected":""},q=Object(lt.useTable)({columns:t,data:a,initialState:{pageSize:i,pageIndex:o-1,sortBy:[]}},lt.useSortBy,lt.usePagination,lt.useRowSelect,lt.useFlexLayout,(function(e){l&&e.visibleColumns.push((function(e){return[{id:"selection",minWidth:35,width:35,isVerticallyCentered:!0,Header:function(e){var t=e.getToggleAllRowsSelectedProps;return Object(y.jsx)(xt,Object(ct.a)(Object(ct.a)({},t()),{},{isVerticallyCentered:u}))},Cell:function(e){var t=e.row;return Object(y.jsx)(xt,Object(ct.a)(Object(ct.a)({},t.getToggleRowSelectedProps()),{},{isVerticallyCentered:u}))}}].concat(Object(it.a)(e))}))})),Y=q.getTableProps,E=q.getTableBodyProps,H=q.headerGroups,B=q.prepareRow,z=q.page,U=q.nextPage,V=q.previousPage,K=q.setSortBy,G=q.selectedFlatRows,Z=q.state;Object(s.useEffect)((function(){!function(e){var t=e-Z.pageIndex-1;if(0!==t){if(t>0)for(var a=0;a<t;a++)U();else if(t<0)for(var n=0;n<-t;n++)V();K(Z.sortBy)}}(o)}),[o]),Object(s.useEffect)((function(){l&&w(G)}),[G,w]);var J=function(){for(var e=!0,a=0;a<t.length;a++)if(!t[a].disableSortBy){e=!1;break}return e}();return Object(y.jsxs)("table",Object(ct.a)(Object(ct.a)({},Y()),{},{className:g()("table mb-0",vt.a[b],I?"pe-none opacity-50":"opacity-100"),children:[Object(y.jsx)("thead",{children:H.map((function(e){return Object(y.jsx)("tr",Object(ct.a)(Object(ct.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){var a=Object(ct.a)({},e.getHeaderProps(e.getSortByToggleProps()));return a.key==="header_".concat(v)&&(a.style.flex="none"),l&&0===t?Object(y.jsx)("th",Object(ct.a)(Object(ct.a)({className:"p-0"},e.getHeaderProps()),{},{children:e.render("Header")})):Object(y.jsxs)("th",Object(ct.a)(Object(ct.a)({className:g()("d-flex align-items-center justify-content-between ps-2",J?"p-2":"p-0",N.applyMinHeightToHeader&&vt.a.extendedHeight)},a),{},{children:[Object(y.jsx)("div",{children:e.render("Header")}),e.canSort&&Object(y.jsxs)("div",{className:"d-flex flex-column gap-0",children:[Object(y.jsx)(mt.a,{path:dt.j,size:1,style:{marginBottom:"-12px"},color:e.isSorted&&!e.isSortedDesc?"#2D85C9":"#B8B8B8"}),Object(y.jsx)(mt.a,{path:dt.i,size:1,color:e.isSorted&&e.isSortedDesc?"#2D85C9":"#B8B8B8"})]})]}))}))}))}))}),Object(y.jsx)("tbody",Object(ct.a)(Object(ct.a)({},E()),{},{children:n?0===a.length?Object(y.jsx)(ft,{}):z.map((function(e,t){return B(e),Object(y.jsx)("tr",Object(ct.a)(Object(ct.a)({},e.getRowProps()),{},{onClick:function(){return function(e){p&&(S(e),e.is_read||R(e).then((function(t){200===t.status&&(A.find((function(t){return t.id===e.id})).is_read=!0,M((function(e){return e-1})))})),e.id!==(null===D||void 0===D?void 0:D.id)&&W(e.id,P).then((function(e){T(e)})))}(e.original)},className:g()(e.original.row_class_name,F(e.original),L(e.original)),children:e.cells.map((function(a,n){var s=a.getCellProps(),r=t+1===z.length?"none":"";if(s.style.borderBottom=r,l&&0===n)return Object(y.jsx)("td",Object(ct.a)(Object(ct.a)({className:"p-0 align-items-center"},a.getCellProps()),{},{children:a.render("Cell")}));if(a.column.id===v){var c=0===Z.pageIndex?t+1:i*Z.pageIndex+t+1;return Object(y.jsx)("td",Object(ct.a)(Object(ct.a)({},a.getCellProps()),{},{style:{borderBottom:r,width:s.style.width},children:c}))}return a.column.isLink&&null!==a.value?Object(y.jsx)("td",Object(ct.a)(Object(ct.a)({},a.getCellProps()),{},{children:Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("a",{type:"button",className:"".concat(a.column.textColor(e.original)," text-decoration-none"),href:a.column.link(e.original),children:a.value}),a.render("Cell")]})})):Object(y.jsx)("td",Object(ct.a)(Object(ct.a)({},s),{},{children:Object(y.jsx)("div",{className:g()(a.column.isVerticallyCentered&&"d-flex align-items-center h-100"),children:a.render("Cell")})}))}))}))})):Object(y.jsx)(pt,{showLabelNotLoaded:h,labelNotLoaded:x})}))]}))},gt=function(e){return Object(y.jsxs)("div",{role:"button",className:"d-flex align-items-center",onClick:e.onClick,children:[Object(y.jsx)("div",{className:"d-flex me-2 flex-shrink-0",children:Object(y.jsx)(je,{})}),Object(y.jsx)("div",{className:"d-flex fw-bolder",children:e.children})]})},yt=function(){var e=Object(s.useContext)(k),t=e.activeTab,a=e.setButtonBackState,n=e.setLoading,r=e.updateData,i=e.setSearchParams,c=e.setSearchBarState;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(gt,{onClick:function(){a(!1),n(!0),T(t,1).then((function(e){r(e)})).finally((function(){n(!1),i(null),c(!0)}))},children:"Back to list"})})},Nt=a(210),Ct=a.n(Nt),wt=function(e){var t,a=Object(s.useRef)();return Object(y.jsxs)("div",{className:Ct.a.box,children:[Object(y.jsx)(st,{className:Ct.a.search}),Object(y.jsx)("input",{ref:a,type:e.type,onInput:function(t){return e.handelChange(t.target.value)},placeholder:e.placeholder,className:"".concat(e.className," ").concat(Ct.a.input)}),(null===(t=a.current)||void 0===t?void 0:t.value)&&Object(y.jsx)(Se,{className:Ct.a.clear,onClick:function(){e.handelChange(""),a.current.value=""}})]})},Dt=function(){var e=Object(s.useContext)(k),t=e.activeTab,a=e.searchBarState,n=e.setTableData,r=e.setTableParams,i=e.setLoading,c=e.updateData,o=Object(s.useContext)(se).enqueueNotification,l=Object(J.a)(300,(function(e){e.trim().length?L(e.trim(),t).then((function(e){i(!0),404===e.status?(n([]),r({current_page:1,last_page:1,per_page:15}),o("","Search result is empty")):c(e)})).finally((function(){i(!1)})):(i(!0),T(t,1).then((function(e){c(e),i(!1)})))}));return Object(y.jsx)(y.Fragment,{children:a&&Object(y.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[Object(y.jsx)("span",{className:"d-flex flex-shrink-0",children:"Search by patient\u2019s name:"}),Object(y.jsx)(wt,{type:"text",placeholder:"Start typing name...",handelChange:l})]})})},St=function(){var e=Object(s.useContext)(k),t=e.tableData,a=e.tableParams,n=e.searchBarState,i=e.buttonBackState,c=function(e){return!(!e.row.original.patient_id&&!e.row.original.inquiry_id)},o=function(e){return e.row.original.patient_id?"/chart/".concat(e.row.original.patient_id):"/new-patients-dashboard?selectedCard=".concat(e.row.original.inquiry_id)},l=r.a.useMemo((function(){return[{Header:"Date",accessor:"received_at",width:115,Cell:function(e){return function(e){var t=new Date,a=t.getDate(),n=t.getMonth()+1>10?t.getMonth()+1:"0"+(t.getMonth()+1),s=t.getFullYear(),r="".concat(n,":").concat(a,":").concat(s),i=e.split(" "),c=i[0],o=i[1].split(":"),l=c.split(":")[0],d=c.split(":")[1],u=c.split(":")[2],m=new Date(u,l-1,d,o[0],o[1],o[2]),b=new Date(m.getTime()+72e5),j=b.getMonth()+1>=10?b.getMonth()+1:"0"+(b.getMonth()+1),p=b.getDate()>=10?b.getDate():"0"+b.getDate(),f=b.getFullYear();if("".concat(j,":").concat(p,":").concat(f)===r){var h={hours:b.getHours()>=10?b.getHours():"0"+b.getHours(),minutes:b.getMinutes()>=10?b.getMinutes():"0"+b.getMinutes(),getHours:function(){return this.hours},getMinutes:function(){return this.minutes}};return Je(h),Je(h)}return"".concat(j,"/").concat(p,"/").concat(f)}(e.value)},disableSortBy:!0,isVerticallyCentered:!0},{Header:"From",accessor:"phone",width:110,disableSortBy:!0,isVerticallyCentered:!0},{Header:"Assigned to",accessor:function(e){return e.patient?e.patient:e.patient_lead?"".concat(e.patient_lead):void 0},width:140,isVerticallyCentered:!0,textColor:function(e){return Ie(e.patient_status||"Not created")},Cell:function(e){return Object(y.jsxs)("div",{className:"ms-1 d-flex align-items-center",children:[Object(y.jsxs)("div",{children:[c(e)?Object(y.jsx)("a",{type:"button",className:"".concat(e.column.textColor(e.row.original)," text-decoration-none"),href:o(e),children:e.value}):Object(y.jsx)("span",{className:e.column.textColor(e.row.original),children:e.value}),e.row.original.patient_lead&&Object(y.jsx)("div",{children:"(Not created)"})]}),Object(y.jsx)(rt,{cell:e})]})},disableSortBy:!0}]}),[]);return Object(y.jsxs)(y.Fragment,{children:[n&&Object(y.jsx)("div",{className:"mb-3",children:Object(y.jsx)(Dt,{})}),i&&Object(y.jsx)("div",{className:"mb-4",children:Object(y.jsx)(yt,{})}),Object(y.jsx)(_t,{pageSize:a.per_page,dataIsLoaded:!0,columns:l,data:t||[],withCheckbox:!0,checkboxVerticallyCentered:!0,className:"faxes",rowIsClickable:!0})]})},Pt=a(392),kt=["title","titleId"];function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},It.apply(this,arguments)}function At(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Mt(e,t){var a=e.title,n=e.titleId,r=At(e,kt);return s.createElement("svg",It({width:32,height:33,viewBox:"0 0 32 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,nt||(nt=s.createElement("path",{d:"M7.9998 7.70005C7.9998 7.06353 8.25266 6.45308 8.70275 6.00299C9.15284 5.55291 9.76329 5.30005 10.3998 5.30005H21.5998C22.2363 5.30005 22.8468 5.55291 23.2969 6.00299C23.747 6.45308 23.9998 7.06353 23.9998 7.70005V11.7H22.3998V7.70005C22.3998 7.48788 22.3155 7.28439 22.1655 7.13436C22.0155 6.98433 21.812 6.90005 21.5998 6.90005H10.3998C10.1876 6.90005 9.98415 6.98433 9.83412 7.13436C9.68409 7.28439 9.5998 7.48788 9.5998 7.70005V13.3H18.3998C18.0439 13.7733 17.7979 14.3198 17.6798 14.9H7.9998C7.57546 14.9 7.16849 15.0686 6.86843 15.3687C6.56838 15.6687 6.3998 16.0757 6.3998 16.5V25.3001C6.3998 25.5122 6.48409 25.7157 6.63412 25.8657C6.78415 26.0158 6.98763 26.1 7.1998 26.1H17.6798C17.7998 26.6921 18.0494 27.2361 18.3998 27.7001H7.1998C6.56329 27.7001 5.95284 27.4472 5.50275 26.9971C5.05266 26.547 4.7998 25.9366 4.7998 25.3001V16.5C4.7998 15.6514 5.13695 14.8374 5.73706 14.2373C6.33718 13.6372 7.15111 13.3 7.9998 13.3V7.70005ZM19.1998 15.7C19.1998 15.0635 19.4527 14.4531 19.9027 14.003C20.3528 13.5529 20.9633 13.3 21.5998 13.3H24.7998C25.4363 13.3 26.0468 13.5529 26.4969 14.003C26.9469 14.4531 27.1998 15.0635 27.1998 15.7V25.3001C27.1998 25.9366 26.9469 26.547 26.4969 26.9971C26.0468 27.4472 25.4363 27.7001 24.7998 27.7001H21.5998C20.9633 27.7001 20.3528 27.4472 19.9027 26.9971C19.4527 26.547 19.1998 25.9366 19.1998 25.3001V15.7ZM21.5998 14.9C21.3876 14.9 21.1841 14.9843 21.0341 15.1344C20.8841 15.2844 20.7998 15.4879 20.7998 15.7V25.3001C20.7998 25.5122 20.8841 25.7157 21.0341 25.8657C21.1841 26.0158 21.3876 26.1 21.5998 26.1H24.7998C25.012 26.1 25.2155 26.0158 25.3655 25.8657C25.5155 25.7157 25.5998 25.5122 25.5998 25.3001V15.7C25.5998 15.4879 25.5155 15.2844 25.3655 15.1344C25.2155 14.9843 25.012 14.9 24.7998 14.9H21.5998ZM8.9998 16.5C9.26502 16.5 9.51938 16.6054 9.70691 16.7929C9.89445 16.9805 9.9998 17.2348 9.9998 17.5C9.9998 17.7653 9.89445 18.0196 9.70691 18.2072C9.51938 18.3947 9.26502 18.5 8.9998 18.5C8.73459 18.5 8.48023 18.3947 8.2927 18.2072C8.10516 18.0196 7.9998 17.7653 7.9998 17.5C7.9998 17.2348 8.10516 16.9805 8.2927 16.7929C8.48023 16.6054 8.73459 16.5 8.9998 16.5ZM8.9998 20.1C9.26502 20.1 9.51938 20.2054 9.70691 20.3929C9.89445 20.5805 9.9998 20.8348 9.9998 21.1C9.9998 21.3653 9.89445 21.6196 9.70691 21.8072C9.51938 21.9947 9.26502 22.1 8.9998 22.1C8.73459 22.1 8.48023 21.9947 8.2927 21.8072C8.10516 21.6196 7.9998 21.3653 7.9998 21.1C7.9998 20.8348 8.10516 20.5805 8.2927 20.3929C8.48023 20.2054 8.73459 20.1 8.9998 20.1ZM13.5998 21.3001C13.5998 21.0348 13.4944 20.7805 13.3069 20.5929C13.1194 20.4054 12.865 20.3 12.5998 20.3C12.3346 20.3 12.0802 20.4054 11.8927 20.5929C11.7052 20.7805 11.5998 21.0348 11.5998 21.3001C11.5998 21.5653 11.7052 21.8196 11.8927 22.0072C12.0802 22.1947 12.3346 22.3001 12.5998 22.3001C12.865 22.3001 13.1194 22.1947 13.3069 22.0072C13.4944 21.8196 13.5998 21.5653 13.5998 21.3001ZM12.5998 16.5C12.865 16.5 13.1194 16.6054 13.3069 16.7929C13.4944 16.9805 13.5998 17.2348 13.5998 17.5C13.5998 17.7653 13.4944 18.0196 13.3069 18.2072C13.1194 18.3947 12.865 18.5 12.5998 18.5C12.3346 18.5 12.0802 18.3947 11.8927 18.2072C11.7052 18.0196 11.5998 17.7653 11.5998 17.5C11.5998 17.2348 11.7052 16.9805 11.8927 16.7929C12.0802 16.6054 12.3346 16.5 12.5998 16.5Z",fill:"#3E4855"})))}var Tt,Ft,Lt=s.forwardRef(Mt),qt=(a.p,a(341)),Yt=a(394),Rt=a.n(Yt),Et=a(689),Ht=a(240),Bt=["title","titleId"];function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},zt.apply(this,arguments)}function Ut(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Vt(e,t){var a=e.title,n=e.titleId,r=Ut(e,Bt);return s.createElement("svg",zt({width:8,height:5,viewBox:"0 0 8 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Tt||(Tt=s.createElement("g",{clipPath:"url(#clip0_2003_9053)"},s.createElement("path",{d:"M7.99919 0.59443C8.00179 0.480174 7.96752 0.367974 7.90109 0.273428C7.83467 0.178882 7.73936 0.106688 7.62852 0.0668846C7.51768 0.027081 7.39678 0.0216448 7.28259 0.0513318C7.1684 0.0810187 7.06667 0.144354 6.99145 0.232531L4.00923 3.59701L1.02806 0.232531C0.981678 0.171534 0.922789 0.120451 0.855031 0.0824798C0.787273 0.0445089 0.712113 0.0204687 0.634296 0.0118642C0.55648 0.00325982 0.477681 0.0102768 0.402801 0.0324757C0.32792 0.0546745 0.258566 0.0915769 0.199126 0.140872C0.139685 0.190167 0.0914688 0.250794 0.0573935 0.318954C0.0233188 0.387114 0.00417993 0.46134 0.00116012 0.536983C-0.00185969 0.612627 0.0112686 0.688057 0.0398082 0.758553C0.0683484 0.829048 0.11164 0.893088 0.166974 0.946664L3.57701 4.79868C3.63042 4.85917 3.69672 4.90775 3.77144 4.94106C3.84615 4.97437 3.92747 4.99161 4.00976 4.99161C4.09204 4.99161 4.17336 4.97437 4.24808 4.94106C4.32279 4.90775 4.38915 4.85917 4.44256 4.79868L7.85588 0.946664C7.94531 0.849356 7.99615 0.724545 7.99932 0.59443L7.99919 0.59443Z",fill:"#2D85C9"}))),Ft||(Ft=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_2003_9053"},s.createElement("rect",{width:5,height:8,fill:"white",transform:"translate(8) rotate(90)"})))))}var Wt=s.forwardRef(Vt),Kt=(a.p,a(211)),Gt=a.n(Kt),Zt=function(e){var t=e.split(" ")[0],a=e.split(" ")[1],n=t.replaceAll(":","/"),s=a.split(":").slice(0,-1),r=Je({hours:s[0],minutes:s[1],getHours:function(){return this.hours},getMinutes:function(){return this.minutes}});return"".concat(n," ").concat(r)},Jt=function(e){var t,a=Object(s.useContext)(k),n=a.selectedRow,r=a.setFaxLogs,i=Object(s.useState)(!1),c=Object(u.a)(i,2),o=c[0],l=c[1],d=Object(s.useState)(!1),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(2),f=Object(u.a)(p,2),h=f[0],v=f[1],O=Object(s.useState)(1),x=Object(u.a)(O,2),_=x[0],g=x[1],N=Object(s.useRef)(),C=Object(s.useState)(!0),w=Object(u.a)(C,2),D=w[0],S=w[1];return Object(s.useEffect)((function(){var t;g(null===(t=e.logs.meta)||void 0===t?void 0:t.last_page)}),[e.logs]),Object(s.useEffect)((function(){var e=N.current;return function(){e.scrollTop=0,v(2),j(!1),S(!0)}}),[n]),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"".concat(Gt.a.logs," pb-0 p-3 pt-4 border-top"),children:[Object(y.jsx)("div",{role:"button",onClick:function(){return function(e,t,a,n,s,r,i){!a&&r?(s(!0),K(e.id).then((function(e){t(e),n((function(e){return!e}))})).finally((function(){s(!1),i(!1)}))):n((function(e){return!e}))}(n,r,b,j,l,D,S)},"aria-controls":"collapse-text","aria-expanded":b,className:"mb-4 text-primary",children:Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("span",{className:"d-flex align-items-center",style:{marginRight:"5px"},children:b?"Hide logs":"Show logs"}),o?Object(y.jsx)(Et.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):Object(y.jsx)(Wt,{style:{transform:b?"rotate(180deg)":"none"}})]})}),Object(y.jsx)(Ht.a,{in:b,className:Gt.a.collapse,children:Object(y.jsx)("div",{ref:N,onScroll:function(e){!function(e,t,a,n,s,r){e.scrollHeight-e.scrollTop===e.clientHeight&&a<=r&&Object(J.b)(1e3,!1,(function(){K(t,a).then((function(e){n((function(e){return e+1})),s((function(t){return Object(ct.a)(Object(ct.a)({},t),{},{data:[].concat(Object(it.a)(t.data),Object(it.a)(e.data))})}))}))}))()}(e.target,n.id,h,v,r,_)},children:Object(y.jsx)("div",{id:"collapse-text",children:null===(t=e.logs.data)||void 0===t?void 0:t.map((function(e){return Object(y.jsxs)("div",{className:Gt.a.singleLog,children:[Object(y.jsx)("p",{children:Zt(e.created_at)}),Object(y.jsx)("p",{children:e.user}),Object(y.jsxs)("p",{className:Gt.a.test,children:["".concat(e.subject).concat(e.patient_id?" ":""),e.patient_id&&Object(y.jsx)("a",{href:"/chart/".concat(e.patient_id),className:"".concat(Ie(e.patient_status)," text-decoration-none d-inline-block"),children:e.patient})]})]},e.id)}))})})})]})})},Xt=a(289),Qt=a.n(Xt),$t=function(e){var t=e.total,a=e.current,n=e.scale,s=e.setScale;return Object(y.jsxs)("div",{className:Qt.a.box,children:[Object(y.jsxs)("div",{className:Qt.a.counter,children:[Object(y.jsx)("span",{className:"me-1 pt-1 pb-1 pe-2 ps-2 bg-dark-gray",children:a}),"/",Object(y.jsx)("span",{className:"ms-1",children:t})]}),Object(y.jsxs)("div",{className:Qt.a.zoom,children:[Object(y.jsx)("button",{className:"button",onClick:function(){return s((function(e){return e+.1}))},children:"+"}),Object(y.jsx)("div",{className:"pt-1 pb-1 pe-2 ps-2 bg-dark-gray",children:Math.round(100*n)+"%"}),Object(y.jsx)("button",{type:"button",onClick:function(){return s((function(e){return e-.1}))},children:"\u2212"})]})]})},ea=a(332),ta=a.n(ea),aa=function(e){var t=e.message;return Object(y.jsxs)("div",{className:"h-100 d-flex flex-column align-items-center justify-content-center",children:[Object(y.jsx)(Lt,{className:"mb-4"}),Object(y.jsx)("div",{children:t})]})},na=function(){var e,t=Object(s.useContext)(k),a=t.selectedRow,n=t.faxLogs,r=t.pdfFile,i=Object(s.useState)(1),c=Object(u.a)(i,2),o=c[0],l=c[1],d=Object(s.useState)(0),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(.8),f=Object(u.a)(p,2),h=f[0],v=f[1],O=Object(s.useRef)(),x=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{direction:"both"}).direction,a={scrollTop:0,scrollLeft:0,mouseX:0,mouseY:0},n=function(n){if(e.current){var s=n.clientX-a.mouseX,r=n.clientY-a.mouseY;"horizontal"!==t&&(e.current.scrollTop=a.scrollTop-r),"vertical"!==t&&(e.current.scrollLeft=a.scrollLeft-s)}},s=function t(){e.current&&(e.current.style.cursor="grab"),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t)};return{onMouseDown:function(t){e.current&&(a={scrollLeft:e.current.scrollLeft,scrollTop:e.current.scrollTop,mouseX:t.clientX,mouseY:t.clientY},e.current.style.cursor="grabbing",e.current.style.userSelect="none",document.addEventListener("mousemove",n),document.addEventListener("mouseup",s))}}}(O),_=x.onMouseDown;return Object(y.jsx)("div",{style:{position:"relative",minHeight:"721px",height:"100%",paddingTop:"42px",paddingBottom:"68px"},children:a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)($t,{total:b,current:o,scale:h,setScale:v}),Object(y.jsx)("div",{className:"w-100 h-100 p-2",children:r&&Object(y.jsx)("div",{className:ta.a.scroll,ref:O,onMouseDown:_,children:Object(y.jsx)(qt.a,{file:r,noData:Object(y.jsx)("div",{children:"test"}),options:{workerSrc:Rt.a},onLoadSuccess:function(e){var t=e.numPages;return j(t)},children:(e=b,Array.from(Array(e).keys()).map((function(e){return e+1}))).map((function(e,t){return Object(y.jsx)(Pt.a,{onEnter:function(){return l(e)},bottomOffset:"50%",children:Object(y.jsx)("div",{children:Object(y.jsx)(qt.b,{className:ta.a.canvas,pageNumber:e,scale:h,renderTextLayer:!1,renderAnnotationLayer:!1})})},t)}))})})}),Object(y.jsx)(Jt,{logs:n})]}):Object(y.jsx)(aa,{message:"Choose FAX from list to see details"})})},sa=function(e,t){return t<6?(a=t,[1,2,3,4,5].filter((function(e){return e<=a}))):e%6>=0&&e>4&&e+2<t?[e-3,e-2,e-1,e,e+1,"...",t]:e%6>=0&&e>4&&e+2>=t?[t-4,t-3,t-2,t-1,t]:[1,2,3,4,5,"...",t];var a},ra=function(e){var t=e.params,a=e.currentPage,n=e.setCurrentPage,r=e.loading,i=Object(s.useState)([]),c=Object(u.a)(i,2),o=c[0],l=c[1];return Object(s.useEffect)((function(){l(sa(a,t.last_page))}),[t,a]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("ul",{className:"pagination m-0 ".concat(r?"pe-none opacity-50":"opacity-100"),children:[Object(y.jsx)("li",{className:1===a?"page-item disabled":"page-item",children:Object(y.jsx)("span",{role:"button",className:"page-link",onClick:function(){n(a-1)},children:"Previous"})}),o.map((function(e,t){return"..."!==e?Object(y.jsx)("li",{className:e===a?"page-item active pe-none":"page-item",onClick:function(){n(e)},children:Object(y.jsx)("span",{role:"button",className:"page-link",children:e})},e):Object(y.jsx)("li",{className:"pe-none",children:Object(y.jsx)("span",{role:"button",className:"page-link",children:e})},e)})),Object(y.jsx)("li",{className:a===t.last_page?"page-item disabled":"page-item",children:Object(y.jsx)("span",{role:"button",className:"page-link",onClick:function(){n(a+1)},children:"Next"})})]})})},ia={current_page:1,last_page:1,per_page:15},ca=a(395),oa=a.n(ca),la=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(ia),i=Object(u.a)(r,2),c=i[0],o=i[1],l=Object(s.useState)("all"),d=Object(u.a)(l,2),j=d[0],p=d[1],f=Object(s.useState)(null),h=Object(u.a)(f,2),v=h[0],O=h[1],x=Object(s.useState)(1),_=Object(u.a)(x,2),g=_[0],N=_[1],C=Object(s.useState)(null),w=Object(u.a)(C,2),D=w[0],S=w[1],I=Object(s.useState)(null),A=Object(u.a)(I,2),M=A[0],L=A[1],q=Object(s.useState)(null),Y=Object(u.a)(q,2),R=Y[0],E=Y[1],H=Object(s.useState)([]),B=Object(u.a)(H,2),z=B[0],U=B[1],V=Object(s.useState)(!0),W=Object(u.a)(V,2),K=W[0],G=W[1],Z=Object(s.useState)(!1),J=Object(u.a)(Z,2),X=J[0],Q=J[1],$=Object(s.useState)([]),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=Object(s.useState)(!1),se=Object(u.a)(ne,2),re=se[0],ie=se[1],ce=Object(s.useState)(""),oe=Object(u.a)(ce,2),le=oe[0],de=oe[1],ue=function(e){var t;e&&200===e.status&&null!==(t=e.data.faxes)&&void 0!==t&&t.length?(n(e.data.faxes),o(e.data.meta),E(e.data.faxes.find((function(e){return e.id===(null===R||void 0===R?void 0:R.id)})))):(n([]),o(ia))};return Object(s.useEffect)((function(){ie(!0),T(j,g).then((function(e){200===e.status&&ue(e),401===e.status&&(document.location.href="/login")})).finally((function(){ie(!1)}))}),[g,j]),Object(s.useEffect)((function(){F().then((function(e){200===e.status&&e.data&&e.data.meta?L(e.data.meta.total):L(0)}))}),[a,g,j]),Object(y.jsx)(k.Provider,{value:{tableParams:c,tableData:a,setTableData:n,setTableParams:o,activeTab:j,setActiveTab:p,previousTab:v,setPreviousTab:O,searchParams:D,setSearchParams:S,currentPage:g,setCurrentPage:N,searchBarState:K,setSearchBarState:G,buttonBackState:X,setButtonBackState:Q,selectedRow:R,setSelectedRow:E,markedRows:z,setMarkedRows:U,unreadCount:M,faxLogs:te,setFaxLogs:ae,loading:re,setLoading:ie,setUnreadCount:L,updateData:ue,pdfFile:le,setPdfFile:de},children:Object(y.jsx)(P,{children:Object(y.jsxs)(m.a,{className:oa.a.container,fluid:!0,children:[Object(y.jsx)("div",{className:"d-flex justify-content-between bg-white border border-1 rounded rounded-3 p-1 mb-4",children:Object(y.jsx)(Ze,{})}),Object(y.jsxs)("div",{className:"d-flex gap-4 w-100",children:[Object(y.jsxs)(b.a,{className:"d-flex flex-column bg-white border rounded-5 p-3",children:[Object(y.jsx)("div",{className:"h-100",children:Object(y.jsx)(St,{})}),Object(y.jsx)("div",{className:c.last_page>1?"ms-auto mt-4":"ms-auto mt-4 opacity-50",children:Object(y.jsx)(ra,{params:c,currentPage:g,setCurrentPage:N,activeTab:j,loading:re})})]}),Object(y.jsx)(b.a,{className:"bg-white border rounded-5 overflow-hidden",children:Object(y.jsx)(na,{})})]})]})})})},da=a(151),ua=a.n(da),ma=function(e){return h.a.get("/provider/messages?page=".concat(e))},ba=function(e){return h.a.post("/provider/messages/set-read",e)},ja=function(){var e=r.a.useState(1),t=Object(u.a)(e,2),a=t[0],n=t[1],s=r.a.useState([]),i=Object(u.a)(s,2),c=i[0],o=i[1],l=r.a.useState(),d=Object(u.a)(l,2),m=d[0],b=d[1],j=r.a.useState(!1),p=Object(u.a)(j,2),f=p[0],h=p[1],v=r.a.useState(null),O=Object(u.a)(v,2),x=O[0],_=O[1],N=r.a.useRef(null),C=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){var a;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ma(t);case 3:a=e.sent,o((function(e){return[].concat(Object(it.a)(e),Object(it.a)(a.data.data))})),a.data.meta.pagination&&b(a.data.meta.pagination),c.concat(a.data.data).length>=a.data.meta.pagination.total&&h(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(1),h(!1),e.next=5,ma(1);case 5:t=e.sent,o(t.data.data),t.data.meta.pagination&&b(t.data.meta.pagination),t.data.data.length>=t.data.meta.pagination.total?h(!0):S(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a,n){var s;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!x){e.next=3;break}return e.abrupt("return");case 3:return _(n),e.prev=4,s={mention_id:a.id},e.next=8,ba(s);case 8:return e.next=10,w();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:return e.prev=15,_(null),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])})));return function(t,a,n){return e.apply(this,arguments)}}(),S=function(){var e=new IntersectionObserver((function(e){Object(u.a)(e,1)[0].isIntersecting&&c.length&&n((function(e){var t=e+1;return C(t),t}))}),{root:null,threshold:.5});N.current&&e.observe(N.current)};return r.a.useEffect((function(){C(a)}),[]),r.a.useEffect((function(){S()}),[c]),Object(y.jsxs)("div",{className:g()(ua.a.messagesCard,"sidebar-section-container"),children:[Object(y.jsxs)("div",{className:g()(ua.a.title,"p-2 h6 m-0 fw-bolder"),children:[Object(y.jsx)("span",{children:"Messages "}),Object(y.jsx)("span",{children:m?"(".concat(m.total,")"):"(0)"})]}),Object(y.jsxs)("div",{className:"h-100",children:[Object(y.jsxs)("table",{className:"table m-0",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Patient Name"}),Object(y.jsx)("th",{className:"text-right",style:{whiteSpace:"nowrap"},children:"Message from"}),Object(y.jsx)("th",{})]})}),Object(y.jsx)("tbody",{children:c.map((function(e,t){var a,n=e.comment.patient?"#".concat(e.comment.patient.status.status_color):"#000000",s=e.comment.patient||e.comment.patient_lead;return Object(y.jsxs)("tr",{onClick:function(){return function(e){var t="/chart/".concat(e.comment.patient_id,"?scrollto=").concat(e.model+e.comment_id);"PatientLeadComment"===e.model&&(t="/new-patients-dashboard?selectedCard=".concat(e.comment.patient_lead.inquiry.id,"&comment=").concat(e.comment.id)),document.location.href=t}(e)},children:[Object(y.jsx)("td",{children:Object(y.jsx)("div",{className:ua.a.text,style:{color:n},children:(a=s,a.first_name+" "+a.last_name+" "+a.middle_initial)})}),Object(y.jsx)("td",{children:Object(y.jsx)("div",{className:ua.a.text,children:e.comment.provider?e.comment.provider.provider_name:e.comment.provider_name})}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:ua.a.text,onClick:function(a){return D(a,e,t)},children:[x===t&&Object(y.jsx)("div",{ref:N,className:"position-absolute spinner-border spinner-border-sm text-primary",role:"status",style:{right:"30px"},children:Object(y.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),x!==t&&Object(y.jsx)(mt.a,{path:dt.d,style:{display:"block"},size:1,color:"red"})]})})]},t)}))})]}),!f&&Object(y.jsx)("div",{className:g()(ua.a.loader,"p-1 d-flex align-items-center justify-content-center",0===c.length&&!f&&"h-100"),children:Object(y.jsx)("div",{ref:N,className:"spinner-border text-primary",role:"status",children:Object(y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]})]})},pa=a(396),fa=a.n(pa),ha=a(333),va=a.n(ha),Oa=a(76),xa=a(702),_a=a(691),ga=a(19),ya=a.n(ga),Na="-08:00"===Object({NODE_ENV:"production",PUBLIC_URL:"/react-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TIMEZONE?"America/Los_Angeles":"UTC";ya.a.tz.setDefault(Na);var Ca,wa,Da=ya.a,Sa=a(397),Pa=a.n(Sa),ka=function(){return Object(y.jsx)("div",{className:Pa.a.helpIcon,children:Object(y.jsx)(mt.a,{path:dt.h,size:.6})})},Ia="email",Aa=function(e){switch(e){case 1:return Ia;case 2:return"fax";case 3:return"phone";default:return null}},Ma=function(e,t){if(!t)return e;if(!e)return t;var a=ya()(e.created_at),n=ya()(t.created_at);return a.isBefore(n)?t:e},Ta=function(e){return e.stage_change_history.map((function(e){return{id:e.id,user_name:e.user.meta.firstname+" "+e.user.meta.lastname,old_stage:e.old_stage.name,new_stage:e.new_stage.name,comment:e.comment,created_at:ya()(e.created_at).format("MM/DD/YYYY")}}))},Fa=a(86),La=a.n(Fa),qa=a(398),Ya=a.n(qa),Ra=function(e){var t=e.patientStatusDate,a={__html:"<div>\n                Date: ".concat(t," \n            </div>")};return Object(y.jsx)("div",{className:"d-flex align-items-center gap-1",children:Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{dangerouslySetInnerHTML:a})}),children:Object(y.jsx)("div",{className:Ya.a.helpIcon,children:Object(y.jsx)(mt.a,{path:dt.h,size:.6})})})})},Ea=function(e){var t=e.title,a=e.className,n=e.background,s=void 0===n?"":n,r=e.textColor,i=void 0===r?"":r,c=e.statusUpdatedAt,o=g()("badge",La.a.badge,La.a[a]);return Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(y.jsx)("div",{className:o,style:{background:s,color:i,marginRight:"10px"},children:t}),null!==c&&void 0!==c&&Object(y.jsx)(Ra,{patientStatusDate:c})]})},Ha=function(e){var t=e.row,a=e.value,n=t.original.patient_id;return Object(y.jsx)("a",{className:"text-decoration-none",href:"/chart/".concat(n),children:a})},Ba=function(e){var t=e.value;if(!t)return"-";var a=Da().subtract(1,"day").format("MM/DD/YYYY"),n=Da().format("MM/DD/YYYY"),s=Da().add(1,"day").format("MM/DD/YYYY");return t===a?"Yesterday":t===n?"Today":t===s?"Tomorow":t},za=function(e){var t=e.value,a="red",n="No";if(t){var s=Da(),r=Da().set({date:1,month:t.exp_month-1,year:t.exp_year}),i=r.format("MM/YY");r.clone().add(1,"month").isSameOrBefore(s)?(a="red",n="Yes, expired ".concat(i)):r.isSameOrBefore(s)?(a="yellow",n="Yes, expires ".concat(i)):(a="green",n="Yes")}return Object(y.jsx)(Ea,{title:n,className:a})},Ua=function(e,t,a){var n=e.values[a].toLowerCase(),s=t.values[a].toLowerCase();return n<s?-1:n>s?1:0},Va=function(e,t,a){var n=new Date("2000-01-01 ".concat(e.original[a])),s=new Date("2000-01-01 ".concat(t.original[a]));return n<s?-1:n>s?1:0},Wa=function(e,t,a){var n=e.original[a],s=t.original[a];return"-"===n&&"-"===s?0:"-"===n?-1:"-"===s?1:new Date(n)-new Date(s)},Ka=function(e,t,a){var n=e.values[a].status,s=t.values[a].status;return n.localeCompare(s)},Ga=function(e){var t=e.formStatus;if(!t)return Object(y.jsx)("div",{className:g()("badge",La.a.badge,La.a.red),children:"Not sent"});var a=Da(t.created_at,"YYYY-MM-DD hh:mm:ss").format("MM/DD/YYYY");if(t.sent_to_phone)return t.sent_to_phone_error?Object(y.jsx)("div",{className:g()("badge",La.a.badge,La.a.red),children:a}):Object(y.jsx)("div",{className:g()("badge",La.a.badge,La.a.green),children:a});var n=["deferral_at","hard_bounced_at","soft_bounced_at","bounced_at","spam_at","unsub_at","rejected_at"];if(function(){for(var e=0;e<n.length;e++)if(t[n[e]])return!0;return!1}()){var s=[];return n.forEach((function(e){t[e]&&s.push(function(e){return"deferral_at"===e?"Deferral":"hard_bounced_at"===e?"Hard bounced":"soft_bounced_at"===e?"Soft bounced":"bounced_at"===e?"Bounced":"spam_at"===e?"Spam":"unsub_at"===e?"Unsubscribed":"rejected_at"===e?"Rejected":void 0}(e))})),Object(y.jsx)("div",{children:Object(y.jsx)(xa.a,{placement:"top",overlay:Object(y.jsx)(_a.a,{children:s.join(", ")}),children:Object(y.jsx)("div",{className:g()("badge",La.a.badge,La.a.red),children:a})})})}return Object(y.jsx)("div",{className:g()("badge",La.a.badge,La.a.green),children:a})},Za=a(399),Ja=a.n(Za),Xa=a.p+"static/media/telephone-fill.8ab62727.svg",Qa=function(){return h.a.get("/api/ringcentral/account-numbers")},$a=function(e){return h.a.post("/api/ringcentral/patients/ring-out",e)},en=function(e){return h.a.post("/api/ringcentral/patients/log-external-ring-out",e)},tn=function(e,t){return h.a.put("/api/ringcentral/ring-out/".concat(e),t)},an=Object(Oa.b)({name:"app",initialState:{ringCentralNumbers:[],callLog:{},user:null,userData:{isOnlyAdmin:!1,isLoadedIsOnlyAdmin:!1},queryParams:{}},reducers:{setRingCentralNumbersAC:function(e,t){e.ringCentralNumbers=t.payload.numbers},setCallLogAC:function(e,t){e.callLog=t.payload.callLog},setUserAC:function(e,t){e.user=t.payload.user},setQueryParamsAC:function(e,t){e.queryParams=t.payload.data},setUserDataIsOnlyAdminAC:function(e,t){e.userData.isOnlyAdmin=t.payload.value},setUserDataIsLoadedIsOnlyAdminAC:function(e,t){e.userData.isLoadedIsOnlyAdmin=t.payload.value}}}),nn=an.reducer,sn=an.actions,rn=sn.setRingCentralNumbersAC,cn=sn.setCallLogAC,on=sn.setUserAC,ln=sn.setQueryParamsAC,dn=sn.setUserDataIsOnlyAdminAC,un=sn.setUserDataIsLoadedIsOnlyAdminAC,mn=a(700),bn=a(711),jn=function(e){if(!e)return e;var t=Object(mn.a)(e,"US",{v2:!0});return t.length>0&&"US"==t[0].number.country?Object(bn.a)(t[0].number.nationalNumber,"US").formatNational():e},pn=a(271),fn=a.n(pn),hn=function(e){var t=e.phone,a=e.setPhone,n=e.placeholder,s=void 0===n?"":n,r=e.disabled,i=void 0!==r&&r,c=e.className,o=void 0===c?"":c,l=e.error,d=void 0!==l&&l,u=e.alwaysShowMask,m=void 0!==u&&u;return Object(y.jsx)(fn.a,{mask:"(999)-999-9999",alwaysShowMask:m,className:g()("form-control",d&&"is-invalid",o),value:t,disabled:i,onChange:function(e){return a(e.target.value)},placeholder:s})},vn="Inbox",On="In progress",xn="Appointment scheduled",_n="Onboarding complete",gn="Initial appointment complete",yn="Initial survey complete",Nn="4 Appointments Complete",Cn="On hold",wn="Archived",Dn=1,Sn=7,Pn="#FEE4E2",kn="rgb(254, 241, 226)",In={phoneFrom:"",customFrom:"",phoneTo:"",playPrompt:!0},An=function(e){var t=e.patientId,a=e.patientType,n=e.showModal,s=e.closeModal,i=e.openCallResultModal,c=Object(l.b)(),o=Object(l.c)((function(e){return e.app})).ringCentralNumbers,d=Object(l.c)((function(e){return e.newPatientsDashboard})),m=d.lanes,b=d.callModalData,j=r.a.useState(null),p=Object(u.a)(j,2),f=p[0],v=p[1],O=r.a.useState(In),x=Object(u.a)(O,2),_=x[0],g=x[1],N=r.a.useState({}),C=Object(u.a)(N,2),w=C[0],D=C[1],S=r.a.useState(!1),P=Object(u.a)(S,2),k=P[0],I=P[1],T=function(){var e=null;return b?(m.forEach((function(t){t.cards.forEach((function(t){var a="patient"===b.patientType;t.inquirable.id===b.patientId&&t.isPatientCreated===a&&(e=t)}))})),e):null};r.a.useEffect((function(){n?function(e,t){return h.a.get("api/ringcentral/patients/".concat(e,"/call-details?patient_type=").concat(t))}(t,a).then((function(e){var t=e.data;v(t)})).catch((function(e){v(null),console.log(e)})):(v(null),g(In),D({}),I(!1))}),[n]),r.a.useEffect((function(){var e=function(){if(!f)return"";var e=T();return e&&3===e.stageId&&f.onboarding_phone?f.onboarding_phone:f.cell_phone||f.home_phone||f.work_phone}();g(Object(ct.a)(Object(ct.a)({},_),{},{phoneTo:e.replace(/\D+/g,"")}))}),[f]),r.a.useEffect((function(){_.phoneFrom&&D((function(e){var t=Object(ct.a)({},e);return delete t.phoneFrom,t})),_.customFrom&&D((function(e){var t=Object(ct.a)({},e);return delete t.customFrom,t})),_.phoneTo&&D((function(e){var t=Object(ct.a)({},e);return delete t.phoneTo,t}))}),[_]);var F=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var n,r,o,l,d,u;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I(!0),n=T(),r=!!n&&(6===n.stageId||8===n.stageId),o={},l={patient_id:t,patient_type:a,phone_from:_.phoneFrom,phone_to:_.phoneTo,play_prompt:_.playPrompt,only_for_admin:r},"custom_number"===_.phoneFrom?_.customFrom?l.phone_from=_.customFrom:o=Object(ct.a)(Object(ct.a)({},o),{},{customFrom:"Custom number is required"}):_.phoneFrom||(o=Object(ct.a)(Object(ct.a)({},o),{},{phoneFrom:"Phone from field is required"})),_.phoneTo||(o=Object(ct.a)(Object(ct.a)({},o),{},{phoneTo:"Phone to field is required"})),!(Object.keys(o).length>0)){e.next=12;break}return D(o),I(!1),e.abrupt("return");case 12:return e.next=14,$a(l);case 14:if(d=e.sent,u=Object(ct.a)(Object(ct.a)({},d.data.call_log),{},{phone_to:_.phoneTo})){e.next=18;break}return e.abrupt("return");case 18:c(cn({callLog:u})),s(),setTimeout((function(){i()}),500),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var n,r,o,l,d,u;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I(!0),n=T(),r=!!n&&(6===n.stageId||8===n.stageId),o={},l={patient_id:t,patient_type:a,phone_from:_.phoneFrom,phone_to:_.phoneTo,play_prompt:_.playPrompt,only_for_admin:r},"custom_number"===_.phoneFrom?_.customFrom?l.phone_from=_.customFrom:o=Object(ct.a)(Object(ct.a)({},o),{},{customFrom:"Custom number is required"}):_.phoneFrom||(o=Object(ct.a)(Object(ct.a)({},o),{},{phoneFrom:"Phone from field is required"})),_.phoneTo||(o=Object(ct.a)(Object(ct.a)({},o),{},{phoneTo:"Phone from field is required"})),!(Object.keys(o).length>0)){e.next=12;break}return D(o),I(!1),e.abrupt("return");case 12:return q(jn(_.phoneTo)),e.next=15,en(l);case 15:if(d=e.sent,u=Object(ct.a)(Object(ct.a)({},d.data.call_log),{},{phone_to:_.phoneTo})){e.next=19;break}return e.abrupt("return");case 19:c(cn({callLog:u})),s(),setTimeout((function(){i()}),500),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}(),q=function(e){var t=document.createElement("a");t.style.display="none",t.href="tel:".concat(e),document.body.appendChild(t),t.click(),t.remove()};return Object(y.jsxs)(re.a,{show:n,size:"lg",className:"custom-modal",backdrop:"true",onHide:s,centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:f?Object(y.jsxs)("h4",{className:"modal-title m-0",children:["Call Patient - ",f.first_name," ",f.last_name]}):Object(y.jsx)("h4",{className:"modal-title m-0",children:"Call Patient"})}),Object(y.jsx)(re.a.Body,{children:f?Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"d-flex flex-column gap-1",children:Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("div",{className:"col-12",children:Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"flex-grow-1",style:{marginRight:"12px"},children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"flex-grow-1",style:{marginRight:"12px"},children:[Object(y.jsxs)("div",{className:"form-group custom-form-group mb-3",children:[Object(y.jsx)("label",{children:"From:"}),Object(y.jsxs)("select",{id:"caller_number",name:"From Number",defaultValue:_.phoneFrom,className:"form-select ".concat(w.phoneFrom?"is-invalid":""),onChange:function(e){return g(Object(ct.a)(Object(ct.a)({},_),{},{phoneFrom:e.target.value}))},children:[Object(y.jsx)("option",{value:"",disabled:!0,children:"Select number"}),o.map((function(e,t){return Object(y.jsxs)("option",{value:e.phoneNumber,children:[" ",jn(e.phoneNumber)," "]},t)})),Object(y.jsx)("option",{value:"custom_number",children:"Custom number"})]}),Object(y.jsx)("div",{className:"invalid-feedback",children:w.phoneFrom})]}),"custom_number"===_.phoneFrom&&Object(y.jsxs)("div",{className:"form-group custom-form-group mb-3",children:[Object(y.jsx)(hn,{phone:_.customFrom,setPhone:function(e){return g(Object(ct.a)(Object(ct.a)({},_),{},{customFrom:e.replace(/\D+/g,"")}))},error:!!w.customFrom,alwaysShowMask:!0}),Object(y.jsx)("div",{className:"invalid-feedback",children:w.customFrom})]})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group flex-grow-1",children:[Object(y.jsx)("label",{children:"To:"}),Object(y.jsx)(hn,{phone:_.phoneTo,setPhone:function(e){return g(Object(ct.a)(Object(ct.a)({},_),{},{phoneTo:e.replace(/\D+/g,"")}))},error:!!w.phoneTo,alwaysShowMask:!0}),Object(y.jsx)("div",{className:"invalid-feedback",children:w.phoneTo})]})]}),Object(y.jsx)("div",{className:"form-group custom-form-group",children:Object(y.jsx)("div",{className:"checkbox prompt-checkbox",children:Object(y.jsxs)("label",{htmlFor:"prompt_call",className:"d-flex gap-2",style:{width:"fit-content"},children:[Object(y.jsx)("input",{type:"checkbox",id:"prompt_call",defaultChecked:_.playPrompt,onChange:function(e){return g(Object(ct.a)(Object(ct.a)({},_),{},{playPrompt:e.target.checked}))}}),Object(y.jsx)("span",{children:"Prompt me to press 1 before connecting the call"})]})})})]}),Object(y.jsxs)("div",{className:"d-flex",style:{paddingTop:"24px"},children:[Object(y.jsx)("button",{disabled:k,className:"btn btn-primary btn-large text-white",style:{marginRight:"12px"},onClick:F,children:"Call via EHR"}),Object(y.jsx)("button",{disabled:k,className:"btn btn-primary btn-large text-white",onClick:L,children:"Call via RC App"})]})]})})})}),Object(y.jsx)("hr",{}),Object(y.jsx)("h5",{children:"Call Logs"}),Object(y.jsxs)("table",{className:"table table-striped table-call-log m-0",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Date"}),Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("th",{children:"Called by"}),Object(y.jsx)("th",{className:"col-xs-6",children:"Comment"})]})}),Object(y.jsx)("tbody",{children:f.ringcentral_call_logs.length>0?f.ringcentral_call_logs.map((function(e,t){var a,n,s;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:(s=e.created_at,Da(s).format("MM/DD/YYYY hh:mm A"))}),Object(y.jsx)("td",{children:e.call_status_title}),Object(y.jsx)("td",{children:Object(y.jsxs)("p",{children:[null===(a=e.user)||void 0===a?void 0:a.meta.firstname," ",null===(n=e.user)||void 0===n?void 0:n.meta.lastname]})}),Object(y.jsx)("td",{children:e.comment})]},t)})):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"4",className:"text-center p-4 h6",children:"No data"})})})]})]}):Object(y.jsx)("div",{className:"p-1 d-flex align-items-center justify-content-center",style:{height:"230px"},children:Object(y.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}),Object(y.jsx)(re.a.Footer,{children:Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:s,children:"Cancel"})})]})},Mn=Object(s.createContext)(),Tn=Mn,Fn={comment:""},Ln=function(){var e=Object(s.useContext)(Tn),t=e.errors,a=e.setErrors,n=e.clearError,r=e.showModal,i=e.closeModal,c=e.isSaving,o=e.handleSubmit,l=Object(s.useState)(Fn),d=Object(u.a)(l,2),m=d[0],b=d[1],j=function(){var e={};return m.comment||(e.comment="Field is required."),a(e),0===Object.keys(e).length},p=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,o(m);case 5:f(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),f=function(){i(),h()},h=function(){b(Fn),a({})};return Object(y.jsxs)(re.a,{show:r,className:"custom-modal",backdrop:"true",onHide:f,centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("h4",{className:"m-0",children:"Call Comment"})}),Object(y.jsx)(re.a.Body,{children:Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("textarea",{name:"comment",id:"comment",className:"form-control ".concat(t.comment?"is-invalid":""),rows:"4",placeholder:"Add your comment...",value:m.comment,onChange:function(e){var t=e.target.value;t&&n(["comment"]),b(Object(ct.a)(Object(ct.a)({},m),{},{comment:t}))}}),Object(y.jsx)("div",{className:"invalid-feedback",children:t.comment})]})}),Object(y.jsx)(re.a.Footer,{children:c?Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"}):Object(y.jsx)("button",{className:"btn btn-primary btn-large text-white",onClick:p,children:"Save"})})]})},qn=a(152),Yn=a.n(qn),Rn=function(e){return h.a.get("api/new-patients-crm/inquiries",{params:e})},En=function(e){return h.a.get("api/new-patients-crm/inquiries/archived",{params:e})},Hn=function(e){var t=e.page,a=e.limit,n=e.search_query,s=n?"&search_query=".concat(n):"";return h.a.get("api/new-patients-crm/leads/inquirables-without-active-inquiries?page=".concat(t,"&limit=").concat(a)+s)},Bn=function(e){var t=e.id,a=e.page;return h.a.get("api/new-patients-crm/inquiries/".concat(t,"/comments?page=").concat(a))},zn=function(e){var t=e.id,a=e.data;return h.a.post("/api/new-patients-crm/inquiries/".concat(t,"/change-stage"),a)},Un=function(e){var t=e.id,a=e.data;return h.a.post("api/new-patients-crm/inquiries/".concat(t,"/onboarding-complete-comment"),a)},Vn=function(e){var t=e.id,a=e.data;return h.a.post("api/new-patients-crm/inquiries/".concat(t,"/initial-survey-comment"),a)},Wn=function(e){var t=e.id,a=e.data;return h.a.post("api/new-patients-crm/inquiries/".concat(t,"/second-survey-comment"),a)},Kn=function(e){var t=e.page,a=e.limit;return h.a.get("api/providers?page=".concat(t,"&limit=").concat(a))},Gn=function(e){var t=e.page,a=e.limit;return h.a.get("api/insurances?page=".concat(t,"&limit=").concat(a))},Zn=function(e){var t=e.page,a=e.limit;return h.a.get("api/eligibility-payers?page=".concat(t,"&limit=").concat(a))},Jn=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).query,t=void 0===e?"":e;return h.a.get("api/system/diagnoses/autocomplete?q=".concat(t))},Xn={lanes:[{id:9,titleText:wn,label:"",currentPage:1,lastPage:1,cards:[]},{id:1,titleText:vn,label:"",currentPage:1,lastPage:1,cards:[]},{id:2,titleText:On,label:"",currentPage:1,lastPage:1,cards:[]},{id:3,titleText:xn,label:"",currentPage:1,lastPage:1,cards:[]},{id:5,titleText:_n,label:"",currentPage:1,lastPage:1,cards:[]},{id:6,titleText:gn,label:"",currentPage:1,lastPage:1,cards:[]},{id:7,titleText:yn,label:"",currentPage:1,lastPage:1,cards:[]},{id:8,titleText:Nn,label:"",currentPage:1,lastPage:1,cards:[]},{id:4,titleText:Cn,label:"",currentPage:1,lastPage:1,cards:[]}],filters:{source:[]},searchValue:"",showAddPatientModal:!1,selectedCardData:null,fileTypeSelection:{showModal:!1,fileId:null,patientIsCreated:!1},removeCardData:null,moveCardData:null,eventBus:void 0,registrationMethods:[],channels:[],sources:[],languages:null,patientsData:{pageIndex:1,pageSize:20,lastPageIndex:20,list:[]},providersData:{pageIndex:1,pageSize:20,lastPageIndex:20,list:[]},insurancesData:{pageIndex:1,pageSize:10,lastPageIndex:10,list:[]},eligibilityPayersData:{pageIndex:1,pageSize:20,lastPageIndex:20,list:[]},insuranceProcedures:[],diagnoses:[],therapyTypes:[],callModalData:null,preferredPhoneList:[{id:0,value:"C",text:"Cell Phone"},{id:1,value:"H",text:"Home Phone"},{id:2,value:"W",text:"Work Phone"},{id:3,value:"D",text:"DO NOT CALL"}],documentTypes:[],providersDatasetForTribute:null,loading:!0},Qn=Object(Oa.b)({name:"newPatientsDashboard",initialState:Xn,reducers:{setLanesInTableAC:function(e,t){e.lanes=t.payload.data},setDataInLaneAC:function(e,t){var a=t.payload,n=a.data,s=a.meta,r=a.laneId,i=s.current_page,c=s.total,o=s.last_page,l=e.lanes.findIndex((function(e){return e.id===r}));return e.lanes[l].cards=n,e.lanes[l].currentPage=i,e.lanes[l].label=String(c),e.lanes[l].lastPage=o,e},cardMoveAcrossLanesAC:function(e,t){var a=t.payload.data,n=a.fromLaneId,s=a.toLaneId,r=a.cardId,i=a.index,c=a.cardDetails,o=e.lanes.findIndex((function(e){return e.id===n})),l=e.lanes.findIndex((function(e){return e.id===s}));e.lanes[o].cards=e.lanes[o].cards.filter((function(e){return e.id!==r})),e.lanes[l].cards.splice(i,0,c),e.lanes[o].label=String(Number(e.lanes[o].label)-1),e.lanes[l].label=String(Number(e.lanes[l].label)+1)},addCardAC:function(e,t){var a=t.payload,n=a.laneId,s=a.card,r=e.lanes.findIndex((function(e){return e.id===n}));e.lanes[r].cards.unshift(s),e.lanes[r].label=String(Number(e.lanes[r].label)+1)},updateCardDataAC:function(e,t){var a=t.payload.meta,n=e.lanes.findIndex((function(e){return e.id===a.stageId})),s=e.lanes[n].cards.findIndex((function(e){return e.id===a.id}));e.lanes[n].cards[s]=Object(ct.a)(Object(ct.a)({},e.lanes[n].cards[s]),t.payload.data)},deleteCardAC:function(e,t){var a=t.payload,n=a.laneId,s=a.cardId,r=e.lanes.findIndex((function(e){return e.id===n})),i=e.lanes[r].cards.findIndex((function(e){return e.id===s}));e.lanes[r].cards.splice(i,1),e.lanes[r].label=String(Number(e.lanes[r].label)-1)},setShowAddPatientModalAC:function(e,t){e.showAddPatientModal=t.payload.value},setSelectedCardDataAC:function(e,t){e.selectedCardData=t.payload.data},addCommentToSelectedCardDataAC:function(e,t){e.selectedCardData.data.comments.push(t.payload.comment)},setRemoveCardDataAC:function(e,t){e.removeCardData=t.payload.data},setMoveCardDataAC:function(e,t){e.moveCardData=t.payload.data},setEventBusAC:function(e,t){e.eventBus=t.payload.eventBus},setSearchValueAC:function(e,t){e.searchValue=t.payload.value},setFiltersAC:function(e,t){e.filters=t.payload.data},setRegistrationMethodsAC:function(e,t){e.registrationMethods=t.payload.data},setChannelsAC:function(e,t){e.channels=t.payload.data},setSourcesAC:function(e,t){e.sources=t.payload.data},addValueToSourcesAC:function(e,t){var a=t.payload,n=a.id,s=a.name,r=a.channel_id,i=e.channels.find((function(e){return e.id===r})),c={id:n,name:s,channel_id:r,channel:i};e.sources.push(c)},setLanguagesAC:function(e,t){e.languages=t.payload.languages},setPatientsDataAC:function(e,t){e.patientsData=t.payload.data},setProvidersDataAC:function(e,t){e.providersData=t.payload.data},setInsurancesDataAC:function(e,t){e.insurancesData=t.payload.data},setEligibilityPayersDataAC:function(e,t){e.eligibilityPayersData=t.payload.data},setInsuranceProceduresAC:function(e,t){e.insuranceProcedures=t.payload.data},setDiagnosesAC:function(e,t){e.diagnoses=t.payload.data},setTherapyTypesAC:function(e,t){e.therapyTypes=t.payload.data},setCallModalDataAC:function(e,t){e.callModalData=t.payload.data},setLoadingAC:function(e,t){e.loading=t.payload.value},setFileTypeSelectionAC:function(e,t){e.fileTypeSelection=t.payload.data},setDocumentTypesAC:function(e,t){e.documentTypes=t.payload.data},setCommentsInSelectedCardDataAC:function(e,t){e.selectedCardData&&(e.selectedCardData.comments=t.payload.data)},setProvidersDatasetForTributeAC:function(e,t){e.providersDatasetForTribute=t.payload.data}}}),$n=Qn.reducer,es=Qn.actions,ts=es.setLanesInTableAC,as=es.setDataInLaneAC,ns=es.cardMoveAcrossLanesAC,ss=es.addCardAC,rs=es.updateCardDataAC,is=es.deleteCardAC,cs=es.setShowAddPatientModalAC,os=es.setSelectedCardDataAC,ls=(es.addCommentToSelectedCardDataAC,es.setRemoveCardDataAC),ds=es.setMoveCardDataAC,us=es.setEventBusAC,ms=es.setSearchValueAC,bs=es.setFiltersAC,js=es.setRegistrationMethodsAC,ps=es.setChannelsAC,fs=es.setSourcesAC,hs=es.addValueToSourcesAC,vs=es.setLanguagesAC,Os=es.setPatientsDataAC,xs=es.setProvidersDataAC,_s=es.setInsurancesDataAC,gs=es.setEligibilityPayersDataAC,ys=es.setInsuranceProceduresAC,Ns=es.setDiagnosesAC,Cs=es.setTherapyTypesAC,ws=es.setCallModalDataAC,Ds=es.setLoadingAC,Ss=es.setFileTypeSelectionAC,Ps=es.setDocumentTypesAC,ks=es.setCommentsInSelectedCardDataAC,Is=es.setProvidersDatasetForTributeAC,As=function(){var e,t,a=Object(l.b)(),n=Object(l.c)((function(e){return e.app})),r=n.user,i=n.callLog,c=Object(l.c)((function(e){return e.newPatientsDashboard})).eventBus,o={comment:"",phone:""},d=Object(s.useContext)(Tn),m=d.currentInquiry,b=d.errors,j=d.setErrors,p=d.clearError,f=d.showModal,h=d.closeModal,v=d.isSaving,O=d.handleSubmit,x=Object(s.useState)(o),_=Object(u.a)(x,2),N=_[0],C=_[1],w=function(){var e={};return N.comment||(e.comment="Field is required."),j(e),0===Object.keys(e).length},D=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var t,n,s,i,o;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Promise.all([Un({id:m.id,data:N}),O(N)]);case 5:t=e.sent,n=Object(u.a)(t,2),s=n[0],n[1],i=Object(ct.a)(Object(ct.a)({},s.data),{},{admin:r}),5,o=Object(ct.a)(Object(ct.a)({},m),{},{onboardingCompleteComment:i,stageId:5}),a(ns({data:{cardDetails:o,fromLaneId:m.stageId,toLaneId:5,cardId:m.id,index:0}})),c.publish({type:"MOVE_CARD",fromLaneId:m.stageId,toLaneId:5,cardId:m.id,index:0}),c.publish({type:"UPDATE_CARD",laneId:5,card:o}),S(),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(2);case 20:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){i&&C(Object(ct.a)(Object(ct.a)({},N),{},{phone:i.phone_to}))}),[i]);var S=function(){h(),P()},P=function(){C(o),j({})},k=m.onboardingDate,I=m.onboardingTime,T=k?ya()(k,"YYYY-MM-DD").format("MM/DD/YYYY"):"-",F=I||"-",L="-",q="-",Y=m.inquirable.alert;Y&&(L="$".concat(Y.co_pay),q="$".concat(Y.deductible));var R=m.onboardingPhone?jn(m.onboardingPhone):"-",E=Boolean(m.inquirable.last_document),H=null===(e=m.inquirable.last_document_request)||void 0===e?void 0:e.items.some((function(e){return 7===e.form_type_id}));return Object(y.jsxs)(re.a,{show:f,className:"custom-modal",backdrop:"true",onHide:S,centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("h4",{className:"m-0",children:"Call Comment"})}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("textarea",{name:"comment",id:"comment",className:"form-control ".concat(b.comment?"is-invalid":""),rows:"4",placeholder:"Add your comment...",value:N.comment,onChange:function(e){var t=e.target.value;t&&p(["comment"]),C(Object(ct.a)(Object(ct.a)({},N),{},{comment:t}))}}),Object(y.jsx)("div",{className:"invalid-feedback",children:b.comment})]}),Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"w-50 d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{className:"d-flex flex-column",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Onboarding time:"}),Object(y.jsx)("div",{children:"".concat(T," ").concat(F)})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Co-pay:"}),Object(y.jsx)("div",{children:L||"-"})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Deductible:"}),Object(y.jsx)("div",{children:q||"-"})]}),Object(y.jsxs)("div",{className:"d-flex flex-column",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Message:"}),Object(y.jsx)("div",{children:(null===(t=m.inquirable.alert)||void 0===t?void 0:t.message)||"-"})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Phone:"}),Object(y.jsx)("div",{children:R})]})]}),Object(y.jsxs)("div",{className:"w-50",children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("div",{className:g()(Yn.a.indicator,E?Yn.a.green:Yn.a.yellow),children:Object(y.jsx)(mt.a,{path:E?dt.b:dt.f,size:.4})}),Object(y.jsx)("span",{children:"All forms"})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("div",{className:g()(Yn.a.indicator,H?Yn.a.green:Yn.a.red),children:Object(y.jsx)(mt.a,{path:H?dt.b:dt.c,size:.4})}),Object(y.jsx)("span",{children:"Require credit card"})]})]})]})]}),Object(y.jsx)(re.a.Footer,{children:v?Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"}):Object(y.jsx)("button",{className:"btn btn-primary btn-large text-white",onClick:D,children:"Save"})})]})},Ms=a(44),Ts=a.n(Ms),Fs=a(7),Ls=Object(s.createContext)(),qs=Ls,Ys=a(334),Rs=a.n(Ys),Es=function(e){var t=e.value,a=e.fieldName,n=e.handleStarClick,r=void 0===n?function(){}:n,i=e.readOnly,c=void 0!==i&&i,o=Object(s.useState)(-1),l=Object(u.a)(o,2),d=l[0],m=l[1],b=function(e){return c?e<t?dt.k:dt.l:e<=d||e<t?dt.k:dt.l},j=function(e){c||function(e){m(e)}(e)},p=function(){c||m(-1)},f=function(e){return c?"":g()(Rs.a.star,e<=d&&Rs.a.starHover)};return Object(y.jsx)("div",{className:"d-flex gap-1",children:Array.from({length:5},(function(e,t){return Object(y.jsx)(mt.a,{path:b(t),size:.9,onClick:function(){return r(t,a)},onMouseEnter:function(){return j(t)},onMouseLeave:p,className:f(t)},t)}))})},Hs=function(e){var t=e.appointments;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h5",{children:"Appointment info"}),Object(y.jsxs)("table",{className:"table",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Date"}),Object(y.jsx)("th",{children:"Time"}),Object(y.jsx)("th",{children:"Provider Name"}),Object(y.jsx)("th",{children:"Status"})]})}),Object(y.jsx)("tbody",{children:t.length>0?t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.date_of_service.date}),Object(y.jsx)("td",{children:e.date_of_service.time}),Object(y.jsx)("td",{children:e.provider.provider_name}),Object(y.jsx)("td",{children:e.status.status})]},t)})):Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"4",className:"text-center",children:Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"})})})})]})]})},Bs={comment:"",comment_type:5,appointment_id:null,metadata:{service_rate:0,provider_rate:0,suggestions:""}},zs=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.newPatientsDashboard})).eventBus,a=Object(s.useContext)(qs),n=a.showModal,r=a.isSaving,i=a.currentInquiry,c=a.formData,o=a.setFormData,d=a.handleSubmit,u=a.completedAppointments,m=a.setCompletedAppointments,b=a.handleInputComment,j=a.hasSuggestions,p=a.handleHasSuggestionsChange,f=a.handleInputSuggestions,v=a.handleStarClick,O=a.errors,x=a.setErrors,_=a.handleCloseModal,N=function(){var e={};return c.comment||(e.comment="Field is required."),0===c.metadata.service_rate&&(e.service_rate="Field is required."),0===c.metadata.provider_rate&&(e.provider_rate="Field is required."),j&&!c.metadata.suggestions&&(e.suggestions="Field is required."),x(e),0===Object.keys(e).length},C=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={comment:c.comment},e.next=6,Promise.all([Vn({id:i.id,data:c}),d(t)]);case 6:w(),_(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var a=Object(ct.a)(Object(ct.a)({},i),{},{initialSurveyComplete:!0,stageId:7});e(ns({data:{cardDetails:a,fromLaneId:i.stageId,toLaneId:7,cardId:i.id,index:0}})),t.publish({type:"MOVE_CARD",fromLaneId:i.stageId,toLaneId:7,cardId:i.id,index:0}),t.publish({type:"UPDATE_CARD",laneId:7,card:a})};return Object(s.useEffect)((function(){var e;n&&(e=i.id,h.a.get("api/new-patients-crm/inquiries/".concat(e,"/completed-initial-appointment"))).then((function(e){var t=e.data;m([t]);var a=Object(ct.a)(Object(ct.a)({},Bs),{},{appointment_id:t.id});o(a)}))}),[n]),Object(y.jsxs)(re.a,{show:n,className:"custom-modal",backdrop:"true",onHide:_,centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("h4",{className:"m-0",children:"Call Comment"})}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsx)(Hs,{appointments:u}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("textarea",{name:"comment",id:"comment",className:g()("form-control",O.comment&&"is-invalid"),rows:"4",placeholder:"Add your comment...",value:c.comment,onChange:b}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.comment})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"On a scale of 1-5 (with 5 being the highest) how do you rate the services you just received?"}),Object(y.jsx)(Es,{value:c.metadata.service_rate,fieldName:"service_rate",handleStarClick:v}),Object(y.jsx)("input",{hidden:!0,className:g()(O.service_rate&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.service_rate})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"On a scale of 1-5 (with 5 being the highest) how do you rate the provider that was assigned to you?"}),Object(y.jsx)(Es,{value:c.metadata.provider_rate,fieldName:"provider_rate",handleStarClick:v}),Object(y.jsx)("input",{hidden:!0,className:g()(O.provider_rate&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.provider_rate})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"Do you have any suggestions as to how we can elevate your experience with Change WithinReach?"}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("label",{className:"form-check-label",children:[Object(y.jsx)("input",{type:"radio",name:"experience",value:"Yes",checked:j,onChange:p,className:"form-check-input"})," ","Yes"]}),Object(y.jsxs)("label",{className:"form-check-label",children:[Object(y.jsx)("input",{type:"radio",name:"experience",value:"No",checked:!j,onChange:p,className:"form-check-input"})," ","No"]})]}),j&&Object(y.jsxs)("div",{className:"mt-1",children:[Object(y.jsx)("textarea",{name:"suggestions",id:"suggestions",className:g()("form-control",O.suggestions&&"is-invalid"),rows:"4",value:c.metadata.suggestions,onChange:f,placeholder:"Enter suggestions..."}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.suggestions})]})]})]}),Object(y.jsx)(re.a.Footer,{children:r?Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"}):Object(y.jsx)("button",{className:"btn btn-primary btn-large text-white",onClick:C,children:"Save"})})]})},Us={comment:"",comment_type:8,appointment_id:null,metadata:{therapist_understanding_support_rate:0,therapy_atmosphere_rate:0,therapist_openness_share_rate:0,therapy_session_after_feelings_rate:0,suggestions:""}},Vs=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.newPatientsDashboard})).eventBus,a=Object(s.useContext)(qs),n=a.showModal,r=a.isSaving,i=a.currentInquiry,c=a.formData,o=a.setFormData,d=a.handleSubmit,u=a.completedAppointments,m=a.setCompletedAppointments,b=a.handleInputComment,j=a.hasSuggestions,p=a.handleHasSuggestionsChange,f=a.handleInputSuggestions,v=a.handleStarClick,O=a.errors,x=a.setErrors,_=a.handleCloseModal,N=function(){var e={};return c.comment||(e.comment="Field is required."),0===c.metadata.therapist_understanding_support_rate&&(e.therapist_understanding_support_rate="Field is required."),0===c.metadata.therapy_atmosphere_rate&&(e.therapy_atmosphere_rate="Field is required."),0===c.metadata.therapist_openness_share_rate&&(e.therapist_openness_share_rate="Field is required."),0===c.metadata.therapy_session_after_feelings_rate&&(e.therapy_session_after_feelings_rate="Field is required."),j&&!c.metadata.suggestions&&(e.suggestions="Field is required."),x(e),0===Object.keys(e).length},C=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={comment:c.comment},e.next=6,Promise.all([Wn({id:i.id,data:c}),d(t)]);case 6:w(),_(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var a=i.stageId,n=Object(ct.a)(Object(ct.a)({},i),{},{secondSurveyComplete:!0});e(rs({data:n,meta:{stageId:a,id:i.id}})),t.publish({type:"UPDATE_CARD",laneId:a,card:n})};return Object(s.useEffect)((function(){var e;n&&(e=i.id,h.a.get("api/new-patients-crm/inquiries/".concat(e,"/completed-appointments"))).then((function(e){var t=e.data;m(t),o(Object(ct.a)(Object(ct.a)({},Us),{},{appointment_id:t[0].id}))}))}),[n]),Object(y.jsxs)(re.a,{show:n,className:"custom-modal",backdrop:"true",onHide:_,centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("h4",{className:"m-0",children:"Call Comment"})}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsx)(Hs,{appointments:u}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("textarea",{name:"comment",id:"comment",className:g()("form-control",O.comment&&"is-invalid"),rows:"4",placeholder:"Add your comment...",value:c.comment,onChange:b}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.comment})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"How well do you feel understood and supported by your therapist? Please rate from 1 to 5 stars, where 1 star means 'not at all' and 5 stars means 'completely'."}),Object(y.jsx)(Es,{value:c.metadata.therapist_understanding_support_rate,fieldName:"therapist_understanding_support_rate",handleStarClick:v}),Object(y.jsx)("input",{hidden:!0,className:g()(O.therapist_understanding_support_rate&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.therapist_understanding_support_rate})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"How would you rate the overall atmosphere or vibe during your therapy sessions? Please rate from 1 to 5 stars, where 1 star means 'very poor' and 5 stars means 'excellent'."}),Object(y.jsx)(Es,{value:c.metadata.therapy_atmosphere_rate,fieldName:"therapy_atmosphere_rate",handleStarClick:v}),Object(y.jsx)("input",{hidden:!0,className:g()(O.therapy_atmosphere_rate&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.therapy_atmosphere_rate})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"How easy has it been for you to open up and share with your therapist? Please rate from 1 to 5 stars, where 1 star means 'very difficult' and 5 stars means 'very easy'."}),Object(y.jsx)(Es,{value:c.metadata.therapist_openness_share_rate,fieldName:"therapist_openness_share_rate",handleStarClick:v}),Object(y.jsx)("input",{hidden:!0,className:g()(O.therapist_openness_share_rate&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.therapist_openness_share_rate})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"How do you feel after your therapy sessions? Please rate your sense of being heard and validated from 1 to 5 stars, where 1 star means 'not at all' and 5 stars means 'completely'."}),Object(y.jsx)(Es,{value:c.metadata.therapy_session_after_feelings_rate,fieldName:"therapy_session_after_feelings_rate",handleStarClick:v}),Object(y.jsx)("input",{hidden:!0,className:g()(O.therapy_session_after_feelings_rate&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.therapy_session_after_feelings_rate})]}),Object(y.jsxs)("div",{className:"form-group custom-form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"Do you have any suggestions as to how we can elevate your experience with Change WithinReach?"}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("label",{className:"form-check-label",children:[Object(y.jsx)("input",{type:"radio",name:"experience",value:"Yes",checked:j,onChange:p,className:"form-check-input"})," ","Yes"]}),Object(y.jsxs)("label",{className:"form-check-label",children:[Object(y.jsx)("input",{type:"radio",name:"experience",value:"No",checked:!j,onChange:p,className:"form-check-input"})," ","No"]})]}),j&&Object(y.jsxs)("div",{className:"mt-1",children:[Object(y.jsx)("textarea",{name:"suggestions",id:"suggestions",className:g()("form-control",O.suggestions&&"is-invalid"),rows:"4",value:c.metadata.suggestions,onChange:f,placeholder:"Enter suggestions..."}),Object(y.jsx)("div",{className:"invalid-feedback",children:O.suggestions})]})]})]}),Object(y.jsx)(re.a.Footer,{children:r?Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"}):Object(y.jsx)("button",{className:"btn btn-primary btn-large text-white",onClick:C,children:"Save"})})]})},Ws={comment:"",comment_type:5,appointment_id:null,metadata:{suggestions:""}},Ks=function(){var e=Object(s.useContext)(Tn),t=e.currentInquiry,a=e.errors,n=e.setErrors,r=e.clearError,i=e.showModal,c=e.closeModal,o=e.isSaving,l=e.handleSubmit,d=Object(s.useState)(Ws),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(!1),f=Object(u.a)(p,2),h=f[0],v=f[1],O=Object(s.useState)([]),x=Object(u.a)(O,2),_=x[0],g=x[1],N=function(){j(Ws),g([]),v(!1),n({})},C=function(){var e=Object(y.jsx)(y.Fragment,{});return t?(6===t.stageId&&(e=Object(y.jsx)(zs,{})),8===t.stageId&&(e=Object(y.jsx)(Vs,{})),e):e}();return Object(y.jsx)(qs.Provider,{value:{showModal:i,isSaving:o,currentInquiry:t,formData:b,setFormData:j,handleSubmit:l,completedAppointments:_,setCompletedAppointments:g,handleInputComment:function(e){var t=e.target.value;t&&r(["comment"]),j(Object(ct.a)(Object(ct.a)({},b),{},{comment:t}))},hasSuggestions:h,handleHasSuggestionsChange:function(e){v("Yes"===e.target.value),"No"===e.target.value&&(j(Object(ct.a)(Object(ct.a)({},b),{},{metadata:Object(ct.a)(Object(ct.a)({},b.metadata),{},{suggestions:""})})),r(["suggestions"]))},handleInputSuggestions:function(e){var t=e.target.value;t&&r(["suggestions"]),j(Object(ct.a)(Object(ct.a)({},b),{},{metadata:Object(ct.a)(Object(ct.a)({},b.metadata),{},{suggestions:t})}))},handleStarClick:function(e,t){j(Object(ct.a)(Object(ct.a)({},b),{},{metadata:Object(ct.a)(Object(ct.a)({},b.metadata),{},Object(Fs.a)({},t,e+1))})),r([t])},errors:a,setErrors:n,handleCloseModal:function(){c(),N()}},children:C})},Gs=function(e){var t=e.showModal,a=e.closeModal,n=Object(l.b)(),r=Object(s.useContext)(se).enqueueNotification,i=Object(l.c)((function(e){return e.newPatientsDashboard})).lanes,c=Object(l.c)((function(e){return e.app})).callLog,o=Object(s.useState)({}),d=Object(u.a)(o,2),m=d[0],b=d[1],j=Object(s.useState)(!1),p=Object(u.a)(j,2),f=p[0],h=p[1],v=function(){var e=null;return i.forEach((function(t){var a,n="AppModelsPatientLeadPatientLead"===c.call_subject_type;(a=t.cards.find((function(e){return e.inquirable.id===c.call_subject_id&&(n?!e.isPatientCreated:e.isPatientCreated)})))&&(e=a)})),e}(),O=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){var a,s;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,tn(c.id,t);case 4:a=e.sent,n(cn({callLog:a.data.call_log})),e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(0),s=e.t0.response.data.errors.comment?e.t0.response.data.errors.comment:e.t0.response.data.message,r("Error",s),e.t0;case 13:return e.prev=13,h(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,8,13,16]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(y.jsx)(Ln,{});return v?(3===v.stageId&&(e=Object(y.jsx)(As,{})),6!==v.stageId&&8!==v.stageId||(e=Object(y.jsx)(Ks,{})),e):e}();return Object(y.jsx)(Tn.Provider,{value:{currentInquiry:v,errors:m,setErrors:b,clearError:function(e){var t=Ts.a.cloneDeep(m);e.forEach((function(e){delete t[e]})),b(t)},showModal:t,closeModal:a,handleSubmit:O,isSaving:f},children:x})},Zs=function(e){var t=e.patientId,a=e.disabled,n=r.a.useState(!1),s=Object(u.a)(n,2),i=s[0],c=s[1],o=r.a.useState(!1),l=Object(u.a)(o,2),d=l[0],m=l[1];return Object(y.jsxs)("div",{children:[Object(y.jsxs)("button",{type:"button",className:g()("callButton",Ja.a.callButton,"badge","d-flex","gap-1","align-items-center"),disabled:a,onClick:function(){i||c(!0)},children:[Object(y.jsx)("img",{src:Xa,alt:"phone_icon"}),Object(y.jsx)("span",{children:"Call"})]}),Object(y.jsx)(An,{patientId:t,patientType:"patient",showModal:i,closeModal:function(){c(!1)},openCallResultModal:function(){d||m(!0)}}),Object(y.jsx)(Gs,{showModal:d,closeModal:function(){m(!1)}})]})},Js=function(e,t){var a=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return t?"rgba("+a+", "+n+", "+s+", "+t+")":"rgb("+a+", "+n+", "+s+")"},Xs={withoutCompletedForms:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"appointment_status",Header:"Appt. Status",width:120},{accessor:"date",Header:"Date",Cell:Ba,width:80},{accessor:"time",Header:"Time",sortType:Va,width:80},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"first_visit",Header:"Date of First Visit",Cell:Ba,sortType:Wa,width:110},{accessor:"count_visits",Header:"Count of Visits",width:100},{accessor:"form_status",Header:"Form Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ga,{formStatus:t})},sortType:function(e,t,a){var n,s,r=null===(n=e.original[a])||void 0===n?void 0:n.created_at,i=null===(s=t.original[a])||void 0===s?void 0:s.created_at;return r||i?r?i?new Date(r)-new Date(i):1:-1:0},width:100}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},requireEligibilityCheck:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"appointment_status",Header:"Appt. Status",width:120},{accessor:"date",Header:"Date",Cell:Ba,width:80},{accessor:"time",Header:"Time",sortType:Va,width:80},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"last_eligibility_check",Header:"Last Eligibility Check",sortType:Wa,width:100},{accessor:"message",Header:"Message",width:200}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},withDeductible:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"appointment_status",Header:"Appt. Status",width:120},{accessor:"date",Header:"Date",Cell:Ba,width:80},{accessor:"time",Header:"Time",sortType:Va,width:80},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"credit_card",Header:"Credit Card on File",Cell:za,width:150},{accessor:"last_eligibility_check",Header:"Last Eligibility Check",sortType:Wa,width:100},{accessor:"co_pay",Header:"Co-pay",width:85},{accessor:"deductible",Header:"Deductible",width:85},{accessor:"deductible_met",Header:"Deductible Met",width:85},{accessor:"deductible_remaining",Header:"Remaining Deductible",width:85},{accessor:"insurance_pay",Header:"Insurance Pay",width:85},{accessor:"reference_number",Header:"Reference Number",width:85},{accessor:"message",Header:"Message",width:200}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},withNegativeCreditCardBalance:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:120},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"appointment_status",Header:"Appt. Status",width:120},{accessor:"date",Header:"Date",Cell:Ba,width:80},{accessor:"time",Header:"Time",sortType:Va,width:80},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:110},{accessor:"first_visit",Header:"Date of First Visit",Cell:Ba,sortType:Wa,width:110},{accessor:"count_visits",Header:"Count of Visits",width:100},{accessor:"credit_card",Header:"Credit Card on File",Cell:za,width:150},{accessor:"current_balance",Header:"Current Balance",width:80},{accessor:"co_payment",Header:"Co-Payment",width:90}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},withNoFutureAppointments:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"appointment_status",Header:"Appt. Status",width:120},{accessor:"date",Header:"Date",Cell:Ba,width:80},{accessor:"time",Header:"Time",sortType:Va,width:80},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"first_visit",Header:"Date of First Visit",Cell:Ba,sortType:Wa,width:110},{accessor:"count_visits",Header:"Count of Visits",width:100}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},cashPayment:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"appointment_status",Header:"Appt. Status",width:120},{accessor:"date",Header:"Date",Cell:Ba,width:80},{accessor:"time",Header:"Time",sortType:Va,width:80},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"first_visit",Header:"Date of First Visit",Cell:Ba,sortType:Wa,width:110},{accessor:"credit_card",Header:"Credit Card on File",Cell:za,width:150},{accessor:"co_payment",Header:"Amount in cash",width:90}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},newPatients:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:40},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",disableSortBy:!0,Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},width:70},{accessor:"patient_status_updated_at",Header:"Status Updated At",sortType:Wa,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},width:100},{accessor:"patient_creation_date",Header:"Patient Creation Date",sortType:Wa,width:100},{accessor:"count_calls",Header:"Count of calls",width:90},{accessor:"date_of_last_call",Header:"Date of Last Call",sortType:Wa,width:100},{accessor:"caller",Header:"Who Called",width:120},{accessor:"comment",Header:"Comment",width:150},{accessor:"id",Header:"Call",disableSortBy:!0,Cell:function(e){var t=e.row,a=e.value;return Object(y.jsx)(Zs,{patientId:a,disabled:!t.original.cell_phone})},width:80}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},inactivePatients:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:40},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",disableSortBy:!0,Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},width:100},{accessor:"patient_status_updated_at",Header:"Status Updated At",sortType:Wa,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},width:150},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"count_visits",Header:"Count of Visits",width:100},{accessor:"date_of_last_visit",Header:"Date of Last Visit",sortType:Wa,width:150}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},lostPatients:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:40},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"patient_status",Header:"Patient's Status",disableSortBy:!0,Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},width:100},{accessor:"patient_status_updated_at",Header:"Status Updated At",sortType:Wa,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},width:150},{accessor:"therapist_name",Header:"Therapist's Name",sortType:Ua,width:150},{accessor:"count_visits",Header:"Count of Visits",width:100},{accessor:"date_of_last_visit",Header:"Date of Last Visit",sortType:Wa,width:150}],loading:!0,dataIsLoaded:!1,tableParams:{total:0}},tridiuumAppointmentsCount:null,isRestartingTridiuumParsers:!1},Qs=Object(Oa.b)({name:"secretaryDashboard",initialState:Xs,reducers:{setDataInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableData=s},setDataIsLoadedAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].dataIsLoaded=s},setCurrentPageInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.current_page=s},setLastPageInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.last_page=s},setTotalInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.total=s},setTridiuumAppointmentsCountAC:function(e,t){e.tridiuumAppointmentsCount=t.payload.value},setIsRestartingTridiuumParsersAC:function(e,t){e.isRestartingTridiuumParsers=t.payload.value}}}),$s=Qs.reducer,er=Qs.actions,tr=er.setDataInTableAC,ar=er.setDataIsLoadedAC,nr=(er.setCurrentPageInTableAC,er.setLastPageInTableAC),sr=er.setTotalInTableAC,rr=er.setTridiuumAppointmentsCountAC,ir=er.setIsRestartingTridiuumParsersAC,cr=a(212),or=a.n(cr),lr=function(e){var t=e.absolute,a=void 0!==t&&t,n=e.color,s=void 0===n?null:n,r=e.size,i=void 0===r?null:r;return Object(y.jsx)("div",{className:g()("p-1 d-flex align-items-center justify-content-center",or.a["circle-loader"],a?or.a["circle-loader--absolute"]:""),children:Object(y.jsx)("div",{className:g()("spinner-border",s?"":"text-primary",function(){if(!i)return"";var e="spinner-border-"+i;return e in or.a?or.a[e]:e}()),role:"status",color:s})})},dr=a.p+"static/media/page-loader.9c48f460.gif",ur=a.p+"static/media/sync-icon.aa5f162e.svg",mr=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.secretaryDashboard})),a=t.tridiuumAppointmentsCount,n=t.isRestartingTridiuumParsers,r=function(){h.a.get("/api/secretaries-dashboard/tridiuum-appointments-data").then((function(t){var a=t.data;e(rr({value:a.count})),e(ir({value:a.is_restarting_tridiuum_parsers})),a.is_restarting_tridiuum_parsers&&i()}))},i=function(){setTimeout((function(){r()}),6e4)};Object(s.useEffect)((function(){r()}),[]);return Object(y.jsxs)("div",{className:g()(va.a.tridiumAppointmentsInfo,"dashboardCard"),children:[Object(y.jsx)("span",{children:"Today's appointments from Lucet:"}),null!==a?Object(y.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-grow-1",children:[Object(y.jsx)("span",{children:a}),n?Object(y.jsx)("img",{src:dr,alt:"restart-tridiuum-parsers-loader",title:"Synchronizing appointments with Lucet",style:{height:"18px"}}):Object(y.jsx)("img",{src:ur,alt:"restart-tridiuum-parsers",className:va.a.btnRestartTridiuumParsers,title:"Sync appointments with Lucet",onClick:function(){n||(e(ir({value:!0})),i(),h.a.post("/api/secretaries-dashboard/restart-tridiuum-parsers").catch((function(){console.log("Error restarting tridiuum parsers")})))}})]}):Object(y.jsx)("span",{className:"d-flex align-items-center",style:{height:"19px"},children:Object(y.jsx)(lr,{size:"sm"})})]})},br=function(){return Object(y.jsxs)("div",{className:g()(fa.a.sidebar,"d-flex flex-column gap-3"),children:[Object(y.jsx)(mr,{}),Object(y.jsx)(ja,{})]})},jr=a(704),pr=a(692),fr=a(153),hr=a.n(fr),vr=function(e){var t=e.defaultActiveKey,a=e.id,n=(e.className,e.tabs),s=e.tabStyles,i=e.onSelect,c=r.a.useState(t),o=Object(u.a)(c,2),l=o[0],d=o[1];return Object(y.jsxs)(jr.a.Container,{id:a,activeKey:l,onSelect:function(e){d(e),i&&i(e)},children:[Object(y.jsx)("div",{className:hr.a.tabsContainer,children:Object(y.jsx)(b.a,{className:g()(hr.a.tabs,"p-0"),children:Object(y.jsx)(p.a,{fill:!0,variant:"tabs",style:{flexWrap:"nowrap",border:"none"},children:n.map((function(e,t){return Object(y.jsx)(p.a.Item,{children:Object(y.jsx)(p.a.Link,{className:hr.a.tab,style:{border:"none"},eventKey:e.eventKey,children:(a=e.numberOfRecords,n=e.title,s=l===e.eventKey,Object(y.jsxs)("div",{className:g()("d-flex flex-column align-items-center justify-content-center",s&&hr.a.active,hr.a.title),children:[Object(y.jsx)("div",{className:g()("fw-bold",s?"text-white":"text-primary"),style:{marginBottom:"2px"},children:a}),Object(y.jsx)("div",{className:g()(hr.a.text,s&&"text-white"),children:n})]}))})},t);var a,n,s}))})})}),Object(y.jsx)(pr.a,{className:"flex-grow-1",children:Object(y.jsx)(b.a,{children:Object(y.jsx)(jr.a.Content,{children:n.map((function(e,t){return Object(y.jsxs)(jr.a.Pane,{eventKey:e.eventKey,children:[Object(y.jsx)("div",{id:e.id}),Object(y.jsx)("div",{style:s,children:e.component})]},t)}))})})})]})},Or=a(180),xr=a.n(Or),_r=function(e){var t=e.tableName,a=Object(l.c)((function(e){return e.secretaryDashboard}))[t];return Object(y.jsx)("div",{className:"dashboard-table-wrapper",children:Object(y.jsx)(_t,{pageSize:a.tableParams.per_page,columns:a.tableColumns,data:a.tableData,dataIsLoaded:a.dataIsLoaded,options:{applyMinHeightToHeader:!0}})})},gr=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})).secretaryDashboard,a=t.withoutCompletedForms,n=t.requireEligibilityCheck,s=t.withDeductible,i=t.withNegativeCreditCardBalance,c=t.withNoFutureAppointments,o=t.cashPayment,d=["withoutCompletedForms","requireEligibilityCheck","withDeductible","withNegativeCreditCardBalance","withNoFutureAppointments","cashPayment"],m=[{id:"tab-btn-1",value:"previous_week",label:"Previous week"},{id:"tab-btn-2",value:"yesterday",label:"Yesterday"},{id:"tab-btn-3",value:"today",label:"Today"},{id:"tab-btn-4",value:"tomorrow",label:"Tomorrow"},{id:"tab-btn-5",value:"this_week",label:"This week"},{id:"tab-btn-6",value:"this_month",label:"This month"}],b=r.a.useState(m[2].value),j=Object(u.a)(b,2),p=j[0],f=j[1],v=[{eventKey:"without_completed_forms",title:"Without Completed Forms",numberOfRecords:a.tableParams.total,disabled:!1,component:Object(y.jsx)(_r,{tableName:"withoutCompletedForms"})},{eventKey:"require_eligibility_check",title:"Require Eligibility Check",numberOfRecords:n.tableParams.total,disabled:!1,component:Object(y.jsx)(_r,{tableName:"requireEligibilityCheck"})},{eventKey:"withDeductible",title:"With Deductible",numberOfRecords:s.tableParams.total,disabled:!1,component:Object(y.jsx)(_r,{tableName:"withDeductible"})},{eventKey:"with_negative_credit_card_balance",title:"With Negative Balance",numberOfRecords:i.tableParams.total,disabled:!1,component:Object(y.jsx)(_r,{tableName:"withNegativeCreditCardBalance"})},{eventKey:"with_no_future_appointments",title:"Without Future Appointments",numberOfRecords:c.tableParams.total,disabled:!1,component:Object(y.jsx)(_r,{tableName:"withNoFutureAppointments"})},{eventKey:"cash_payment",title:"Cash Payment",numberOfRecords:o.tableParams.total,disabled:!1,component:Object(y.jsx)(_r,{tableName:"cashPayment"})}],O=function(e){return"".concat(e.first_name," ").concat(e.last_name," ").concat(e.middle_initial||"")};return r.a.useEffect((function(){var a;d.forEach((function(t){e(tr({tableName:t,value:[]})),e(ar({tableName:t,value:!1}))})),function(e){var t=e.startDate,a=e.endDate;return h.a.get("/api/secretaries-dashboard/important-for-today?start_date=".concat(t,"&end_date=").concat(a))}("previous_week"===(a=p)?{startDate:Da().subtract(1,"week").startOf("isoWeek").format("YYYY-MM-DD"),endDate:Da().subtract(1,"week").endOf("isoWeek").format("YYYY-MM-DD")}:"yesterday"===a?{startDate:Da().subtract(1,"day").format("YYYY-MM-DD"),endDate:Da().subtract(1,"day").format("YYYY-MM-DD")}:"today"===a?{startDate:Da().format("YYYY-MM-DD"),endDate:Da().format("YYYY-MM-DD")}:"tomorrow"===a?{startDate:Da().add(1,"day").format("YYYY-MM-DD"),endDate:Da().add(1,"day").format("YYYY-MM-DD")}:"this_week"===a?{startDate:Da().startOf("isoWeek").format("YYYY-MM-DD"),endDate:Da().endOf("isoWeek").format("YYYY-MM-DD")}:"this_month"===a?{startDate:Da().startOf("month").format("YYYY-MM-DD"),endDate:Da().endOf("month").format("YYYY-MM-DD")}:void 0).then((function(a){var n=a.data;Object.keys(n).forEach((function(a){var s=function(e){return"without_forms"===e?"withoutCompletedForms":"with_required_eligibility"===e?"requireEligibilityCheck":"with_deductible"===e?"withDeductible":"with_negative_balance"===e?"withNegativeCreditCardBalance":"patient_last_appointments"===e?"withNoFutureAppointments":"with_cash"===e?"cashPayment":void 0}(a),r=function(e,t){if("withoutCompletedForms"===e){var a=[];return t.forEach((function(e){var t;a.push({id:e.id,appointment_status:e.status.status,patient_name:O(e.patient),patient_id:e.patient.id,patient_status:e.patient.status,date:e.date_of_service.date,time:e.date_of_service.time,therapist_name:null===(t=e.provider)||void 0===t?void 0:t.provider_name,first_visit:e.patient.first_visit_date?Da(e.patient.first_visit_date,"YYYY-MM-DD").format("MM/DD/YYYY"):null,count_visits:e.patient.appointments_count,form_status:e.patient.last_document_request})})),a}if("requireEligibilityCheck"===e||"withDeductible"===e){var n=[];return t.forEach((function(e){var t;n.push({id:e.id,appointment_status:e.status.status,patient_name:O(e.patient),patient_id:e.patient.id,patient_status:e.patient.status,date:e.date_of_service.date,time:e.date_of_service.time,therapist_name:null===(t=e.provider)||void 0===t?void 0:t.provider_name,credit_card:e.patient.credit_card,last_eligibility_check:e.patient.alert?Da(e.patient.alert.date_created,"YYYY-MM-DD").format("MM/DD/YYYY"):"-",message:e.patient.alert?e.patient.alert.message:"-",co_pay:e.patient.alert?e.patient.alert.co_pay:"-",deductible:e.patient.alert?e.patient.alert.deductible:"-",deductible_met:e.patient.alert?e.patient.alert.deductible_met:"-",deductible_remaining:e.patient.alert?e.patient.alert.deductible_remaining:"-",insurance_pay:e.patient.alert?e.patient.alert.insurance_pay:"-",reference_number:e.patient.alert&&e.patient.alert.reference_number||"-"})})),n}if("withNegativeCreditCardBalance"===e){var s=[];return t.forEach((function(e){var t;s.push({id:e.id,appointment_status:e.status.status,patient_name:O(e.patient),patient_id:e.patient.id,patient_status:e.patient.status,date:e.date_of_service.date,time:e.date_of_service.time,therapist_name:null===(t=e.provider)||void 0===t?void 0:t.provider_name,first_visit:e.patient.first_visit_date?Da(e.patient.first_visit_date,"YYYY-MM-DD").format("MM/DD/YYYY"):null,count_visits:e.patient.appointments_count,credit_card:e.patient.credit_card,current_balance:(e.patient.preprocessed_balance&&e.patient.preprocessed_balance.balance_after_transaction?e.patient.preprocessed_balance.balance_after_transaction:0)/100+"$",co_payment:(e.patient.visit_copay?e.patient.visit_copay:0)+"$"})})),s}if("withNoFutureAppointments"===e){var r=[];return t.forEach((function(e){var t;r.push({id:e.id,appointment_status:e.status.status,patient_name:O(e.patient),patient_id:e.patient.id,patient_status:e.patient.status,date:e.date_of_service.date,time:e.date_of_service.time,therapist_name:null===(t=e.provider)||void 0===t?void 0:t.provider_name,first_visit:e.patient.first_visit_date?Da(e.patient.first_visit_date,"YYYY-MM-DD").format("MM/DD/YYYY"):null,count_visits:e.patient.appointments_count})})),r}if("cashPayment"===e){var i=[];return t.forEach((function(e){var t;i.push({id:e.id,appointment_status:e.status.status,patient_name:O(e.patient),patient_id:e.patient.id,patient_status:e.patient.status,date:e.date_of_service.date,time:e.date_of_service.time,therapist_name:null===(t=e.provider)||void 0===t?void 0:t.provider_name,first_visit:e.patient.first_visit_date?Da(e.patient.first_visit_date,"YYYY-MM-DD").format("MM/DD/YYYY"):null,credit_card:e.patient.credit_card,co_payment:(e.patient.visit_copay?e.patient.visit_copay:0)+"$"})})),i}}(s,n[a].data);e(tr({tableName:s,value:r}));var i=n[a].meta.total;e(sr({tableName:s,value:i}));var c=t[s],o=Math.ceil(i/c.tableParams.per_page);o!==c.tableData.last_page&&e(nr({tableName:s,value:o})),e(ar({tableName:s,value:!0}))}))}))}),[p]),Object(y.jsxs)("div",{className:g()("dashboardCard","p-3 pt-0"),children:[Object(y.jsxs)("div",{className:"d-flex align-items-center justify-content-between pt-3 pb-3",children:[Object(y.jsx)("h1",{className:xr.a.title,children:"Important for today"}),Object(y.jsx)(Ge,{type:"radio",name:"tabs-buttons",value:p,onChange:function(e){f(e)},buttons:m})]}),Object(y.jsx)(vr,{defaultActiveKey:v[0].eventKey,tabs:v})]})},yr=function(e){var t=e.tableName,a=Object(l.c)((function(e){return e})).secretaryDashboard[t];return Object(y.jsx)("div",{className:"dashboard-table-wrapper",children:Object(y.jsx)(_t,{columns:a.tableColumns,data:a.tableData,dataIsLoaded:a.dataIsLoaded,options:{applyMinHeightToHeader:!0}})})},Nr=function(){var e=Object(l.c)((function(e){return e.secretaryDashboard})).newPatients;return Object(y.jsx)("div",{className:"dashboard-table-wrapper",children:Object(y.jsx)(_t,{columns:e.tableColumns,data:e.tableData,dataIsLoaded:e.dataIsLoaded,options:{applyMinHeightToHeader:!0}})})},Cr=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})).secretaryDashboard,a=t.newPatients,n=t.inactivePatients,s=t.lostPatients,i=[{eventKey:"new_patients",title:"New Patients Last 3 Months",numberOfRecords:a.tableParams.total,disabled:!1,component:Object(y.jsx)(Nr,{})},{eventKey:"inactive_patients",title:"Inactive Patients Last 3 Months",numberOfRecords:n.tableParams.total,disabled:!1,component:Object(y.jsx)(yr,{tableName:"inactivePatients"})},{eventKey:"lost_patients",title:"Lost Patients Last 3 Months",numberOfRecords:s.tableParams.total,disabled:!1,component:Object(y.jsx)(yr,{tableName:"lostPatients"})}],c=function(e,t){return"".concat(e," ").concat(t)},o=function(e){return{status:e.status.status,hex_color:e.status.hex_color,status_updated_at:e.status_updated_at}};return r.a.useEffect((function(){h.a.get("/api/secretaries-dashboard/new-lost-patients").then((function(a){var n=a.data;Object.keys(n).forEach((function(a){var s=function(e){return"new_patients"===e?"newPatients":"inactive_patients"===e?"inactivePatients":"lost_patients"===e?"lostPatients":void 0}(a),r=function(e,t){if("newPatients"===e){var a=[];return t.forEach((function(e){a.push({id:e.id,patient_id:e.id,patient_name:c(e.first_name,e.last_name),patient_status:o(e),patient_status_updated_at:e.status_updated_at,patient_creation_date:Da(e.created_patient_date||e.created_at).format("MM/DD/YYYY"),count_calls:e.ringcentral_call_logs_count,date_of_last_call:e.last_ringcentral_call_log?Da(e.last_ringcentral_call_log.created_at).format("MM/DD/YYYY"):"-",caller:e.last_ringcentral_call_log&&e.last_ringcentral_call_log.user&&e.last_ringcentral_call_log.user.meta?c(e.last_ringcentral_call_log.user.meta.firstname,e.last_ringcentral_call_log.user.meta.lastname):"-",comment:e.last_ringcentral_call_log&&e.last_ringcentral_call_log.comment?e.last_ringcentral_call_log.comment:"-",cell_phone:e.cell_phone})})),a}if("inactivePatients"===e||"lostPatients"===e){var n=[];return t.forEach((function(e){var t,a;n.push({id:e.id,patient_id:e.id,patient_name:c(e.first_name,e.last_name),patient_status:o(e),patient_status_updated_at:e.status_updated_at,therapist_name:(null===(t=e.last_appointment)||void 0===t?void 0:t.provider.provider_name)||"-",count_visits:e.appointments_count,date_of_last_visit:(null===(a=e.last_appointment)||void 0===a?void 0:a.date_of_service.date)||"-"})})),n}}(s,n[a].data);e(tr({tableName:s,value:r}));var i=n[a].meta.count;e(sr({tableName:s,value:i}));var l=t[s],d=Math.ceil(i/l.tableParams.per_page);d!==l.tableData.last_page&&e(nr({tableName:s,value:d})),e(ar({tableName:s,value:!0}))}))}))}),[]),Object(y.jsxs)("div",{className:g()("dashboardCard","p-3"),children:[Object(y.jsx)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:Object(y.jsx)("h1",{className:xr.a.title,children:"New/Lost Patients"})}),Object(y.jsx)(vr,{defaultActiveKey:i[0].eventKey,tabs:i})]})},wr=function(){var e=Object(l.b)();return r.a.useEffect((function(){Qa().then((function(t){var a=t.data;e(rn({numbers:a}))})).catch((function(e){console.log(e)}))}),[]),Object(y.jsx)(P,{children:Object(y.jsx)("div",{className:"container-fluid ".concat(xr.a.secretaryDashboard),children:Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("div",{className:"col-3",children:Object(y.jsx)(br,{})}),Object(y.jsxs)("div",{className:"col-9 d-flex flex-column gap-3",children:[Object(y.jsx)(gr,{}),Object(y.jsx)(Cr,{})]})]})})})},Dr=a.p+"static/media/edit.ab2ff7b3.svg",Sr=a.p+"static/media/filter.04315454.svg",Pr=a(139),kr=a.n(Pr),Ir=function(e){var t=e.filters,a=e.setFilters,n=Object(s.useRef)(null),r=Object(s.useRef)(null),i=Object(l.c)((function(e){return e.newPatientsDashboard})).sources,c=Object(s.useState)(!1),o=Object(u.a)(c,2),d=o[0],m=o[1],b=i.reduce((function(e,t){return e[t.channel_id]||(e[t.channel_id]={channelName:t.channel.name,options:[]}),e[t.channel_id].options.push(t),e}),{}),j=t.source.map((function(e){var t=i.find((function(t){return t.id===e}));return t?t.name:""})).join(", "),p=function(e,n){var s=Number(e.target.value);e.target.checked?function(e,n){var s=Ts.a.cloneDeep(t);s[e].push(n),a(s)}(n,s):function(e,n){var s=Ts.a.cloneDeep(t);s[e]=s[e].filter((function(e){return e!==n})),a(s)}(n,s)};Object(C.j)(r,(function(e){n.current&&n.current.contains(e.target)||m(!1)}));return i?Object(y.jsxs)("div",{className:kr.a.filterMultipleSelect,children:[Object(y.jsxs)("div",{ref:n,className:g()(kr.a.title,d&&kr.a.showOptions),onClick:function(){m(!d)},children:[Object(y.jsxs)("span",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("img",{src:Sr,alt:"filter-icon"})," Filter by:"," ",Object(y.jsxs)("b",{children:[" ",j]})]}),Object(y.jsx)(mt.a,{className:kr.a.arrow,path:d?dt.j:dt.i,size:1})]}),d&&Object(y.jsxs)("div",{ref:r,className:kr.a.options,children:[Object(y.jsxs)("div",{className:kr.a.option,children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",id:"select-all-checkbox",checked:t.source.length===i.length,onChange:function(){var e=i.map((function(e){return e.id}));t.source.length!==i.length?a(Object(ct.a)(Object(ct.a)({},t),{},{source:e})):a(Object(ct.a)(Object(ct.a)({},t),{},{source:[]}))}}),Object(y.jsx)("label",{htmlFor:"select-all-checkbox",children:"Select all"})]}),Object.entries(b).map((function(e){var a=Object(u.a)(e,2),n=a[0],s=a[1],r=s.channelName,i=s.options;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h5",{className:"m-0 ps-2",children:r}),i.map((function(e,a){return Object(y.jsxs)("div",{className:kr.a.option,children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",value:e.id,id:e.id,checked:t.source.includes(e.id),onChange:function(e){return p(e,"source")}}),Object(y.jsx)("label",{htmlFor:e.id,children:e.name})]},a)}))]},n)}))]})]}):Object(y.jsx)(y.Fragment,{})},Ar=a(389),Mr=a(388),Tr=a.p+"static/media/bin-white.b3baf238.svg",Fr=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.newPatientsDashboard})),a=t.removeCardData,n=t.eventBus,r=Object(s.useState)(""),i=Object(u.a)(r,2),c=i[0],o=i[1],d=Object(s.useState)(!1),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(!1),f=Object(u.a)(p,2),v=f[0],O=f[1],x=function(){e(ls({data:null})),o(""),j(!1)},_=function(){O(!0),function(e){var t=e.id,a=e.data;return h.a.post("/api/new-patients-crm/inquiries/".concat(t,"/archive"),a)}({id:a.cardId,data:{comment:c}}).then((function(t){e(is({laneId:a.laneId,cardId:a.cardId})),n.publish({type:"REMOVE_CARD",laneId:a.laneId,cardId:a.cardId}),e(os({data:null})),x()})).finally((function(){O(!1)}))};return a?Object(y.jsxs)(re.a,{show:a,onHide:x,className:"custom-modal",centered:!0,children:[Object(y.jsxs)(Ar.a,{closeButton:!0,children:[Object(y.jsx)("div",{className:"text-danger",children:"Archive inquiry:"}),Object(y.jsx)("div",{className:"name",children:a.patientName})]}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsxs)("div",{className:"fs-16",children:['Are you sure you want to archive inquiry for: "',a.patientName,'"']}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:Object(y.jsxs)("div",{children:["Enter your comment"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]})}),Object(y.jsx)("input",{placeholder:"Add your comment...",className:g()("form-control",b&&"is-invalid"),style:{backgroundColor:"#fcfcfc"},autoFocus:!0,value:c,onChange:function(e){o(e.target.value),j(!1)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Comment field is required."})]}),Object(y.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:x,children:"Cancel"}),Object(y.jsx)("button",{onClick:function(){c?_():j(!0)},className:"btn btn-large btn-danger d-flex align-items-center justify-content-center gap-1",style:{width:"125px"},disabled:v,children:v?Object(y.jsx)(lr,{color:"#fff",size:"small"}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{src:Tr,alt:"bin-icon"}),Object(y.jsx)("div",{children:"Archive"})]})})]})]})]}):Object(y.jsx)(y.Fragment,{})},Lr=a(694),qr=a(401),Yr=a(698),Rr=a(34),Er=a.n(Rr),Hr=a(32),Br=a(421),zr=a.p+"static/media/add-patient-inquiry.924e1458.svg",Ur=a.p+"static/media/plus.285ecca2.svg",Vr=a(290),Wr=a.n(Vr),Kr=function(e){var t=e.innerProps,a=e.value;return Object(y.jsx)("div",Object(ct.a)(Object(ct.a)({},t),{},{className:Wr.a.insurance,children:Object(y.jsxs)("div",{className:"d-flex flex-column gap-2 p-2 ps-4 pe-4",children:[Object(y.jsx)("div",{className:Wr.a.name,children:a.insurance}),Object(y.jsxs)("div",{className:Wr.a.address,children:[a.address_line_1,", ",a.city,", ",a.state,","," ",a.zip]})]})}))},Gr=a(117),Zr=a.n(Gr),Jr=function(e){var t=e.formData,a=e.setFormData,n=Object(l.b)(),r=Object(s.useRef)(null),i=Object(s.useRef)(null),c=Object(l.c)((function(e){return e.newPatientsDashboard})).diagnoses,o=Object(s.useState)(!1),d=Object(u.a)(o,2),m=d[0],b=d[1],j=Object(s.useState)(""),p=Object(u.a)(j,2),f=p[0],h=p[1];Object(s.useEffect)((function(){f&&(Jn({query:f}).then((function(e){return n(Ns({data:e.data.diagnoses}))})),b(!0))}),[f]),Object(C.j)(i,(function(e){r.current&&r.current.contains(e.target)||b(!1)}));return Object(y.jsxs)("div",{className:Zr.a.diagnosesSelect,children:[Object(y.jsxs)("div",{ref:r,className:g()(Zr.a.header,m&&Zr.a.showOptions),onClick:function(){b(!m)},children:[t.diagnoses.map((function(e){return Object(y.jsx)("div",{className:Zr.a.diagnose,children:e.full_name})})),Object(y.jsxs)("div",{className:Zr.a.inputSelect,children:[Object(y.jsx)("input",{value:f,onChange:function(e){return h(e.target.value)},className:"form-control"}),Object(y.jsx)(mt.a,{className:Zr.a.arrow,path:m?dt.j:dt.i,size:1})]})]}),m&&Object(y.jsx)("div",{ref:i,className:Zr.a.options,children:c.length?c.map((function(e){return Object(y.jsxs)("div",{className:Zr.a.option,children:[Object(y.jsx)("input",{type:"checkbox",className:"form-check-input",value:e,id:"option-".concat(e.id),checked:t.diagnoses.some((function(t){return t.id===e.id})),onChange:function(n){return function(e,n){if(e.target.checked){var s=[].concat(Object(it.a)(t.diagnoses),[n]);a(Object(ct.a)(Object(ct.a)({},t),{},{diagnoses:s}))}else{var r=t.diagnoses.filter((function(e){return e.id!==n.id}));a(Object(ct.a)(Object(ct.a)({},t),{},{diagnoses:r}))}}(n,e)}}),Object(y.jsx)("label",{htmlFor:"option-".concat(e.id),children:e.full_name})]},e.id)})):Object(y.jsx)("div",{className:g()(Zr.a.noData,"p-2"),children:"No data"})})]})},Xr={pos:"",cpt:"",modifier_a:"",modifier_b:"",modifier_c:"",modifier_d:"",diagnose_pointer:"",isUserChangesDiagnosePointer:!1,isUserChangesModifierA:!1,isUserChangesCharge:!1,isDiagnosePointerError:!1,charge:"",days_or_units:"",patient_insurances_procedure_id:""},Qr={inquirable_id:"",auth_number:"",first_name:"",last_name:"",middle_initial:"",date_of_birth:"",sex:"",preferred_language_id:"",email:"",secondary_email:"",cell_phone:"",home_phone:"",work_phone:"",preferred_phone:"",visits_auth:0,visits_auth_left:0,address:"",address_2:"",city:"",state:"",zip:"",provider_id:"",insurance_id:"",eff_start_date:"",eff_stop_date:"",subscriber_id:"",is_self_pay:!1,self_pay:0,visit_copay:0,deductible:0,deductible_met:0,deductible_remaining:0,insurance_pay:0,eligibility_payer_id:"",plan_name:"",diagnoses:[],templates:[Ts.a.cloneDeep(Xr)],therapist_manage_timesheet:!1,is_payment_forbidden:!1,source_id:null,therapy_type_id:null},$r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.backgroundColor,a=e.fontSize;return{control:function(e,a){return Object(ct.a)(Object(ct.a)({},e),{},{backgroundColor:t||"#FFFFFF",minWidth:"115px",border:a.isFocused?"1px solid #A4C9E5":"is-invalid"===a.selectProps.className?"1px solid red":"",boxShadow:a.isFocused?"0px 0px 1px 4px #CADEEF":""})},valueContainer:function(e,t){return Object(ct.a)(Object(ct.a)({},e),{},{fontSize:a||"16px",fontWeight:"400",height:"fit-content",overflow:"hidden"})},menu:function(e){return Object(ct.a)(Object(ct.a)({},e),{},{zIndex:9999})}}},ei=$r({backgroundColor:"#F7F9FC"}),ti=[{id:0,value:"M",text:"Male"},{id:1,value:"F",text:"Female"},{id:2,value:"U",text:"Unknown"}],ai=["AA","AE","AP","AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","FM","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MH","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","PW","RI","SC","SD","TN","TX","UT","VA","VI","VT","WA","WI","WV","WY"],ni=a(58),si={value:"",label:""},ri=function(e,t){return oi(e,"value","label")(t)},ii=function(e,t){if(e.templates[t]&&e.templates[t].cpt){var a=e.templates[t].cpt;return{value:a,label:a}}return{value:"",label:""}},ci=function(e,t,a){return function(n){var s=Array.isArray(e)?e.find((function(e){return e[t]===n})):e;return s?{value:s[t],label:s[a]}:si}},oi=function(e,t,a){return function(n){if(!e||!n)return si;var s,r,i=Object(ni.a)(e);try{for(i.s();!(r=i.n()).done;){if(s=r.value.options.find((function(e){return e[t]===n})))break}}catch(c){i.e(c)}finally{i.f()}return s?{value:s[t],label:s[a]}:si}},li=a(126),di=a.n(li),ui=a(706),mi=a(420),bi=Object(mi.a)({components:{MuiInputBase:{styleOverrides:{root:{height:"44px",backgroundColor:"rgb(247, 249, 252)",fontSize:"14px"}}},MuiOutlinedInput:{styleOverrides:{root:function(e){var t=e.ownerState;return Object(ct.a)({},t.focused&&{boxShadow:"0 0 0 0.25rem rgba(45, 133, 201, 0.25)"})},notchedOutline:function(e){e.ownerState;return{border:"1px solid #ced4da !important"}}}}}}),ji="deductible",pi="deductible_met",fi="deductible_remaining",hi=r.a.memo((function(e){var t,a=e.show,n=e.setShow,s=e.formName,r=e.formData,i=e.setFormData,c=Object(l.b)(),o=Object(l.c)((function(e){return e.newPatientsDashboard})),d=o.languages,u=o.providersData,m=o.insurancesData,b=o.eligibilityPayersData,j=o.insuranceProcedures,p=o.preferredPhoneList,f=function(e,t){return ci(e,"id","title")(t)}(d,r.preferred_language_id),h=function(e,t){if(t.provider_id){var a=e.find((function(e){return e.id===t.provider_id}));return ci(e,"id","provider_name")(a.id)}return t.primary_provider?ci(e,"id","provider_name")(t.primary_provider.id):si}(u.list,r),v=function(e,t){return ci(e,"value","text")(t)}(p,r.preferred_phone),O=(t=r.state)?{value:t,label:t}:si,x=function(e,t){if(t.insurance)return ci(t.insurance,"id","insurance")(t.insurance.id);if(t.insurance_id){var a=e.find((function(e){return e.id===t.insurance_id}));return ci(e,"id","insurance")(a.id)}return si}(m.list,r),_=function(e,t){if(t.eligibility_payer)return ci(e,"id","name")(t.eligibility_payer.id);if(t.eligibility_payer_id){var a=e.find((function(e){return e.id===t.eligibility_payer_id}));return ci(e,"id","name")(a.id)}return si}(b.list,r),N="add-additional-patient-information"===s?"Add Additional Patient Information":"add-insurance-information"===s?"Add Insurance Information":"add-diagnosis-codes"===s?"Add Diagnosis Codes":"add-templare-billiable-line-items"===s?"Add Template Billable Line Items":"",C=function(){var e=m.pageIndex+1,t=m.pageSize;Gn({page:e,limit:t}).then((function(e){return c(_s({data:Object(ct.a)(Object(ct.a)({},m),{},{list:[].concat(Object(it.a)(m.list),Object(it.a)(e.data.data)),pageIndex:e.data.current_page})}))}))},w=function(){var e=r.templates;e.push(Xr),i(Object(ct.a)(Object(ct.a)({},r),{},{templates:e}))},D=function(e){var t=r[e].toString().replace(/^0+/,""),a=P(t);(!a||a<=0)&&(a=0);var n=Object(ct.a)(Object(ct.a)({},r),{},Object(Fs.a)({},e,a));i(n),S(e,n)},S=function(e,t){if([ji,pi,fi].includes(e)){var a=Ts.a.cloneDeep(t),n=Number(a[e]),s=a.deductible;n>s&&(a[e]=s),a[e]=P(a[e]);var r=P(Number(a.deductible_met)+Number(a.deductible_remaining));e===ji&&a[e]!==r&&(a.deductible_met=0,a.deductible_remaining=s),e===pi&&(a.deductible_remaining=P(s-a[e])),e===fi&&(a.deductible_met=P(s-a[e])),i(a)}},P=function(e){return Number(e).toFixed(2)};return Object(y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:di.a.showFormButton,onClick:function(){return n(!a)},children:[Object(y.jsx)("div",{children:N}),Object(y.jsx)(mt.a,{path:a?dt.j:dt.i,size:1})]}),a&&"add-additional-patient-information"===s&&Object(y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Preferred Language"}),Object(y.jsx)(Hr.a,{value:f,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{preferred_language_id:e.value}))},options:d.map((function(e){return{value:e.id,label:e.title}})),isSearchable:!1,styles:ei})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Primary care provider"}),Object(y.jsx)(Hr.a,{value:h,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{provider_id:e.value}))},options:u.list.map((function(e){return{value:e.id,label:e.provider_name}})),onMenuScrollToBottom:function(){var e=u.pageIndex+1,t=u.pageSize;Kn({page:e,limit:t}).then((function(e){var t=[].concat(Object(it.a)(u.list),Object(it.a)(e.data.providers.data));c(xs({data:Object(ct.a)(Object(ct.a)({},u),{},{list:t,pageIndex:e.data.providers.current_page})}))}))},isSearchable:!1,styles:ei})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Secondary email"}),Object(y.jsx)("input",{className:"form-control",value:r.secondary_email,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{secondary_email:e.target.value}))}})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Home phone"}),Object(y.jsx)(hn,{phone:r.home_phone,setPhone:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{home_phone:e}))},styles:{backgroundColor:"#F7F9FC"}})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Work phone"}),Object(y.jsx)(hn,{phone:r.work_phone,setPhone:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{work_phone:e}))},styles:{backgroundColor:"#F7F9FC"}})]})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Preferred phone"}),Object(y.jsx)(Hr.a,{value:v,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{preferred_phone:e.value}))},options:p.map((function(e){return{value:e.value,label:e.text}})),isSearchable:!1,styles:ei})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Address line 1"}),Object(y.jsx)("input",{value:r.address,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{address:e.target.value}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Address line 2"}),Object(y.jsx)("input",{value:r.address_2,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{address_2:e.target.value}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"City"}),Object(y.jsx)("input",{value:r.city,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{city:e.target.value}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"State"}),Object(y.jsx)(Hr.a,{value:O,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{state:e.value}))},options:ai.map((function(e){return{value:e,label:e}})),isSearchable:!1,styles:ei})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Zip"}),Object(y.jsx)("input",{value:r.zip,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{zip:e.target.value}))},className:"form-control"})]})]})]}),a&&"add-insurance-information"===s&&Object(y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Insurance CO"}),Object(y.jsx)(Hr.a,{value:x,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{insurance_id:e.value.id}))},options:m.list.map((function(e){return{value:e}})),onMenuScrollToBottom:C,isSearchable:!1,styles:ei,components:{Option:Kr}})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Subscriber ID"}),Object(y.jsx)("input",{value:r.subscriber_id,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{subscriber_id:e.target.value}))},className:"form-control"})]}),Object(y.jsx)("div",{className:"custom-form-group",children:Object(y.jsxs)("label",{htmlFor:"is_self_pay",className:"d-flex gap-2",style:{width:"fit-content"},children:[Object(y.jsx)("span",{children:"Pays out-of-pocket"}),Object(y.jsx)("input",{type:"checkbox",id:"is_self_pay",defaultChecked:r.is_self_pay,onChange:function(e){var t=e.target.checked,a=Object(ct.a)(Object(ct.a)({},r),{},{is_self_pay:t});t&&(a.is_payment_forbidden=!1),i(a)}})]})}),r.is_self_pay?Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Self-Pay"}),Object(y.jsx)("input",{disabled:r.is_payment_forbidden,type:"number",min:0,step:.01,value:r.self_pay,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{self_pay:e.target.value}))},onBlur:function(){return D("self_pay")},onWheel:function(e){return e.target.blur()},className:g()(di.a.inputNumber,"form-control")})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Co-Pay"}),Object(y.jsx)("input",{disabled:r.is_payment_forbidden,type:"number",min:0,step:.01,value:r.visit_copay,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{visit_copay:e.target.value}))},onBlur:function(){return D("visit_copay")},onWheel:function(e){return e.target.blur()},className:g()(di.a.inputNumber,"form-control")})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Insurance Pay"}),Object(y.jsx)("input",{disabled:r.is_payment_forbidden,type:"number",min:0,step:.01,value:r.insurance_pay,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{insurance_pay:e.target.value}))},onWheel:function(e){return e.target.blur()},onBlur:function(){return D("insurance_pay")},className:g()(di.a.inputNumber,"form-control")})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Deductible"}),Object(y.jsx)("input",{disabled:r.is_payment_forbidden,type:"number",min:0,step:.01,value:r.deductible,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{deductible:e.target.value}))},onWheel:function(e){return e.target.blur()},onBlur:function(){return D(ji)},className:g()(di.a.inputNumber,"form-control")})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Deductible Met"}),Object(y.jsx)("input",{disabled:r.is_payment_forbidden,type:"number",min:0,step:.01,value:r.deductible_met,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{deductible_met:e.target.value}))},onWheel:function(e){return e.target.blur()},onBlur:function(){return D(pi)},className:g()(di.a.inputNumber,"form-control")})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Remaining Deductible"}),Object(y.jsx)("input",{disabled:r.is_payment_forbidden,type:"number",min:0,step:.01,value:r.deductible_remaining,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{deductible_remaining:e.target.value}))},onWheel:function(e){return e.target.blur()},onBlur:function(){return D(fi)},className:g()(di.a.inputNumber,"form-control")})]})]})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Health Plan Elig. Benefit Co. ID"}),Object(y.jsx)(Hr.a,{value:_,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{eligibility_payer_id:e.value}))},options:b.list.map((function(e){return{value:e.id,label:e.name}})),onMenuScrollToBottom:C,isSearchable:!1,styles:ei})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Plan Name"}),Object(y.jsx)("input",{value:r.plan_name,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{plan_name:e.target.value}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Authorization Number"}),Object(y.jsx)("input",{value:r.auth_number,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{auth_number:e.target.value}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"No. of Visits Authorized"}),Object(y.jsx)("input",{value:r.visits_auth,type:"number",onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{visits_auth:e.target.value,visits_auth_left:e.target.value}))},className:g()(di.a.inputNumber,"form-control")})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Eff. Start Date"}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:bi,children:Object(y.jsx)(Yr.a,{value:r.eff_start_date?Er()(r.eff_start_date):null,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{eff_start_date:Er()(e).format("YYYY-MM-DD")}))},openTo:"year"})})})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Eff. Stop Date"}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:bi,children:Object(y.jsx)(Yr.a,{value:r.eff_stop_date?Er()(r.eff_stop_date):null,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{eff_stop_date:Er()(e).format("YYYY-MM-DD")}))},openTo:"year"})})})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{id:"payment-forbidden-checkbox",checked:r.is_payment_forbidden,onChange:function(e){var t=e.target.checked,a=Object(ct.a)(Object(ct.a)({},r),{},{is_payment_forbidden:t});t&&(a.self_pay=0,a.visit_copay=0,a.deductible=0,a.deductible_met=0,a.deductible_remaining=0,a.insurance_pay=0),i(a)},type:"checkbox",className:"form-check-input",disabled:r.is_self_pay}),Object(y.jsx)("label",{htmlFor:"payment-forbidden-checkbox",className:"form-check-label",children:"Payment Forbidden"})]})]}),a&&"add-diagnosis-codes"===s&&Object(y.jsx)("div",{className:"d-flex flex-column gap-4",children:Object(y.jsxs)("div",{className:"position-relative custom-form-group",children:[Object(y.jsx)("label",{children:"Diagnosis Codes"}),Object(y.jsx)(Jr,{formData:r,setFormData:i})]})}),a&&"add-templare-billiable-line-items"===s&&r.templates.map((function(e,t){return Object(y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"w-50 custom-form-group",children:[Object(y.jsx)("label",{children:"POS"}),Object(y.jsx)("input",{value:r.templates[t].pos,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{pos:e.target.value}):a}))}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"w-50 custom-form-group",children:[Object(y.jsx)("label",{children:"CPT"}),Object(y.jsx)(Hr.a,{value:ii(r,t),onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{cpt:e.value}):a}))}))},options:j.filter((function(e){return e.code})).map((function(e){return{value:e.code,label:e.code}})),styles:ei})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Modifler A"}),Object(y.jsx)("input",{value:r.templates[t].modifier_a,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{modifier_a:e.target.value}):a}))}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Modifler B"}),Object(y.jsx)("input",{value:r.templates[t].modifier_b,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{modifier_b:e.target.value}):a}))}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Modifler C"}),Object(y.jsx)("input",{value:r.templates[t].modifier_c,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{modifier_c:e.target.value}):a}))}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Modifler D"}),Object(y.jsx)("input",{value:r.templates[t].modifier_d,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{modifier_d:e.target.value}):a}))}))},className:"form-control"})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Diag. pointer"}),Object(y.jsx)("input",{value:r.templates[t].diagnose_pointer,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{diagnose_pointer:e.target.value}):a}))}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Line Charges"}),Object(y.jsx)("input",{value:r.templates[t].charge,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{charge:e.target.value}):a}))}))},className:"form-control"})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Day or Units"}),Object(y.jsx)("input",{value:r.templates[t].days_or_units,onChange:function(e){return i(Object(ct.a)(Object(ct.a)({},r),{},{templates:r.templates.map((function(a,n){return n===t?Object(ct.a)(Object(ct.a)({},a),{},{days_or_units:e.target.value}):a}))}))},className:"form-control"})]})]}),Object(y.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[Object(y.jsx)("button",{onClick:function(){return function(e){var t=r.templates.filter((function(t,a){return a!==e}));i(Object(ct.a)(Object(ct.a)({},r),{},{templates:t}))}(t)},disabled:1===r.templates.length,className:"btn btn-danger d-flex align-items-center justify-content-center",style:{width:"44px",height:"44px"},children:Object(y.jsx)("img",{src:Tr,alt:"delete-icon"})}),Object(y.jsx)("button",{onClick:w,className:"btn btn-primary d-flex align-items-center justify-content-center",style:{width:"44px",height:"44px"},children:Object(y.jsx)("img",{src:Ur,alt:"plus-icon"})})]})]},t)}))]})})),vi=hi,Oi=a(213),xi=a.n(Oi),_i=function(e){var t=e.patient,a=function(){var e=Da(t.date_of_birth),a=Da().diff(e,"years");return"".concat(a," years")}(),n=function(){var e="Not specified";return"M"===t.sex&&(e="Male"),"F"===t.sex&&(e="Female"),"U"===t.sex&&(e="Unknown"),e}(),s=function(){var e="Not created";return t.status&&(e=t.status.status),e}(),r=function(){var e="#EA3323";return t.status&&(e="#".concat(t.status.hex_color)),e}();return Object(y.jsx)("div",{className:xi.a.patient,children:Object(y.jsxs)("div",{className:"d-flex justify-content-between p-2 ps-3 pe-3",children:[Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{className:xi.a.name,children:t.full_name}),Object(y.jsx)("div",{className:xi.a.email,children:t.email})]}),Object(y.jsxs)("div",{className:"d-flex flex-column align-items-end gap-1",children:[Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsxs)("div",{children:[n,","]}),Object(y.jsx)("div",{children:a})]}),Object(y.jsx)("div",{className:xi.a.status,style:{color:r},children:s})]})]})})},gi=a(335),yi=a.n(gi),Ni=function(e){var t=e.searchQuery,a=e.setSelectedPatient,n=e.close,r=Object(l.b)(),i=Object(s.useRef)(null),c=Object(l.c)((function(e){return e.newPatientsDashboard})).patientsData;Object(C.j)(i,(function(){return n()}));return Object(y.jsx)("div",{ref:i,className:yi.a.existingPatientDialog,onScroll:function(e){var a=e.target;a.scrollHeight-a.scrollTop===a.clientHeight&&function(){var e={page:c.pageIndex+1,limit:c.pageSize,search_query:t};Hn(e).then((function(e){var t=Object.values(e.data.data),a=[].concat(Object(it.a)(c.list),t);r(Os({data:Object(ct.a)(Object(ct.a)({},c),{},{list:a,pageIndex:e.data.current_page})}))}))}()},children:Object(y.jsx)("div",{className:"d-flex flex-column",children:c.list.length?c.list.map((function(e){return Object(y.jsx)("div",{onClick:function(t){return a(e)},children:Object(y.jsx)(_i,{patient:e})},e.id)})):Object(y.jsx)("div",{className:g()(yi.a.noData,"p-3 text-black"),children:"No data"})})})},Ci=a(190),wi=a.n(Ci),Di=function(e){var t={};return 2===e.stage_id&&e.has_cancelled_appointment&&!e.next_appointment&&(t.backgroundColor=kn),(1===e.stage_id&&ya()().diff(e.stage_changed_at,"days")>=Dn||2===e.stage_id&&ya()().diff(e.stage_changed_at,"days")>=Sn)&&(t.backgroundColor=Pn,t.border="1.5px solid #EA3323"),{id:e.id.toString(),stageId:e.stage_id,inquirable:e.inquirable,isPatientCreated:e.is_patient_created,registrationMethod:e.registration_method,source:e.source,nextAppointment:e.next_appointment,rescheduledAppointment:e.rescheduled_appointment,createdAt:e.created_at,isArchived:e.is_archived,initialAppointmentIsCompleted:e.initial_appointment_is_completed,initialSurveyComplete:e.initial_survey_complete,secondSurveyComplete:e.second_survey_complete,onboardingCompleteComment:e.onboarding_complete_comment,stageChangedAt:e.stage_changed_at,onboardingDate:e.onboarding_date,onboardingTime:e.onboarding_time,onboardingPhone:e.onboarding_phone,style:t}},Si="Patient must have an active appointment",Pi="Patient did not have onboarding",ki="The date of the next appointment has already passed",Ii="Inquiry is transferred to this stage automatically",Ai=function(e){return"You cannot change inquiry stage due to following reason: ".concat(e)},Mi=(Ca={},Object(Fs.a)(Ca,2,{check:function(e){if(!e.isPatientCreated)return Ai("Patient not created")}}),Object(Fs.a)(Ca,3,{check:function(e){return e.onboardingCompleteComment?'Please transfer the inquiry card to the "Onboarding complete" stage directly':e.nextAppointment?ya.a.unix(e.nextAppointment.time).isBefore(ya()(),"day")?Ai(ki):null:Ai(Si)}}),Object(Fs.a)(Ca,5,{check:function(e){return e.onboardingCompleteComment?e.nextAppointment?ya.a.unix(e.nextAppointment.time).isBefore(ya()(),"day")?Ai(ki):null:Ai(Si):Ai(Pi)}}),Object(Fs.a)(Ca,6,{check:function(e){return e.initialAppointmentIsCompleted?e.onboardingCompleteComment?null:Ai(Pi):Ai("Patient has no completed appointments")}}),Object(Fs.a)(Ca,7,{check:function(e){return Ai(Ii)}}),Object(Fs.a)(Ca,8,{check:function(e){return Ai(Ii)}}),Ca),Ti=function(e){return e.isPatientCreated?e.nextAppointment?e.nextAppointment.provider:e.inquirable.past_appointment_provider:null},Fi=function(){var e=Object(l.b)(),t=Object(s.useContext)(se).enqueueNotification,a=Object(l.c)((function(e){return e.app})).userData,n=Object(l.c)((function(e){return e.newPatientsDashboard})),r=n.eventBus,i=n.showAddPatientModal,c=n.sources,o=n.providersData,d=n.patientsData,m=n.insurancesData,b=n.eligibilityPayersData,j=n.preferredPhoneList,p=n.registrationMethods,f=n.therapyTypes,v=Object(s.useState)(Qr),O=Object(u.a)(v,2),x=O[0],_=O[1],N=Object(s.useState)(!1),C=Object(u.a)(N,2),w=C[0],D=C[1],S=Object(s.useState)(!1),P=Object(u.a)(S,2),k=P[0],I=P[1],T=Object(s.useState)(!1),F=Object(u.a)(T,2),L=F[0],q=F[1],Y=Object(s.useState)(!1),R=Object(u.a)(Y,2),E=R[0],H=R[1],B=Object(s.useState)(!1),z=Object(u.a)(B,2),U=z[0],V=z[1],W=Object(s.useState)(""),K=Object(u.a)(W,2),G=K[0],Z=K[1],J=Object(s.useState)(null),X=Object(u.a)(J,2),Q=X[0],$=X[1],ee=Object(s.useState)(!1),te=Object(u.a)(ee,2),ae=te[0],ne=te[1],ie=Object(s.useState)({}),ce=Object(u.a)(ie,2),oe=ce[0],le=ce[1],de=Object(s.useState)(!1),ue=Object(u.a)(de,2),me=ue[0],be=ue[1],je=Object(s.useState)({}),pe=Object(u.a)(je,2),fe=pe[0],he=pe[1],ve=Object(s.useState)((function(){var e=c.reduce((function(e,t){return e[t.channel.name]||(e[t.channel.name]=[]),e[t.channel.name].push(t),e}),{});return Object.entries(e).map((function(e){var t=Object(u.a)(e,2);return{label:t[0],options:t[1].map((function(e){return{value:e.id,label:e.name}}))}}))})),Oe=Object(u.a)(ve,2),xe=Oe[0],_e=Oe[1],ge=Object(s.useState)(!1),ye=Object(u.a)(ge,2),Ne=ye[0],Ce=ye[1],we=[{fieldName:"first_name",errorText:"The first name field is required",forNewPatients:!1},{fieldName:"last_name",errorText:"The last name field is required",forNewPatients:!1},{fieldName:"date_of_birth",errorText:"The date of birth field is required",forNewPatients:!1},{fieldName:"sex",errorText:"The sex field is required",forNewPatients:!1},{fieldName:"cell_phone",errorText:"The phone field is required",forNewPatients:!1},{fieldName:"registration_method_id",errorText:"The registration method field is required",forNewPatients:!1},{fieldName:"source_id",errorText:"The source field is required",forNewPatients:!1}],De=function(e,t){return ci(e,"value","text")(t)}(ti,x.sex),Se=function(e,t){return ci(e,"id","name")(t)}(p,x.registration_method_id),Pe=function(e,t){return ci(e,"id","name")(t)}(f,x.therapy_type_id),ke=function(a){var n;be(!0),(n=a,h.a.post("api/new-patients-crm/inquiries",n)).then((function(t){var a=t.data;e(hs({id:a.source.id,name:a.source.name,channel_id:a.source.channel_id}));var n=Di(a);r.publish({type:"ADD_CARD",laneId:a.stage_id,card:n}),e(ss({laneId:a.stage_id,card:n})),Me()})).catch((function(e){var a;if(422===(null===(a=e.response)||void 0===a?void 0:a.status)){var n=e.response.data,s=Object.values(n.errors)[0];t("Error",s);for(var r=oe,i=0,c=Object.entries(n.errors);i<c.length;i++){var o=Object(u.a)(c[i],2),l=o[0],d=o[1];r[l]=d[0]}le(r)}})).finally((function(){be(!1)}))},Ie=function(e,t){Ae(e,t),he(ri(xe,t))},Ae=function(e,t){_(Object(ct.a)(Object(ct.a)({},x),{},Object(Fs.a)({},e,t))),oe[e]&&le(Object(ct.a)(Object(ct.a)({},oe),{},Object(Fs.a)({},e,"")))},Me=function(){e(cs({value:!1})),le({}),$(null),Z(""),_(Qr),he({}),I(!1),q(!1),H(!1),V(!1)},Te=function(){var e=Object(M.a)(Object(A.a)().mark((function e(a){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce(!0),(n=a,h.a.post("/api/new-patients-crm/sources",{name:n})).then((function(e){var t={value:e.data.id,label:e.data.name},a=e.data.channel?e.data.channel.name:"Other",n=xe.findIndex((function(e){return e.label===a})),s=[];if(-1!==n){if(-1!==xe[n].options.findIndex((function(e){return e.value===t.value})))return Ae("source_id",t.value),void he(ri(xe,t.value));(s=Object(it.a)(xe))[n].options.push(t)}else s=[].concat(Object(it.a)(xe),[{label:a,options:[t]}]);_e(s),Ae("source_id",t.value),he(ri(s,t.value))})).catch((function(e){t("Error","An error occured. Source wasn't created.")})).finally((function(){Ce(!1)}));case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var t=Object(M.a)(Object(A.a)().mark((function t(){var a,n,s,r,i,c,l,j,p;return Object(A.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([h.a.get("api/system/languages"),Hn({page:d.pageIndex,limit:d.pageSize}),Kn({page:o.pageIndex,limit:o.pageSize}),Gn({page:m.pageIndex,limit:m.pageSize}),Zn({page:b.pageIndex,limit:b.pageSize}),h.a.get("api/insurance-procedures"),Jn()]);case 2:a=t.sent,n=Object(u.a)(a,7),s=n[0],r=n[1],i=n[2],c=n[3],l=n[4],j=n[5],p=n[6],e(vs({languages:s.data.languages})),e(Os({data:Object(ct.a)(Object(ct.a)({},d),{},{list:r.data.data,pageIndex:r.data.current_page})})),e(xs({data:Object(ct.a)(Object(ct.a)({},o),{},{list:i.data.providers.data,pageIndex:i.data.providers.current_page})})),e(_s({data:Object(ct.a)(Object(ct.a)({},m),{},{list:c.data.data,pageIndex:c.data.current_page})})),e(gs({data:Object(ct.a)(Object(ct.a)({},b),{},{list:l.data.data,pageIndex:l.data.current_page})})),e(ys({data:j.data.insurance_procedures})),e(Ns({data:p.data.diagnoses})),D(!0);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){i&&!w&&Fe()}),[i]),Object(s.useEffect)((function(){if(!G.length)return ne(!1);if(G.length>1){var t={page:1,limit:d.pageSize,search_query:G};Hn(t).then((function(t){return e(Os({data:Object(ct.a)(Object(ct.a)({},d),{},{list:t.data.data,pageIndex:t.data.current_page})}))})),ne(!0)}}),[G]),Object(s.useEffect)((function(){if(Q){var e=Ts.a.cloneDeep(Q);if(e.inquiries.length&&(e.source_id=e.inquiries[0].source_id,e.registration_method_id=e.inquiries[0].registration_method_id),e.preferred_phone){var t=j.find((function(t){return t.id===e.preferred_phone}));e.preferred_phone=t.value}e.insurance_id=e.insurance?e.insurance.id:null,e.insurance_plan&&(e.plan_name=e.insurance_plan.name),e.templates.length||(e.templates=[Ts.a.cloneDeep(Xr)]),_(Object(ct.a)(Object(ct.a)({},e),{inquirable_id:e.id,therapist_manage_timesheet:!1}))}else _(Qr),Z("");le({}),ne(!1)}),[Q]),Object(y.jsxs)(re.a,{show:i,size:"lg",className:"custom-modal",backdrop:"true",onHide:Me,centered:!0,children:[Object(y.jsxs)(re.a.Header,{closeButton:!0,children:[Object(y.jsx)("img",{src:zr,alt:"add-patient-icon"}),Object(y.jsx)("div",{children:"Add patient inquiry"})]}),Object(y.jsx)(re.a.Body,{className:g()(wi.a.body),children:w?Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:wi.a.patientInfo,children:Object(y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Patient"}),Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsx)("input",{placeholder:"John Doe",value:Q?"".concat(Q.first_name," ").concat(Q.last_name):G,onFocus:function(){G.length>1&&ne(!0)},onChange:function(e){return Z(e.target.value)},className:g()("form-control",oe.inquirable_id&&"is-invalid")}),Q&&Object(y.jsx)("div",{className:wi.a.btnClearSelectedPatient,onClick:function(){return $(null)},children:Object(y.jsx)(mt.a,{className:wi.a.clearSelectedPatientIcon,path:dt.c,size:.9})}),ae&&Object(y.jsx)(Ni,{searchQuery:G,setSelectedPatient:$,close:function(){return ne(!1)}}),Object(y.jsx)("div",{className:"invalid-feedback ",children:oe.inquirable_id})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["First Name"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{className:g()("form-control",oe.first_name&&"is-invalid"),value:x.first_name,onChange:function(e){return Ae("first_name",e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.first_name})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Last Name"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{className:g()("form-control",oe.last_name&&"is-invalid"),value:x.last_name,onChange:function(e){return Ae("last_name",e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.last_name})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Middle initial"}),Object(y.jsx)("input",{value:x.middle_initial,onChange:function(e){return _(Object(ct.a)(Object(ct.a)({},x),{},{middle_initial:e.target.value}))},className:"form-control"})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("div",{className:"w-100",children:Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Sex"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(Hr.a,{value:De,onChange:function(e){return Ae("sex",e.value)},options:ti.map((function(e){return{value:e.value,label:e.text}})),styles:ei,className:g()("custom-form-select",oe.sex&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.sex})]})}),Object(y.jsx)("div",{className:"w-100",children:Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Date of Birth"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:bi,children:Object(y.jsx)(Yr.a,{value:x.date_of_birth?Er()(x.date_of_birth):null,onChange:function(e){return Ae("date_of_birth",Er()(e).format("YYYY-MM-DD"))},openTo:"year",maxDate:Er()(new Date)})})}),Object(y.jsx)("input",{readOnly:!0,hidden:!0,className:g()("form-control",oe.date_of_birth&&"is-invalid"),value:x.date_of_birth,type:"date"}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.date_of_birth})]})})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Cell phone"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(hn,{phone:x.cell_phone,setPhone:function(e){return Ae("cell_phone",e)},styles:{backgroundColor:"#F7F9FC"},error:!!oe.cell_phone}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.cell_phone})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Email"}),Object(y.jsx)("input",{className:g()("form-control",oe.email&&"is-invalid"),value:x.email,onChange:function(e){return Ae("email",e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.email})]})]}),Object(y.jsxs)("div",{className:"custom-form-group w-100",children:[Object(y.jsx)("label",{children:"Therapy type"}),Object(y.jsx)("div",{className:"d-flex gap-2 align-items-start",children:Object(y.jsx)("div",{className:"w-100",children:Object(y.jsx)(Hr.a,{value:Pe,onChange:function(e){return Ae("therapy_type_id",e.value)},options:f.map((function(e){return{value:e.id,label:e.name}})),styles:ei,className:g()("custom-form-select")})})})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Registration method"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(Hr.a,{value:Se,onChange:function(e){return Ae("registration_method_id",e.value)},options:p.map((function(e){return{value:e.id,label:e.name}})),styles:ei,className:g()("custom-form-select",oe.registration_method_id&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.registration_method_id})]}),Object(y.jsxs)("div",{className:"custom-form-group w-100",children:[Object(y.jsxs)("label",{children:["Source"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("div",{className:"d-flex gap-2 align-items-start",children:Object(y.jsxs)("div",{className:"w-100",children:[a.isOnlyAdmin?Object(y.jsx)(Br.a,{value:fe,onChange:function(e){return Ie("source_id",e.value)},onCreateOption:Te,isLoading:Ne,options:xe,formatGroupLabel:function(e){return Object(y.jsx)("div",{className:"group-header",children:e.label})},styles:ei,className:g()("custom-form-select",oe.source_id&&"is-invalid")}):Object(y.jsx)(Hr.a,{value:fe,onChange:function(e){return Ie("source_id",e.value)},options:xe,formatGroupLabel:function(e){return Object(y.jsx)("div",{className:"group-header",children:e.label})},styles:ei,className:g()("custom-form-select",oe.source_id&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:oe.source_id})]})})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsx)("label",{children:"Marketing activity"}),Object(y.jsx)("input",{className:"form-control",value:x.marketing_activity,onChange:function(e){return Ae("marketing_activity",e.target.value)}})]})]})]})}),Object(y.jsxs)("div",{className:wi.a.forms,children:[Object(y.jsx)(vi,{show:k,setShow:I,formName:"add-additional-patient-information",formData:x,setFormData:_}),Object(y.jsx)(vi,{show:L,setShow:q,formName:"add-insurance-information",formData:x,setFormData:_}),Object(y.jsx)(vi,{show:E,setShow:H,formName:"add-diagnosis-codes",formData:x,setFormData:_}),Object(y.jsx)(vi,{show:U,setShow:V,formName:"add-templare-billiable-line-items",formData:x,setFormData:_})]})]}),Object(y.jsxs)("div",{className:"d-flex justify-content-end gap-3 mt-3",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:Me,style:{width:"95px"},children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary d-flex justify-content-center align-items-center",onClick:function(){(function(){var e={};return we.forEach((function(t){if(!x[t.fieldName]){if(Q&&t.forNewPatients)return;e[t.fieldName]=t.errorText}})),le(e),!!Object.keys(e).length})()||ke(x)},style:{width:"95px"},disabled:me,children:me?Object(y.jsx)(lr,{color:"#fff",size:"small"}):"Save"})]})]}):Object(y.jsx)("div",{className:"p-1 d-flex align-items-center justify-content-center",style:{height:"230px"},children:Object(y.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})]})},Li=a(407),qi=a.n(Li),Yi=function(){return Object(y.jsx)("div",{className:qi.a.overlay,children:Object(y.jsx)(lr,{})})},Ri=a(705),Ei=a(408),Hi=a.n(Ei),Bi=a.p+"static/media/details.30b71cc7.svg",zi=a.p+"static/media/chart.fe76b1d1.svg",Ui=a.p+"static/media/create-patient.9f914a0c.svg",Vi=a.p+"static/media/call.501e259f.svg",Wi=a.p+"static/media/hex-cross.3ff5350c.svg",Ki=a(696),Gi=a(409),Zi=a.n(Gi),Ji=a(122),Xi=a.n(Ji),Qi=a(125),$i=a(116),ec=a(118),tc=a.n(ec),ac=a(410),nc=a.n(ac),sc=function(e){var t=e.logs,a=e.patient,n=e.needTooltip,r=Object(s.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],l=Object(s.useContext)(se).enqueueNotification,d=function(e){return e.rejected_at||e.bounced_at||e.soft_bounced_at||e.spam_at||e.unsub_at||e.deferral_at||e.hard_bounced_at},m=function(e){return e.rejected_at?"Rejected":e.bounced_at?"Bounced":e.soft_bounced_at?"Soft-Bounced":e.spam_at?"Spam":e.unsub_at?"Unsub":e.deferral_at?"Deferral":"Hard-Bounced"},b=function(e){return e.rejected_at?e.rejected_at:e.bounced_at?e.bounced_at:e.soft_bounced_at?e.soft_bounced_at:e.spam_at?e.spam_at:e.unsub_at?e.unsub_at:e.deferral_at?e.deferral_at:e.hard_bounced_at},j=function(e){return Xi()(e).format("MM/DD/YYYY hh:mm A")},p=function e(t){var n,s,r=Ts.a.clone(t),i=r.pop();i&&(n=a.id,s=i.id,h.a.get("/api/patients/".concat(n,"/documents/").concat(s),{headers:{"Content-Type":"application/json"}})).then((function(t){var a,n=t.data.document;(a=n,new Promise((function(e){nc()({printable:a,type:"pdf",base64:!0,onPrintDialogClose:function(){e(a)}})}))).then((function(){e(r)}))})).catch((function(e){l("Error","Something went wrong during document printing"),console.log(e)}))},f=function(e){var t=e.map((function(e){return e.id}));(function(e,t){return h.a.get("/api/patients/".concat(e,"/documents/download"),{params:{documents:t},responseType:"blob"})})(a.id,t).then((function(a){var n=new Blob([a.data]),s=window.URL.createObjectURL(n),r=document.createElement("a"),i="";i=1===t.length?e.find((function(e){return t[0]===e.id})).original_document_name:"documents.zip",r.href=s,r.setAttribute("download",i),document.body.appendChild(r),r.click(),document.body.removeChild(r)})).catch((function(e){l("Error","Something went wrong during document downloading"),console.log(e)}))},v=function(e){var t=e.items.find((function(e){return 2===e.form_type_id}));if(!t)return null;var a=t.metadata,n=a.co_pay,s=a.payment_for_session_not_converted,r=a.self_pay,i=a.charge_for_cancellation,c=a.other_charges_price,o=a.other_charges,l=a.comment;return"<span>Co-pay and/or co-insurance for session: ".concat(n||"-","</span>\n                <span>Payment for session not covered due to deductible: ").concat(s||"-","</span>\n                <span>Self-pay for session when paid out-of-pocket: ").concat(r||"-","</span>\n                <span>Charge for cancellation without 24 hours\u2019 notice: ").concat(i||"-","</span>\n                <span>Other charges (price): ").concat(c||"-","</span>\n                <span>Other charges (specify): ").concat(o||"-","</span>\n                <span>Comment: ").concat(l||"-","</span>")};return Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{className:tc.a.tableCaption,children:"History of requests and submissions"}),Object(y.jsx)("div",{className:"table-responsive",children:Object(y.jsxs)("table",{className:tc.a.tableLogs,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Date Sent"}),Object(y.jsx)("th",{children:"Date Signed"}),Object(y.jsx)("th",{children:"Sent By"}),Object(y.jsx)("th",{children:"Email / Phone Used"}),Object(y.jsx)("th",{children:"Actions"})]})}),Object(y.jsx)("tbody",{children:0===t.length?Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"5",className:"text-center",children:"No records"})}):t.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:d(e)?Object(y.jsx)(xa.a,{show:c,placement:"bottom",overlay:Object(y.jsx)(_a.a,{className:"mytooltip",children:m(e)}),children:Object(y.jsx)("span",{className:tc.a.eventFailed,onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:j(b(e))})}):Object(y.jsxs)("td",{className:"d-flex align-items-center gap-1 flex-wrap",children:[Object(y.jsx)("span",{className:g()(tc.a.eventSucceed,!e.sent_at&&"empty"),children:e.sent_at?j(e.sent_at):""}),n&&Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{className:tc.a.paymentForServiceLogTooltip,children:Object(y.jsx)("div",{className:"d-flex flex-column",dangerouslySetInnerHTML:{__html:v(e)}})}),children:Object(y.jsx)("div",{children:Object(y.jsx)(ka,{})})})]})}),Object(y.jsx)("td",{className:!e.filled_at&&"empty",children:e.filled_at&&j(e.filled_at)}),Object(y.jsx)("td",{className:!e.send_by&&"empty",children:e.send_by}),Object(y.jsxs)("td",{className:!e.sent_to_email&&!e.sent_to_phone&&"empty",children:[e.sent_to_email,e.sent_to_phone]}),Object(y.jsx)("td",{className:tc.a.tdActions,children:Object(y.jsxs)("div",{className:g()(tc.a.buttons,(e.filled_at||e.documents.length<1)&&"disabled"),children:[Object(y.jsx)("button",{type:"button",className:g()("btn btn-default",tc.a.btnTableAction),disabled:e.documents.length<1,onClick:function(){return f(e.documents)},children:Object(y.jsx)(Qi.a,{icon:$i.a,size:"sm"})}),Object(y.jsx)("button",{type:"button",className:g()("btn btn-default",tc.a.btnTableAction),disabled:e.documents.length<1,onClick:function(){return p(e.documents)},children:Object(y.jsx)(Qi.a,{icon:$i.c,size:"sm"})})]})})]},e.id)}))})]})})]})},rc=a(127),ic=a.n(rc),cc=function(e){var t=e.listData,a=e.setListData,n=e.disabled,r=e.placeholder,i=Object(s.useState)(""),c=Object(u.a)(i,2),o=c[0],l=c[1],d=function(){if((null===t||void 0===t?void 0:t.length)<1)return 0;var e=t.map((function(e){return e.id}));return Math.max.apply(null,e)},m=function(){if(o){var e=Object(it.a)(t);e.push({id:d()+1,text:o}),a(e),l("")}};return Object(s.useEffect)((function(){}),[t]),Object(y.jsxs)("div",{className:ic.a.formListInput,children:[Object(y.jsxs)("div",{className:ic.a.formListInputField,children:[Object(y.jsx)("input",{className:"form-control long",type:"text",placeholder:r,disabled:n,value:o,onChange:function(e){return l(e.target.value)},onKeyDownCapture:function(e){"Enter"===e.key&&m()}}),Object(y.jsx)("button",{className:g()(ic.a.formListInputBtn,!o&&" hidden"),type:"button",onClick:m,disabled:n,children:Object(y.jsx)(Qi.a,{icon:$i.b,color:"#2F80ED",size:"xl"})})]}),Object(y.jsx)("ul",{className:ic.a.formTagList,children:null===t||void 0===t?void 0:t.map((function(e){return Object(y.jsx)("li",{className:ic.a.formTagListItem,children:Object(y.jsxs)("div",{className:ic.a.formTag,children:[Object(y.jsx)("span",{className:ic.a.formTagText,children:e.text}),Object(y.jsx)("button",{type:"button",className:ic.a.formTagRemove,onClick:function(){return n=e.id,void a(t.filter((function(e){return e.id!==n})));var n},children:Object(y.jsx)(Qi.a,{icon:$i.d,color:"#fff",size:"lg"})})]})},e.id)}))})]})},oc=a.p+"static/media/mail-icon.a3fe184e.svg",lc=a.p+"static/media/phone-icon.7b764aed.svg",dc=a.p+"static/media/caret-icon.4f1a9105.svg",uc=a(91),mc=a.n(uc),bc=a.p+"static/media/check-icon.4f310b14.svg",jc=function(e){return e.first_name+" "+e.last_name+" "+(e.middle_initial?e.middle_initial+" ":"")},pc=function(e){var t=e.showModal,a=e.closeModal,n=e.patient,r=e.selectedFormsData,i=e.sendFormsMethod,c=e.onSuccessfulSend,o="email"===i,l="phone"===i,d=function(e){return e?"("+e.slice(0,3)+")-"+e.slice(3,7)+"-"+e.slice(7):""},m=Object(s.useState)(o?n.email:""),b=Object(u.a)(m,2),j=b[0],p=b[1],f=Object(s.useState)(l?d(n.cell_phone):""),v=Object(u.a)(f,2),O=v[0],x=v[1],_=Object(s.useState)({email:"",phone:""}),N=Object(u.a)(_,2),C=N[0],w=N[1],D=Object(s.useState)(!1),S=Object(u.a)(D,2),P=S[0],k=S[1],I=Object(s.useContext)(se).enqueueNotification;Object(s.useEffect)((function(){t&&(o&&p(n.email),l&&x(d(n.cell_phone)))}),[t]);var A=function(){p(""),x(""),w({email:"",phone:""}),a()},M=function(){var e,t={email:"",phone:""};return o&&(j?function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/gi.test(e)}(j)||(t.email="The field must be valid email address"):t.email="Email is required"),l&&(O?10!==(e=O,e.replace(/[-_()]/g,"")).length&&(t.phone="The field must be a valid phone number"):t.phone="Phone number is required"),w(t),!(t.email||t.phone)};return Object(y.jsxs)(re.a,{show:t,onHide:A,className:"custom-modal",dialogClassName:mc.a.modalDialog,centered:!0,children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("h5",{className:"mb-0",children:["Request for documents from ",jc(n)]})}),Object(y.jsxs)(re.a.Body,{className:"d-block py-3",children:[Object(y.jsx)("p",{children:"Are you sure you have selected all required forms and supporting documents to be included in this request for signature?"}),Object(y.jsx)("p",{children:"Forms and documents selected to be sent:"}),Object(y.jsx)("div",{className:"requested-documents__list",children:r.map((function(e,t){return Object(y.jsxs)("div",{className:"requested-documents__list-item",children:[Object(y.jsxs)("p",{children:[t+1,". ",e.title]}),Object(y.jsxs)("ul",{className:mc.a.unordered,children:["confidential_information"===e.name&&e.metadata.exchange_with.map((function(t){return Object(y.jsxs)("li",{children:[Object(y.jsx)("img",{src:bc,alt:"check-icon"}),Object(y.jsx)("span",{className:"ms-1",children:t})]},e.name+"-"+t)})),"supporting_documents"===e.name&&e.metadata.documents.map((function(t){return Object(y.jsxs)("li",{children:[Object(y.jsx)("img",{src:bc,alt:"check-icon"}),Object(y.jsx)("span",{className:"ms-1",children:t})]},e.name+"-"+t)}))]})]},e.name)}))}),o&&Object(y.jsxs)("div",{className:g()("form-group",mc.a.formGroup,C.email?mc.a.formGroupHasError:""),children:[Object(y.jsx)("label",{htmlFor:"sendFormEmail",className:g()("control-label mb-1",mc.a.formLabel),children:"Enter the email address:"}),Object(y.jsx)("input",{id:"sendFormEmail",className:g()("form-control",mc.a.formInput),value:j,onChange:function(e){return p(e.target.value)}}),C.email&&Object(y.jsx)("div",{className:mc.a.formErrors,children:C.email})]}),l&&Object(y.jsxs)("div",{className:g()("form-group",mc.a.formGroup,C.phone?mc.a.formGroupHasError:""),children:[Object(y.jsx)("label",{htmlFor:"sendFormPhone",className:g()("control-label mb-1",mc.a.formLabel),children:"Enter the phone number:"}),Object(y.jsx)(fn.a,{id:"sendFormPhone",className:g()("form-control",mc.a.formInput),mask:"(999)-999-9999",alwaysShowMask:!0,value:O,onChange:function(e){return x(e.target.value)}}),C.phone&&Object(y.jsx)("div",{className:mc.a.formErrors,children:C.phone})]})]}),Object(y.jsxs)(re.a.Footer,{className:"py-2",style:{borderTop:"1px solid #dee2e6"},children:[Object(y.jsx)("button",{className:"btn btn-large btn-primary d-flex justify-content-center align-items-center",onClick:function(){if(M()){var e={forms:r,send_via_email:o,send_via_sms:l};o&&(e.email=j),l&&(e.phone=O),w({email:"",phone:""}),k(!0),function(e,t){return h.a.post("/api/patients/".concat(e,"/forms/send"),t)}(n.id,e).then((function(){I("Success","Successfully sent request for documents"),A(),c()})).catch((function(e){I("Error","Something went wrong"),console.log(e)})).finally((function(){k(!1)}))}},disabled:P,style:{width:"100px"},children:P?Object(y.jsx)(lr,{color:"#fff",size:"small"}):"Send"}),Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary ms-3",onClick:A,children:"Close"})]})]})},fc=[{name:"co_pay",formName:"payment_for_service",required:!0},{name:"self_pay",formName:"payment_for_service",required:!0},{name:"other_charges",formName:"payment_for_service",required:!1,requiredWith:"other_charges_price"},{name:"charge_for_cancellation",formName:"payment_for_service",required:!0},{name:"exchange_with",formName:"confidential_information",required:!0},{name:"supporting_documents",formName:"supporting_documents",required:!1}],hc=[{value:"email",label:"Email",icon:oc},{value:"phone",label:"Phone",icon:lc}],vc=function(e){var t,a,n,r,i,c=e.showModal,o=e.closeModal,l=e.patient,d=Object(s.useState)({}),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(!1),f=Object(u.a)(p,2),v=f[0],O=f[1],x=Object(s.useState)(!1),_=Object(u.a)(x,2),N=_[0],C=_[1],w=Object(s.useState)(null),D=Object(u.a)(w,2),S=D[0],P=D[1],k=Object(s.useState)({payment_for_service:{co_pay:"0",payment_for_session_not_converted:"0",self_pay:"0",charge_for_cancellation:"0",other_charges_price:"0",other_charges:"",comment:""},confidential_information:{exchange_with:[]},supporting_documents:{insurance:!0,license:!0,supporting_documents:[]}}),I=Object(u.a)(k,2),A=I[0],M=I[1],T=Object(s.useState)({payment_for_service:{co_pay:!1,self_pay:!1,charge_for_cancellation:!1,other_charges:!1},confidential_information:{exchange_with:!1},supporting_documents:{supporting_documents:!1}}),F=Object(u.a)(T,2),L=F[0],q=F[1],Y=Object(s.useState)(null),R=Object(u.a)(Y,2),E=R[0],H=R[1],B=Object(s.useState)(!1),z=Object(u.a)(B,2),U=z[0],V=z[1],W=Object(s.useState)(!1),K=Object(u.a)(W,2),G=K[0],Z=K[1],J={payment_for_service:L.payment_for_service.co_pay||L.payment_for_service.self_pay||L.payment_for_service.charge_for_cancellation||L.payment_for_service.other_charges,confidential_information:L.confidential_information.exchange_with,supporting_documents:L.supporting_documents.supporting_documents},X=J.payment_for_service||J.confidential_information||J.supporting_documents,Q=Object.entries(b).filter((function(e){var t=Object(u.a)(e,2);t[0];return t[1].checked})).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1],s={};if("supporting_documents"===a){var r=[];A.supporting_documents.insurance&&r.push("Insurance"),A.supporting_documents.license&&r.push("Driver's License"),s.documents=[].concat(r,Object(it.a)(A.supporting_documents.supporting_documents.map((function(e){return e.text}))))}else"confidential_information"===a?s.exchange_with=Object(it.a)(A.confidential_information.exchange_with.map((function(e){return e.text}))):s=a in A?A[a]:{};return{name:a,title:n.title,metadata:s}})),$=function(){var e;O(!0),j({}),(e=l.id,h.a.get("/api/patients/".concat(e,"/forms"))).then((function(e){var t,a={},n=Object(ni.a)(e.data);try{for(n.s();!(t=n.n()).done;){var s=t.value;a[s.name]={title:s.title,requests:s.requests,document_type_id:s.document_type_id,is_required:s.is_required,patient_can_skip_form:s.patient_can_skip_form,visible_in_modal:s.visible_in_modal,visible_in_tab:s.visible_in_tab,checked:"credit_card_on_file"!==s.name,isOpened:!1}}}catch(u){n.e(u)}finally{n.f()}l.primary_insurance&&ae("confidential_information","exchange_with",[{id:1,text:l.primary_insurance}]);var r=Object(ct.a)({},A);if(r.payment_for_service={co_pay:"0",payment_for_session_not_converted:"0",self_pay:"0",charge_for_cancellation:"0",other_charges_price:"0",other_charges:""},!l.is_payment_forbidden){var i=l.is_self_pay,c=l.visit_copay,o=l.self_pay,d=l.insurance_pay;r.payment_for_service.co_pay=i?"0":c,r.payment_for_service.payment_for_session_not_converted=i?"0":d,r.payment_for_service.self_pay=i?o:"0",r.payment_for_service.charge_for_cancellation=String(100)}P(Ts.a.cloneDeep(r)),M(r),j(a)})).finally((function(){O(!1)}))};Object(s.useEffect)((function(){$()}),[]),Object(s.useEffect)((function(){for(var e=!0,t=!1,a=0,n=Object.entries(b);a<n.length;a++){var s=Object(u.a)(n[a],2),r=s[0],i=s[1];e&&!i.checked&&(e=!1),!t&&J[r]&&(t=!0)}t&&ee(),C(e)}),[null===(t=b.payment_for_service)||void 0===t?void 0:t.checked,null===(a=b.confidential_information)||void 0===a?void 0:a.checked,null===(n=b.credit_card_on_file)||void 0===n?void 0:n.checked,null===(r=b.supporting_documents)||void 0===r?void 0:r.checked,null===(i=b.telehealth)||void 0===i?void 0:i.checked]);var ee=function(){var e={payment_for_service:{co_pay:!1,self_pay:!1,charge_for_cancellation:!1,other_charges:!1},confidential_information:{exchange_with:!1},supporting_documents:{insurance:!1,license:!1,supporting_documents:!1}};return fc.forEach((function(t){b[t.formName].checked&&(t.required&&!A[t.formName][t.name]&&(e[t.formName][t.name]=!0),t.requiredWith&&!A[t.formName][t.name]&&A[t.formName][t.requiredWith]&&"0"!==A[t.formName][t.requiredWith]&&(e[t.formName][t.name]=!0),"exchange_with"===t.name&&0===A.confidential_information.exchange_with.length&&(e.confidential_information.exchange_with=!0),"supporting_documents"===t.name&&(A.supporting_documents.insurance||A.supporting_documents.license||A.supporting_documents.supporting_documents.length>0||(e.supporting_documents.supporting_documents=!0)))})),q(e),!(e.payment_for_service.co_pay||e.payment_for_service.self_pay||e.payment_for_service.charge_for_cancellation||e.payment_for_service.other_charges||e.confidential_information.exchange_with||e.supporting_documents.supporting_documents)},te=function(e,t,a){var n=Object(ct.a)({},b);n[e][t]=a,j(n),J[e]&&ee()},ae=function(e,t,a){var n=Object(ct.a)({},A);n[e][t]=a,M(n),e in L&&(L[e][t]||"supporting_documents"===e&&L.supporting_documents.supporting_documents)&&ee()};return Object(y.jsxs)(re.a,{show:c,onHide:function(){V(!1),Z(!1),M(S),o()},disabled:G,className:g()("custom-modal",G&&"faded"),dialogClassName:Zi.a.modalDialog,centered:!0,children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("h5",{className:"mb-0",children:["Send forms to ",jc(l)]})}),Object(y.jsx)(re.a.Body,{children:v?Object(y.jsx)(lr,{}):Object(y.jsxs)("div",{className:"mb-2",children:[Object(y.jsxs)("div",{className:"appointment-documents",children:[Object(y.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3",children:[Object(y.jsxs)("div",{className:"collapse-document__item-title",children:[Object(y.jsx)("input",{id:"selectAllForms",type:"checkbox",checked:N,onChange:function(){for(var e=!N,t=Object(ct.a)({},b),a=0,n=Object.keys(b);a<n.length;a++){t[n[a]].checked=e}j(t),X&&ee()},onClick:function(e){return e.stopPropagation()}}),Object(y.jsx)("label",{className:"control-label",htmlFor:"selectAllForms",children:"Select all"})]}),Object(y.jsx)("div",{children:X&&Object(y.jsx)("div",{className:"alert alert-danger mb-0 py-2",children:"Please make sure you have filled all the required fields"})}),Object(y.jsxs)("div",{className:g()("dropdown dropdown-send",U&&"open"),children:[Object(y.jsxs)("button",{type:"button",className:"btn btn-primary btn-dropdown",style:{display:"flex",padding:0},disabled:X||0===Q.length,onClick:function(){return V(!U)},onBlur:function(){return V(!1)},children:[Object(y.jsx)("span",{className:"btn__text",children:"Send to"}),Object(y.jsx)("span",{className:"btn__caret",children:Object(y.jsx)("img",{src:dc})})]}),Object(y.jsx)("ul",{className:"dropdown-menu",children:hc.map((function(e){return Object(y.jsx)("li",{className:"dropdown-menu__item",children:Object(y.jsxs)("a",{href:"#",onMouseDown:function(e){return e.preventDefault()},onClick:function(){return t=e.value,V(!1),void(ee()&&(H(t),Z(!0)));var t},children:[Object(y.jsx)("span",{className:"menu-item__icon",children:Object(y.jsx)("img",{src:e.icon,alt:"send-method-".concat(e.value)})}),e.label]})},e.value)}))})]})]}),Object(y.jsx)("div",{className:"collapse-document",children:Object.entries(b).map((function(e){var t,a=Object(u.a)(e,2),n=a[0],s=a[1];return Object(y.jsxs)("div",{className:g()("collapse-document__item",J[n]?"invalid":""),children:[Object(y.jsx)("div",{className:"el-collapse-item__header",onClick:function(){return te(n,"isOpened",!s.isOpened)},children:Object(y.jsxs)("div",{className:"collapse-document__item-title",children:[Object(y.jsx)("input",{type:"checkbox",checked:s.checked,onChange:function(e){return te(n,"checked",e.target.checked)},onClick:function(e){return e.stopPropagation()}}),s.title,0!==s.requests.length&&Object(y.jsxs)("div",{className:"collapse-document__item-title__date",children:["Sent at: ",(t=s.requests,Xi()(t[t.length-1].sent_at).format("MM/DD/YYYY hh:mm A"))]}),Object(y.jsx)(Ki.a,{className:"el-collapse-item__arrow"+(s.isOpened?" is-active":"")})]})}),Object(y.jsx)(Ht.a,{in:s.isOpened,className:"el-collapse-item__content",children:Object(y.jsxs)("form",{noValidate:!0,className:"collapse-document__item-form",children:["payment_for_service"===n&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:g()("form-group d-flex my-3",L.payment_for_service.co_pay?"has-error":""),children:[Object(y.jsx)("label",{htmlFor:"coPay",className:"col-sm-5 control-label",children:"Co-pay and/or co-insurance for session"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"coPay",className:"form-control",value:A.payment_for_service.co_pay,onChange:function(e){return ae(n,"co_pay",e.target.value)},disabled:!0})})]}),Object(y.jsxs)("div",{className:"form-group d-flex my-3",children:[Object(y.jsx)("label",{htmlFor:"forSession",className:"col-sm-5 control-label",children:"Payment for session not covered due to deductible"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"payment_for_session_not_converted",className:"form-control",value:A.payment_for_service.payment_for_session_not_converted,onChange:function(e){return ae(n,"payment_for_session_not_converted",e.target.value)},disabled:!0})})]}),Object(y.jsxs)("div",{className:g()("form-group d-flex my-3",L.payment_for_service.self_pay?"has-error":""),children:[Object(y.jsx)("label",{htmlFor:"selfPay",className:"col-sm-5 control-label",children:"Self-pay for session when paid out-of-pocket"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"selfPay",className:"form-control",value:A.payment_for_service.self_pay,onChange:function(e){return ae(n,"self_pay",e.target.value)},disabled:!0})})]}),Object(y.jsxs)("div",{className:g()("form-group d-flex my-3",L.payment_for_service.self_pay?"has-error":""),children:[Object(y.jsx)("label",{htmlFor:"chargeForCancellation",className:"col-sm-5 control-label",children:"Charge for cancellation without 24 hours\u2019 notice"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"chargeForCancellation",className:"form-control",value:A.payment_for_service.charge_for_cancellation,onChange:function(e){return ae(n,"charge_for_cancellation",e.target.value)},disabled:!0})})]}),Object(y.jsxs)("div",{className:"form-group d-flex my-3",children:[Object(y.jsx)("label",{htmlFor:"otherChargesPrice",className:"col-sm-5 control-label",children:"Other charges (price)"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"otherChargesPrice",className:"form-control",value:A.payment_for_service.other_charges_price,onChange:function(e){return ae(n,"other_charges_price",e.target.value)},disabled:!s.checked||l.is_payment_forbidden})})]}),Object(y.jsxs)("div",{className:g()("form-group d-flex my-3",L.payment_for_service.other_charges?"has-error":""),children:[Object(y.jsx)("label",{htmlFor:"otherCharges",className:"col-sm-5 control-label",children:"Other charges (specify)"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"otherCharges",className:"form-control long",value:A.payment_for_service.other_charges,onChange:function(e){return ae(n,"other_charges",e.target.value)},disabled:!s.checked||!A.payment_for_service.other_charges_price||"0"===A.payment_for_service.other_charges_price||l.is_payment_forbidden})})]}),Object(y.jsxs)("div",{className:"form-group d-flex my-3",children:[Object(y.jsx)("label",{htmlFor:"comment",className:"col-sm-5 control-label",children:"Comment"}),Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)("input",{id:"comment",className:"form-control long",value:A.payment_for_service.comment,onChange:function(e){return ae(n,"comment",e.target.value)},disabled:!s.checked})})]})]}),"confidential_information"===n&&Object(y.jsx)("div",{className:g()("form-group d-flex my-3",L.confidential_information.exchange_with?"has-error":""),children:Object(y.jsx)("div",{className:"col-sm-8",children:Object(y.jsx)(cc,{listData:A.confidential_information.exchange_with,setListData:function(e){return ae(n,"exchange_with",e)},placeholder:"Add person",disabled:!s.checked})})}),"supporting_documents"===n&&Object(y.jsxs)("div",{className:g()("form-group",L.supporting_documents.supporting_documents?"has-error":""),children:[Object(y.jsxs)("div",{className:"row--flex row-inputs",children:[Object(y.jsxs)("div",{className:"checkbox",children:[Object(y.jsx)("input",{id:"insurance",type:"checkbox",checked:A.supporting_documents.insurance,onChange:function(e){return ae(n,"insurance",e.target.checked)},onClick:function(e){return e.stopPropagation()},disabled:!s.checked}),Object(y.jsx)("label",{htmlFor:"insurance",className:"control-label",children:"Insurance"})]}),Object(y.jsxs)("div",{className:"checkbox",children:[Object(y.jsx)("input",{id:"license",type:"checkbox",checked:A.supporting_documents.license,onChange:function(e){return ae(n,"license",e.target.checked)},onClick:function(e){return e.stopPropagation()},disabled:!s.checked}),Object(y.jsx)("label",{htmlFor:"license",className:"control-label",children:"Driver's License"})]})]}),Object(y.jsx)(cc,{listData:A.supporting_documents.supporting_documents,setListData:function(e){return ae(n,"supporting_documents",e)},placeholder:"Add document",disabled:!s.checked})]}),Object(y.jsx)(sc,{logs:s.requests,patient:l,needTooltip:"payment_for_service"===n})]})})]},n)}))})]}),Q.length>0&&Object(y.jsx)(pc,{showModal:G,closeModal:function(){return Z(!1)},patient:l,selectedFormsData:Q,sendFormsMethod:E,onSuccessfulSend:$})]})})]})},Oc=a(336),xc=a.n(Oc),_c=function(e){var t=e.source,a=e.size,n=void 0===a?"small":a;return Object(y.jsx)("div",{className:g()("badge bg-primary d-flex align-items-center",xc.a.sourceTag,"lg"===n&&xc.a.sourceTageLarge),children:t.name})},gc=a.p+"static/media/dots-vertical.f4c2e2f3.svg",yc=a(337),Nc=a.n(yc),Cc=function(e){var t=e.onAction,a=e.text,n=e.disabled,r=void 0!==n&&n,i=Object(s.useState)(!1),c=Object(u.a)(i,2),o=c[0],l=c[1],d=Object(s.useRef)(null),m=Object(s.useRef)(null);return Object(C.j)(m,(function(e){d.current&&d.current.contains(e.target)||l(!1)})),Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsx)("div",{ref:d,className:Nc.a.dotsIcon,onClick:function(e){e.stopPropagation(),l(!o)},children:Object(y.jsx)("img",{src:gc,alt:"dots-icon"})}),o&&Object(y.jsx)("button",{ref:m,className:Nc.a.menuDialog,disabled:r,onClick:function(e,a){e.stopPropagation(),l(!1),t&&t(a)},children:a})]})},wc=a(24),Dc=a.n(wc),Sc=function(e){var t=e.comment;return Object(y.jsxs)("div",{className:Dc.a.systemComment,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("div",{className:Dc.a.name,children:"System"}),Object(y.jsx)("div",{className:g()(Dc.a.date,"text-primary"),children:ya()(t.created_at).format("DD MMM. YYYY h:mm A")})]}),Object(y.jsxs)("div",{className:Dc.a.content,children:[Object(y.jsx)("b",{children:t.document_uploader||t.full_admin_name||t.provider_name})," ","added document ",Object(y.jsxs)("b",{children:["\xab",t.document_type,"\xbb"]}),":"," ",t.original_document_name]})]})},Pc=function(e){var t=e.comment;return Object(y.jsxs)("div",{className:Dc.a.systemComment,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("div",{className:Dc.a.name,children:"System"}),Object(y.jsx)("div",{className:g()(Dc.a.date,"text-primary"),children:ya()(t.created_at).format("DD MMM. YYYY h:mm A")})]}),Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:t.comment}})]})},kc=function(e){var t=e.comment;return Object(y.jsxs)("div",{className:Dc.a.systemComment,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("div",{className:Dc.a.name,children:t.full_admin_name}),Object(y.jsx)("div",{className:g()(Dc.a.date,"text-primary"),children:ya()(t.created_at).format("DD MMM. YYYY h:mm A")})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"Comment"}),Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:t.comment}})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("label",{className:"form-label fw-bold",children:["Appointment survey for provider"," ",t.provider_name_from_appointment]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"On a scale of 1-5 (with 5 being the highest) how do you rate the services you just received?"}),Object(y.jsx)("div",{className:"mt-1",children:Object(y.jsx)(Es,{value:t.comment_metadata.service_rate,fieldName:"service_rate",readOnly:!0})})]})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"On a scale of 1-5 (with 5 being the highest) how do you rate the provider that was assigned to you?"}),Object(y.jsx)("div",{className:"mt-1",children:Object(y.jsx)(Es,{value:t.comment_metadata.provider_rate,fieldName:"provider_rate",readOnly:!0})})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"Do you have any suggestions as to how we can elevate your experience with Change WithinReach?"}),Object(y.jsx)("div",{className:"d-flex gap-1 mt-1",children:t.comment_metadata.suggestions||"-"})]})]})]})},Ic=function(e){var t=e.comment,a=jn(String(t.comment_metadata.phone));return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:Dc.a.systemComment,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("div",{className:Dc.a.name,children:t.full_admin_name}),Object(y.jsx)("div",{className:g()(Dc.a.date,"text-primary"),children:ya()(t.created_at).format("DD MMM. YYYY h:mm A")})]}),Object(y.jsx)("div",{className:"fw-bold",children:"Onboarding done"}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"Comment"}),Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:t.comment}})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"Phone"}),Object(y.jsx)("div",{children:a})]})]})})},Ac=function(e){var t=e.comment,a=null,n=null,s=null;switch(t.appointment&&(n=ya.a.unix(t.appointment.time).format("MM/DD/YYYY h:mm a"),s=t.comment_metadata?t.comment_metadata.visit_reason:null),t.comment_type){case 2:a="cancelled appointment",n&&(a+=s?' with reason "'.concat(s,'" <br><span style="line-height: 1.5;">(Appt. date: ').concat(n,")</span>"):" (Appt. date: ".concat(n,")"));break;case 3:a="rescheduled appointment";var r=null;t.new_appointment?r=ya.a.unix(t.new_appointment.time).format("MM/DD/YYYY h:mm a"):t.comment_metadata&&t.comment_metadata.old_time&&t.comment_metadata.new_time&&(n=ya.a.unix(t.comment_metadata.old_time).format("MM/DD/YYYY h:mm a"),r=ya.a.unix(t.comment_metadata.new_time).format("MM/DD/YYYY h:mm a")),n&&r&&(a+=s?' with reason "'.concat(s,'" <br><span style="line-height: 1.5;">(Old appt. date: ').concat(n,", new appt. date: ").concat(r,")</span>"):" (Old appt. date: ".concat(n,", new appt. date: ").concat(r,")"));break;case 4:a="scheduled appointment",n&&(a+=s?' with reason "'.concat(s,'" <br><span style="line-height: 1.5;">(Appt. date: ').concat(n,")</span>"):" (Appt. date: ".concat(n,")"));break;case 7:a="changed patient Frequency of Treatment";var i=t.comment_metadata;i&&(a+=" (".concat(i.old_value?"Old value: ".concat(i.old_value,"; "):"","New value: ").concat(i.new_value,")"))}return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:Dc.a.comment,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{className:Dc.a.name,children:t.full_admin_name||t.provider_name})," ",Object(y.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})]}),Object(y.jsx)("div",{className:g()(Dc.a.date,"text-primary"),children:ya()(t.created_at).format("DD MMM. YYYY h:mm A")})]}),Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:t.comment}})]}),Object(y.jsx)("hr",{className:"m-0"})]})},Mc=function(e){var t=e.comment;return Object(y.jsxs)("div",{className:Dc.a.systemComment,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(y.jsx)("div",{className:Dc.a.name,children:t.full_admin_name}),Object(y.jsx)("div",{className:g()(Dc.a.date,"text-primary"),children:ya()(t.created_at).format("DD MMM. YYYY h:mm A")})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label fw-bold",children:"Comment"}),Object(y.jsx)("div",{dangerouslySetInnerHTML:{__html:t.comment}})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("label",{className:"form-label fw-bold",children:["Appointment survey for provider"," ",t.provider_name_from_appointment]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"How well do you feel understood and supported by your therapist? Please rate from 1 to 5 stars, where 1 star means 'not at all' and 5 stars means 'completely'."}),Object(y.jsx)("div",{className:"d-flex gap-1 mt-1",children:Object(y.jsx)(Es,{value:t.comment_metadata.therapist_understanding_support_rate,fieldName:"therapist_understanding_support_rate",readOnly:!0})})]})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"How would you rate the overall atmosphere or vibe during your therapy sessions? Please rate from 1 to 5 stars, where 1 star means 'very poor' and 5 stars means 'excellent'."}),Object(y.jsx)("div",{className:"d-flex gap-1 mt-1",children:Object(y.jsx)(Es,{value:t.comment_metadata.therapy_atmosphere_rate,fieldName:"therapy_atmosphere_rate",readOnly:!0})})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"How easy has it been for you to open up and share with your therapist? Please rate from 1 to 5 stars, where 1 star means 'very difficult' and 5 stars means 'very easy'."}),Object(y.jsx)("div",{className:"d-flex gap-1 mt-1",children:Object(y.jsx)(Es,{value:t.comment_metadata.therapist_openness_share_rate,fieldName:"therapist_openness_share_rate",readOnly:!0})})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"How do you feel after your therapy sessions? Please rate your sense of being heard and validated from 1 to 5 stars, where 1 star means 'not at all' and 5 stars means 'completely'."}),Object(y.jsx)("div",{className:"d-flex gap-1 mt-1",children:Object(y.jsx)(Es,{value:t.comment_metadata.therapy_session_after_feelings_rate,fieldName:"therapy_session_after_feelings_rate",readOnly:!0})})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"Do you have any suggestions as to how we can elevate your experience with Change WithinReach?"}),Object(y.jsx)("div",{className:"d-flex gap-1 mt-1",children:t.comment_metadata.suggestions||"-"})]})]})]})},Tc=function(){var e,t,a,n,r=Object(d.m)(),i=Object(l.b)(),c=Object(l.c)((function(e){return e})),o=c.app,m=c.newPatientsDashboard,b=o.queryParams,j=m.selectedCardData,p=m.removeCardData,f=m.eventBus,v=m.fileTypeSelection,_=m.providersDatasetForTribute,N=Object(s.useRef)(null),w=Object(s.useRef)(null),D=Object(s.useRef)(null),S=Object(s.useRef)(null),P=Object(s.useState)(1),k=Object(u.a)(P,2),I=k[0],A=k[1],M=Object(s.useState)(1),T=Object(u.a)(M,2),F=T[0],L=T[1],q=Object(s.useState)(""),Y=Object(u.a)(q,2),R=Y[0],E=Y[1],H=Object(s.useState)(!1),B=Object(u.a)(H,2),z=B[0],U=B[1],V=Object(s.useState)(!1),W=Object(u.a)(V,2),K=W[0],G=W[1],Z=Object(s.useState)(!1),J=Object(u.a)(Z,2),X=J[0],Q=J[1],$=Object(s.useState)(!1),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=Object(s.useState)(!1),se=Object(u.a)(ne,2),ie=se[0],ce=se[1],oe=j&&!p&&!v.showModal,le=j&&jc(j),de=j&&j.date_of_birth?(n=j.date_of_birth,Da(n).format("MM/DD/YYYY")):"Not specified",ue=j&&j.date_of_birth?function(e){var t=Da(e);return Da().diff(t,"years")}(j.date_of_birth):"Not specified",me=j&&function(e){switch(e){case"M":return"Male";case"F":return"Female";case"U":return"Unknown";default:return"Not specified"}}(j.sex),be=null!==j&&void 0!==j&&null!==(e=j.nextAppointment)&&void 0!==e&&e.date_of_service?"".concat(j.nextAppointment.date_of_service.date," ").concat(j.nextAppointment.date_of_service.time):null,je=j?Ti({nextAppointment:j.nextAppointment,isPatientCreated:j.isPatientCreated,inquirable:j}):null,pe=j&&j.nextAppointment?j.rescheduledAppointment?x:O:null,fe=Object(y.jsx)("div",{style:{width:"214px"},children:"Patient forms"}),he=function(){E(""),S.current.innerHTML=""},ve=function(){i(os({data:null})),A(1),L(1),ce(!1),G(!1),ae(!1),localStorage.removeItem("currentInquiryId")};Object(s.useEffect)((function(){var e;return N.current&&(e=new IntersectionObserver((function(e){e[0].isIntersecting&&function(){var e;j&&null!==(e=j.comments)&&void 0!==e&&e.length&&I<F&&(ae(!0),Bn({id:j.inquiry_id,page:I+1}).then((function(e){var t;if((null===(t=localStorage.getItem("currentInquiryId"))||void 0===t?void 0:t.toString())===j.inquiry_id.toString()&&e.data.data.length){var a=[].concat(Object(it.a)(j.comments),Object(it.a)(e.data.data));i(ks({data:a})),A(I+1)}})).finally((function(){var e;(null===(e=localStorage.getItem("currentInquiryId"))||void 0===e?void 0:e.toString())===j.inquiry_id.toString()&&ae(!1)})))}()}),{threshold:1})).observe(N.current),function(){e&&e.disconnect()}}));Object(s.useEffect)((function(){!function(){if(S.current&&j){var e={trigger:"@",values:j.isPatientCreated?_:_.filter((function(e){return e.key.includes("(Admin)")||e.key.includes("(Secretary)")||e.key.includes("(Patient Relation Manager)")})),selectTemplate:function(e){return'<span class="comment-mention" data-id="'+e.original.id+'" contenteditable="false">@'+e.original.value+"</span>"}};new Hi.a(e).attach(S.current)}}()}),[j]);Object(s.useEffect)((function(){j&&(G(!0),localStorage.setItem("currentInquiryId",j.inquiry_id),Bn({id:j.inquiry_id,page:I}).then((function(e){var t;(null===(t=localStorage.getItem("currentInquiryId"))||void 0===t?void 0:t.toString())===j.inquiry_id.toString()&&(i(ks({data:e.data.data})),L(e.data.last_page))})).finally((function(){var e;(null===(e=localStorage.getItem("currentInquiryId"))||void 0===e?void 0:e.toString())===j.inquiry_id.toString()&&G(!1)})))}),[null===j||void 0===j?void 0:j.id]);var Oe=function e(t){var a=document.getElementById("comment-".concat(t));if(a)a.scrollIntoView({behavior:"smooth",block:"center"}),r("/new-patients-dashboard");else{var n=j.comments.length-1;e(j.comments[n].id)}};if(Object(s.useEffect)((function(){var e;null!==j&&void 0!==j&&null!==(e=j.comments)&&void 0!==e&&e.length&&b.comment&&setTimeout((function(){Oe(b.comment)}),200)}),[null===j||void 0===j?void 0:j.comments]),Object(C.j)(D,(function(e){w.current&&w.current.contains(e.target)||U(!1)})),!j)return Object(y.jsx)(y.Fragment,{});var xe=j.onboardingDate,_e=j.onboardingTime,ge=j.alert,ye=xe?ya()(xe,"YYYY-MM-DD").format("MM/DD/YYYY"):"-",Ne=_e||"-",Ce="-",we="-";ge&&(Ce="$".concat(ge.co_pay),we="$".concat(ge.deductible));var De=function(e){switch(e.model){case"PatientDocument":case"PatientLeadDocument":return Object(y.jsx)(Sc,{comment:e});case"PatientAlert":return Object(y.jsx)(Pc,{comment:e});default:return 5===e.comment_type?Object(y.jsx)(kc,{comment:e}):8===e.comment_type?Object(y.jsx)(Mc,{comment:e}):6===e.comment_type?Object(y.jsx)(Ic,{comment:e}):Object(y.jsx)(Ac,{comment:e})}};return Object(y.jsxs)(re.a,{show:oe,size:"lg",onHide:ve,disabled:z,className:g()("custom-modal",z&&"faded"),children:[Object(y.jsxs)(Ar.a,{closeButton:!0,className:Dc.a.header,children:[Object(y.jsx)("img",{src:Bi,alt:"details-icon"}),Object(y.jsx)("div",{className:Dc.a.name,children:le}),Object(y.jsxs)("div",{className:Dc.a.age,children:[ue," years, ",me]})]}),Object(y.jsxs)(Mr.a,{className:"container",children:[Object(y.jsxs)("div",{className:"row",children:[Object(y.jsxs)("div",{className:"col-7 d-flex flex-column gap-4",children:[Object(y.jsxs)("div",{className:"d-flex flex-column align-items-end",children:[Object(y.jsxs)("div",{className:"mb-3 w-100 custom-form-group",children:[Object(y.jsx)("label",{htmlFor:"exampleFormControlTextarea1",children:"Enter your comment"}),Object(y.jsxs)("div",{className:"position-relative ",children:[Object(y.jsx)("div",{className:g()(Dc.a.commentTextarea,"form-control comment-textarea"),contentEditable:!0,ref:S,onInput:function(e){return E(e.target.innerHTML)}}),Object(y.jsx)("label",{htmlFor:"file",className:Dc.a.clip,children:Object(y.jsx)(mt.a,{path:dt.a,size:1})}),Object(y.jsx)("input",{type:"file",id:"file",hidden:!0,onChange:function(e){var t=e.target.files[0],a=new FormData;a.append("qquuid",Object(Ri.a)()),a.append("qqfilename",t.name),a.append("qqtotalfilesize",String(t.size)),a.append("qqfile",t),i(Ss({data:{showModal:!0,fileId:null}})),j.isPatientCreated?(a.append("patient_id",j.id),function(e){return h.a.post("patient/upload-file",e)}(a).then((function(e){i(Ss({data:{showModal:!0,fileId:e.data.new_file_id,patientIsCreated:j.isPatientCreated}}))}))):function(e,t){return h.a.post("api/new-patients-crm/leads/".concat(e,"/upload-file"),t)}(j.id,a).then((function(e){i(Ss({data:{showModal:!0,fileId:e.data.new_file_id,patientIsCreated:j.isPatientCreated}}))}))}})]})]}),Object(y.jsx)("div",{className:"d-flex gap-1",children:Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:function(){he()},children:"Cancel"}),Object(y.jsxs)("button",{onClick:function(){Q(!0),function(e){var t=e.id,a=e.data;return h.a.post("api/new-patients-crm/inquiries/".concat(t,"/comments"),a)}({id:j.inquiry_id,data:{comment:R}}).then((function(e){var t=e.data,a={model:"PatientComment",comment:t.comment,full_admin_name:"".concat(t.admin.firstname," ").concat(t.admin.lastname),created_at:t.created_at};i(ks({data:[a].concat(Object(it.a)(j.comments))})),he(),Q(!1)}))},className:"btn btn-large btn-primary text-white d-flex align-items-center justify-content-center gap-2",disabled:!R,style:{width:"106px"},children:[Object(y.jsx)("div",{children:"Save"}),X&&Object(y.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status"})]})]})})]}),K?Object(y.jsx)(lr,{}):null!==(t=j.comments)&&void 0!==t&&t.length?Object(y.jsx)("div",{className:"d-flex flex-column gap-4",children:j.comments.map((function(e,t){return Object(y.jsx)("div",{id:"comment-".concat(e.id),children:De(e)},t)}))}):Object(y.jsx)("div",{children:"No comments yet"}),!K&&!te&&Object(y.jsx)("div",{ref:N}),te&&Object(y.jsx)("div",{className:"d-flex gap-1 align-items-center justify-content-center",style:{height:"10px"},children:Object(y.jsx)(lr,{})})]}),Object(y.jsxs)("div",{className:g()(Dc.a.patientDetails,"col-5"),children:[Object(y.jsxs)("div",{className:Dc.a.title,children:[Object(y.jsx)("div",{children:"Patient details:"}),Object(y.jsx)(Cc,{text:fe,onAction:function(){return U(!0)},disabled:!j.isPatientCreated})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[j.isPatientCreated?Object(y.jsxs)("button",{onClick:function(){window.open("/chart/".concat(j.id),"_blank")},className:"btn btn-large btn-primary text-white d-flex justify-content-center align-items-center gap-1 w-100",children:[Object(y.jsx)("img",{src:zi,alt:"chart-icon"}),Object(y.jsx)("div",{children:"Chart"})]}):Object(y.jsx)("button",{onClick:function(){var e;ie||(ce(!0),(e={id:j.inquiry_id},h.a.post("api/new-patients-crm/inquiries/".concat(e.id,"/create-patient-from-patient-lead"))).then((function(e){var t=e.data;t.id=t.id.toString(),i(os({data:Object(ct.a)(Object(ct.a)({},t.inquirable),{},{inquiry_id:t.id,stageId:t.stage_id,source:t.source,registrationMethod:t.registration_method,isPatientCreated:!0})}));var a=Di(t);f.publish({type:"UPDATE_CARD",laneId:t.stage_id,card:a}),i(rs({data:a,meta:{stageId:t.stage_id,id:t.id}}))})).finally((function(){ce(!1)})))},disabled:ie,className:"btn btn-large btn-primary text-white d-flex justify-content-center align-items-center gap-1 w-100",children:ie?Object(y.jsx)(lr,{color:"#fff",size:"small"}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{src:Ui,alt:"chart-icon"}),Object(y.jsx)("div",{children:"Create pt."})]})}),Object(y.jsxs)("button",{className:"btn btn-large btn-primary text-white d-flex justify-content-center align-items-center gap-1 w-100",disabled:!j.cell_phone&&!j.home_phone&&!j.work_phone,onClick:function(){ve();var e={patientId:j.id,patientType:j.isPatientCreated?"patient":"patient_lead"};i(ws({data:e}))},children:[Object(y.jsx)("img",{src:Vi,alt:"call-icon"}),Object(y.jsx)("div",{children:"Call"})]})]}),Object(y.jsxs)("button",{onClick:function(){var e={laneId:j.stageId,cardId:j.inquiry_id,patientName:le};i(ls({data:e}))},className:"btn btn-danger d-flex gap-1 align-items-center justify-content-center",children:[Object(y.jsx)("img",{src:Wi,alt:"cross-icon"}),Object(y.jsx)("div",{children:"Archive inquiry"})]}),Object(y.jsxs)("div",{className:Dc.a.info,children:[Object(y.jsxs)("div",{className:"d-flex my-2 gap-2 flex-wrap",children:[j.therapy_type&&Object(y.jsx)(_c,{size:"lg",source:j.therapy_type}),Object(y.jsx)(_c,{source:j.registrationMethod,size:"lg"}),Object(y.jsx)(_c,{source:j.source,size:"lg"})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Full name:"}),Object(y.jsx)("div",{className:Dc.a.value,children:le})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Date of birth:"}),Object(y.jsx)("div",{className:Dc.a.value,children:de})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Age:"}),Object(y.jsx)("div",{className:Dc.a.value,children:ue})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Sex:"}),Object(y.jsx)("div",{className:Dc.a.value,children:me})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Email:"}),Object(y.jsx)("div",{className:Dc.a.value,children:j.email||"-"})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Insurance:"}),Object(y.jsx)("div",{className:Dc.a.value,children:(null===(a=j.insurance)||void 0===a?void 0:a.insurance)||j.primary_insurance||"-"})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Address:"}),Object(y.jsx)("div",{className:Dc.a.value,children:j.address||"-"})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Provider:"}),Object(y.jsx)("div",{className:Dc.a.value,children:(null===je||void 0===je?void 0:je.provider_name)||"-"})]}),Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Appt. scheduled:"}),Object(y.jsx)("div",{className:g()(Dc.a.value,Dc.a[pe]),children:be||"-"})]})]}),function(){if(j.onboardingCompleteComment){var e=j.onboardingCompleteComment,t=e.comment,a=e.metadata,n=e.admin,s=e.created_at,r="".concat(n.firstname," ").concat(n.lastname),i=a.phone?jn(a.phone):"-",c=ya()(s).format("hh:mm A");return Object(y.jsxs)("div",{className:Dc.a.info,children:[Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold nowrap",children:"Onboarding done"}),Object(y.jsxs)("div",{children:["by ",r," at ",c]})]}),Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",style:{width:"75px"},children:"Comment:"}),Object(y.jsx)("div",{children:t})]}),Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",style:{width:"75px"},children:"Phone:"}),Object(y.jsx)("div",{children:i})]})]})}var o;return 3===j.stageId?Object(y.jsxs)("div",{className:Dc.a.info,children:[Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Onboarding time:"}),Object(y.jsx)("div",{className:Dc.a.value,children:"".concat(ye," ").concat(Ne)})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Co-pay:"}),Object(y.jsx)("div",{className:Dc.a.value,children:Ce||"-"})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Deductible:"}),Object(y.jsx)("div",{className:Dc.a.value,children:we||"-"})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Message:"}),Object(y.jsx)("div",{className:Dc.a.value,children:(null===(o=j.alert)||void 0===o?void 0:o.message)||"-"})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("div",{className:Dc.a.field,children:"Phone:"}),Object(y.jsx)("div",{className:Dc.a.value,children:j.onboardingPhone||"-"})]})]}):Object(y.jsx)(y.Fragment,{})}()]})]}),j.isPatientCreated&&Object(y.jsx)(vc,{showModal:z,closeModal:function(){U(!1)},patient:j})]})]})},Fc=a.p+"static/media/change-stage.29825bde.svg",Lc=Object(s.createContext)(),qc=Lc,Yc=function(){var e=Object(s.useContext)(qc),t=e.moveCardData,a=e.fromLaneTitle,n=e.toLaneTitle,r=e.errors,i=e.setErrors,c=e.clearError,o=e.isSaving,l=e.closeModal,d=e.handleConfirmCardMoveAcrossLanes,m=Object(s.useState)(""),b=Object(u.a)(m,2),j=b[0],p=b[1],f=function(){var e={};return j||(e.comment="Comment field is required."),i(e),0===Object.keys(e).length},h=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var a;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f()){e.next=2;break}return e.abrupt("return");case 2:return a={stage_id:t.toLaneId,comment:j},e.next=5,d(a);case 5:O(),l();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){O(),l()},O=function(){p(""),i({})};return Object(y.jsxs)(re.a,{show:t,className:"custom-modal",backdrop:"true",onHide:v,centered:!0,children:[Object(y.jsxs)(re.a.Header,{closeButton:!0,children:[Object(y.jsx)("div",{children:"\u0421hange inquiry stage:"}),Object(y.jsx)("div",{className:"name",children:jc(t.cardDetails.inquirable)})]}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 fs-16",children:[Object(y.jsxs)("div",{children:["From:"," ",Object(y.jsxs)("span",{className:"stage",children:['"',a,'"']})]}),Object(y.jsx)("img",{src:Fc,alt:"change-stage-icon"}),Object(y.jsxs)("div",{children:["To: ",Object(y.jsxs)("span",{className:"stage",children:['"',n,'"']})]})]}),Object(y.jsxs)("div",{className:"custom-form-group mt-4",children:[Object(y.jsxs)("label",{children:["Comment ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{placeholder:"Add your comment...",className:g()("form-control",r.comment&&"is-invalid"),style:{backgroundColor:"#fcfcfc"},autoFocus:!0,value:j,onChange:function(e){var t=e.target.value;p(t),t&&c(["comment"])}}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.comment})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"d-flex justify-content-end",children:o?Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"}):Object(y.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:v,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:h,children:"Confirm"})]})})})]})]})},Rc=a(63),Ec=a.n(Rc),Hc=Object(mi.a)({components:{MuiInputBase:{styleOverrides:{root:{height:"44px",backgroundColor:"rgb(247, 249, 252)",fontSize:"14px"}}},MuiOutlinedInput:{styleOverrides:{root:function(e){var t=e.ownerState;return Object(ct.a)({},t.focused&&{boxShadow:"0 0 0 0.25rem rgba(45, 133, 201, 0.25)"})},notchedOutline:function(e){e.ownerState;return{border:"1px solid #ced4da !important"}}}}}}),Bc="payment_for_service",zc="confidential_information",Uc=[{name:"new_patient",title:"Patient Information / Informed Consent / Privacy Notice",metadata:{}},{name:Bc,title:"Payment for Service and Fee Arrangements",metadata:{co_pay:0,payment_for_session_not_converted:0,self_pay:0,charge_for_cancellation:0,other_charges_price:0,other_charges:""}},{name:zc,title:"Authorization to Release Confidential Information",metadata:{exchange_with:[]}},{name:"telehealth",title:"Telehealth Consent Form",metadata:{}},{name:"supporting_documents",title:"Supporting Documents",metadata:{documents:["Insurance","Driver's License"]}},{name:"credit_card_on_file",title:"Add a Credit Card on File ",metadata:{}}],Vc={date:"",time:"",phone:""},Wc=function(){var e=Object(s.useContext)(qc),t=e.moveCardData,a=e.fromLaneTitle,n=e.toLaneTitle,r=e.errors,i=e.setErrors,c=e.clearError,o=e.isSaving,l=e.closeModal,d=e.handleConfirmCardMoveAcrossLanes,m=Object(s.useState)(Uc),b=Object(u.a)(m,2),j=b[0],p=b[1],f=Object(s.useState)(Vc),h=Object(u.a)(f,2),v=h[0],O=h[1],x=Object(s.useState)(!1),_=Object(u.a)(x,2),N=_[0],C=_[1],w=Object(s.useState)(!1),D=Object(u.a)(w,2),S=D[0],P=D[1],k=Object(s.useState)(""),I=Object(u.a)(k,2),T=I[0],F=I[1],L=Object(s.useState)(!1),q=Object(u.a)(L,2),Y=q[0],R=q[1],E=Object(s.useState)(""),H=Object(u.a)(E,2),B=H[0],z=H[1],U=Object(s.useState)(!1),V=Object(u.a)(U,2),W=V[0],K=V[1],G=Object(s.useState)(""),Z=Object(u.a)(G,2),J=Z[0],X=Z[1],Q=Object(s.useState)(""),$=Object(u.a)(Q,2),ee=$[0],te=$[1],ae=Object(s.useState)(!1),ne=Object(u.a)(ae,2),se=ne[0],ie=ne[1],ce=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},oe=function(e){return 10===e.length},le=function(){var e={};return Y&&!ce(B)&&(e.email="Please enter a valid email."),W&&!oe(J)&&(e.phone="Please enter a valid number."),N&&(Y||W||(e.send_via="Please select a form submission method."),0===pe.metadata.exchange_with.length&&(e.exchange_with_name="Please add at least one name to provide form access."),je.metadata.other_charges_price>0&&!je.metadata.other_charges&&(e.other_charges="Please fill out this field.")),v.phone&&!oe(v.phone)&&(e.onboarding_phone="Please enter a valid number."),i(e),0===Object.keys(e).length},de=function(){var e={stage_id:t.toLaneId,onboarding_data:v,send_via_email:Y,send_via_sms:W,phone:J,email:B,comment:T};return N&&(e.forms=j,S||(e.forms=e.forms.filter((function(e){return"credit_card_on_file"!==e.name})))),e},ue=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var t;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le()){e.next=2;break}return e.abrupt("return");case 2:return t=de(),e.next=5,d(t);case 5:be(),l();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){be(),l()},be=function(){p(Uc),O(v),C(!1),P(!1),F(""),R(!1),z(""),K(!1),X(""),i({})},je=j.find((function(e){return e.name===Bc})),pe=j.find((function(e){return e.name===zc})),fe=function(e,t){var a=j.map((function(a){if(a.name===Bc){var n=Object(ct.a)(Object(ct.a)({},a.metadata),{},Object(Fs.a)({},e,t));return Object(ct.a)(Object(ct.a)({},a),{},{metadata:n})}return a})),n=[e];"other_charges_price"===e&&0===Number(t)&&n.push("other_charges"),c(n),p(a)},he=function(){var e=t.cardDetails.inquirable,a=e.email,n=e.cell_phone,s=e.home_phone,r=e.work_phone,i=e.primary_insurance,o=e.is_payment_forbidden,l=e.visit_copay,d=e.is_self_pay,m=e.self_pay,b=e.insurance_pay,f=n||s||r;z(a),X(f),O(Object(ct.a)(Object(ct.a)({},v),{},{phone:f}));var h=j;i&&(h=function(e){var t=j.map((function(t){if(t.name===zc){var a=Object(ct.a)(Object(ct.a)({},t.metadata),{},{exchange_with:[e]});return Object(ct.a)(Object(ct.a)({},t),{},{metadata:a})}return t}));return p(t),t}(i)),o||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=j);for(var a=t.map((function(t){if(t.name===Bc){var a=Object(ct.a)(Object(ct.a)({},t.metadata),e);return Object(ct.a)(Object(ct.a)({},t),{},{metadata:a})}return t})),n=[],s=0,r=Object.entries(e);s<r.length;s++){var i=Object(u.a)(r[s],2),o=i[0],l=i[1];n.push(o),"other_charges_price"===o&&0===Number(l)&&n.push("other_charges")}c(n),p(a)}({co_pay:d?0:l,payment_for_session_not_converted:d?0:b,self_pay:d?m:0,charge_for_cancellation:100},h)};Object(s.useEffect)((function(){t&&he()}),[t]);var ve="-",Oe="-",xe="-",_e=t.cardDetails.inquirable.alert;return _e&&(ve="$".concat(_e.co_pay),Oe="$".concat(_e.deductible),xe=_e.message),Object(y.jsxs)(re.a,{show:t,className:"custom-modal",backdrop:"true",onHide:me,centered:!0,children:[Object(y.jsxs)(re.a.Header,{closeButton:!0,children:[Object(y.jsx)("div",{children:"\u0421hange inquiry stage:"}),Object(y.jsx)("div",{className:"name",children:jc(t.cardDetails.inquirable)})]}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 fs-16",children:[Object(y.jsxs)("div",{children:["From:"," ",Object(y.jsxs)("span",{className:"stage",children:['"',a,'"']})]}),Object(y.jsx)("img",{src:Fc,alt:"change-stage-icon"}),Object(y.jsxs)("div",{children:["To: ",Object(y.jsxs)("span",{className:"stage",children:['"',n,'"']})]})]}),Object(y.jsxs)("div",{className:"mt-2",children:[Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{className:"form-check-input",type:"checkbox",checked:N,onChange:function(e){var t=e.target.checked;t||(P(!1),R(!1),K(!1),c(["email","phone","exchange_with_name","send_via","other_charges"])),C(t)},id:"allFormsCheckbox"}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"allFormsCheckbox",children:"All forms"})]}),Object(y.jsxs)("div",{className:"form-check",children:[Object(y.jsx)("input",{className:"form-check-input",type:"checkbox",checked:S,disabled:!N,onChange:function(e){return P(e.target.checked)},id:"requireCreditCardCheckbox"}),Object(y.jsx)("label",{className:"form-check-label",htmlFor:"requireCreditCardCheckbox",children:"Require credit card"})]})]}),N&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"mt-2 mb-2",style:{fontSize:"16px"},children:[Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Co-pay:"}),Object(y.jsx)("div",{children:ve})]}),Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Deductible:"}),Object(y.jsx)("div",{children:Oe})]}),Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Message:"}),Object(y.jsx)("div",{children:xe})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{className:"form-group d-flex align-items-center",children:[Object(y.jsx)("label",{htmlFor:"coPay",className:g()("control-label",Ec.a.formLabel),children:"Co-pay and/or co-insurance for session"}),Object(y.jsx)("input",{className:g()("form-control",Ec.a.formInput),value:je.metadata.co_pay,onChange:function(e){return fe("co_pay",e.target.value)},type:"number",id:"coPay",disabled:!0})]}),Object(y.jsxs)("div",{className:"form-group d-flex align-items-center",children:[Object(y.jsx)("label",{htmlFor:"forSession",className:g()("control-label",Ec.a.formLabel),children:"Payment for session not covered due to deductible"}),Object(y.jsx)("input",{className:g()("form-control",Ec.a.formInput),type:"number",value:je.metadata.payment_for_session_not_converted,onChange:function(e){return fe("payment_for_session_not_converted",e.target.value)},id:"forSession",disabled:!0})]}),Object(y.jsxs)("div",{className:"form-group d-flex align-items-center",children:[Object(y.jsx)("label",{htmlFor:"selfPay",className:g()("control-label",Ec.a.formLabel),children:"Self-pay for session when paid out-of-pocket"}),Object(y.jsx)("input",{className:g()("form-control",Ec.a.formInput),type:"number",value:je.metadata.self_pay,onChange:function(e){return fe("self_pay",e.target.value)},id:"selfPay",disabled:!0})]}),Object(y.jsxs)("div",{className:"form-group d-flex align-items-center",children:[Object(y.jsx)("label",{htmlFor:"chargeCancellation",className:g()("control-label",Ec.a.formLabel),children:"Charge for cancellation without 24 hours\u2019 notice"}),Object(y.jsx)("input",{className:g()("form-control",Ec.a.formInput),type:"number",value:je.metadata.charge_for_cancellation,onChange:function(e){return fe("charge_for_cancellation",e.target.value)},id:"chargeCancellation",disabled:!0})]}),Object(y.jsxs)("div",{className:"form-group d-flex align-items-center",children:[Object(y.jsx)("label",{htmlFor:"otherCharges",className:g()("control-label",Ec.a.formLabel),children:"Other charges (price)"}),Object(y.jsx)("input",{className:g()("form-control",Ec.a.formInput),type:"number",value:je.metadata.other_charges_price,onChange:function(e){return fe("other_charges_price",e.target.value)},id:"otherCharges",disabled:t.cardDetails.inquirable.is_payment_forbidden})]}),Object(y.jsxs)("div",{className:"form-group d-flex align-items-center",children:[Object(y.jsx)("label",{htmlFor:"otherPrice",className:g()("control-label",Ec.a.formLabel),children:"Other charges (specify)"}),Object(y.jsxs)("div",{className:"d-flex flex-column",children:[Object(y.jsx)("input",{className:g()("form-control",r.other_charges&&"is-invalid"),style:{width:"270px"},value:je.metadata.other_charges,disabled:Number(je.metadata.other_charges_price)<=0||t.cardDetails.inquirable.is_payment_forbidden,onChange:function(e){return fe("other_charges",e.target.value)},id:"otherPrice"}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.other_charges})]})]}),Object(y.jsxs)("div",{className:"form-group d-flex align-items-start",children:[Object(y.jsx)("label",{htmlFor:"otherPrice",className:g()("mt-1","control-label",Ec.a.formLabel),children:"Authorization to Release Confidential Information"}),Object(y.jsxs)("div",{className:"d-flex flex-column",style:{width:"270px"},children:[Object(y.jsx)("input",{className:g()("form-control",r.exchange_with_name&&"is-invalid"),value:ee,placeholder:"Add person name",onChange:function(e){var t=e.target.value;te(t),t&&c(["exchange_with_name"])},id:"exchangeWithName"}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.exchange_with_name})]}),ee&&Object(y.jsx)("button",{className:g()("mt-1",Ec.a.formListInputBtn),type:"button",onClick:function(){var e=j.map((function(e){if(e.name===zc){var t=e.metadata.exchange_with,a=Object(ct.a)(Object(ct.a)({},e.metadata),{},{exchange_with:[].concat(Object(it.a)(t),[ee])});return Object(ct.a)(Object(ct.a)({},e),{},{metadata:a})}return e}));te(""),p(e),c(["exchange_with_name"])},disabled:!ee,children:Object(y.jsx)(Qi.a,{icon:$i.b,color:"#2F80ED",size:"xl"})})]}),pe.metadata.exchange_with.length>0&&Object(y.jsx)("ul",{className:Ec.a.formTagList,children:pe.metadata.exchange_with.map((function(e){return Object(y.jsx)("li",{className:Ec.a.formTagListItem,children:Object(y.jsxs)("div",{className:Ec.a.formTag,children:[Object(y.jsx)("span",{className:Ec.a.formTagText,children:e}),Object(y.jsx)("button",{type:"button",className:Ec.a.formTagRemove,onClick:function(){return function(e){var t=j.map((function(t){if(t.name===zc){var a=t.metadata.exchange_with.filter((function(t){return t!==e})),n=Object(ct.a)(Object(ct.a)({},t.metadata),{},{exchange_with:a});return Object(ct.a)(Object(ct.a)({},t),{},{metadata:n})}return t}));te(""),p(t)}(e)},children:Object(y.jsx)(Qi.a,{icon:$i.d,color:"#fff",size:"lg"})})]})},e)}))})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1 mt-4",children:[Object(y.jsx)("div",{className:"fw-bold",children:"How to send the forms? To email or phone number?"}),Object(y.jsxs)("div",{children:[Object(y.jsx)("input",{hidden:!0,className:g()(r.send_via&&"is-invalid")}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.send_via})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{children:"Send Forms Via Email"}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("div",{className:"mt-2",children:Object(y.jsx)("input",{className:"form-check-input",type:"checkbox",checked:Y,onChange:function(e){var t=e.target.checked;t||c(["email"]),c(["send_via"]),R(t)}})}),Object(y.jsxs)("div",{className:"d-flex flex-column w-100",children:[Object(y.jsx)("input",{className:g()("form-control",r.email&&"is-invalid"),value:B,disabled:!Y,onChange:function(e){var t=e.target.value.trim();ce(t)&&c(["email"]),z(t)},placeholder:"Email"}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.email})]})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{children:"Send Forms Via SMS"}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("div",{className:"mt-2",children:Object(y.jsx)("input",{className:"form-check-input",type:"checkbox",checked:W,onChange:function(e){var t=e.target.checked;if(!t){var a=Ts.a.cloneDeep(r);delete a.phone,i(a)}c(["send_via"]),K(t)}})}),Object(y.jsxs)("div",{className:"d-flex flex-column w-100",children:[Object(y.jsx)(hn,{phone:J,setPhone:function(e){var t=e.replace(/\D+/g,"");oe(t)&&c(["phone"]),X(t)},placeholder:"Phone number",disabled:!W,styles:{backgroundColor:"#F7F9FC"},error:!!r.phone}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.phone})]})]})]})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-2 mt-2",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Choose onboarding date and time"}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:Hc,children:Object(y.jsx)(Yr.a,{open:se,onOpen:function(){return ie(!0)},onClose:function(){return ie(!1)},value:v.date,onChange:function(e){return O(Object(ct.a)(Object(ct.a)({},v),{},{date:Er()(e).format("YYYY-MM-DD")}))},openTo:"day",minDate:Er()().startOf("day"),maxDate:Er.a.unix(t.cardDetails.nextAppointment.time),slotProps:{field:{readOnly:!0,onClick:function(){return ie(!se)}}}})})}),Object(y.jsx)("input",{className:"form-control",value:v.time,onChange:function(e){return O(Object(ct.a)(Object(ct.a)({},v),{},{time:e.target.value}))},placeholder:"Write time for the call"})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)(hn,{phone:v.phone,setPhone:function(e){var t=e.replace(/\D+/g,"");oe(t)&&c(["onboarding_phone"]),O(Object(ct.a)(Object(ct.a)({},v),{},{phone:t}))},placeholder:"Phone number",styles:{backgroundColor:"#F7F9FC"},error:!!r.onboarding_phone}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.onboarding_phone})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("input",{className:g()("form-control",r.comment&&"is-invalid"),value:T,onChange:function(e){var t=e.target.value;F(t),t&&c(["comment"])},placeholder:"Add your comment..."}),Object(y.jsx)("div",{className:"invalid-feedback",children:r.comment})]})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"d-flex justify-content-end",children:o?Object(y.jsx)("div",{className:"text-primary spinner-border spinner-border-md",role:"status"}):Object(y.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:me,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:ue,children:"Confirm"})]})})})]})]})},Kc=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.newPatientsDashboard})),a=Object(s.useContext)(se).enqueueNotification,n=t.moveCardData,r=t.lanes,i=t.eventBus,c=Object(s.useState)({}),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useState)(!1),j=Object(u.a)(b,2),p=j[0],f=j[1],h=n?r.filter((function(e){return e.id===n.fromLaneId}))[0].titleText:"",v=n?r.filter((function(e){return e.id===n.toLaneId}))[0].titleText:"",O=function(){var t=Object(M.a)(Object(A.a)().mark((function t(s){var r,c,o,l;return Object(A.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(!0),t.next=4,zn({id:n.cardId,data:s});case 4:r=t.sent,c=Di(r.data),e(ns({data:Object(ct.a)(Object(ct.a)({},n),{},{cardDetails:c})})),i.publish({type:"MOVE_CARD",fromLaneId:n.fromLaneId,toLaneId:n.toLaneId,cardId:n.cardId,index:n.index}),i.publish({type:"UPDATE_CARD",laneId:n.toLaneId,card:c}),t.next=19;break;case 11:if(t.prev=11,t.t0=t.catch(0),422!==(null===(o=t.t0.response)||void 0===o?void 0:o.status)){t.next=18;break}l=t.t0.response.data.errors.stage_id?t.t0.response.data.errors.stage_id:t.t0.response.data.message,a("Error",l),t.next=19;break;case 18:throw t.t0;case 19:return t.prev=19,f(!1),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,11,19,22]])})));return function(e){return t.apply(this,arguments)}}();return n?Object(y.jsx)(qc.Provider,{value:{moveCardData:n,fromLaneTitle:h,toLaneTitle:v,errors:d,setErrors:m,clearError:function(e){var t=Ts.a.cloneDeep(d);e.forEach((function(e){delete t[e]})),m(t)},isSaving:p,closeModal:function(){e(ds({data:null}))},handleConfirmCardMoveAcrossLanes:O},children:3===n.toLaneId?Object(y.jsx)(Wc,{}):Object(y.jsx)(Yc,{})}):Object(y.jsx)(y.Fragment,{})},Gc=a(292),Zc=a.n(Gc),Jc=function e(t){var a=t.option,n=t.onSelect,s=t.level,r={paddingLeft:"".concat(7*s,"px")},i=!!a.options;return Object(y.jsxs)("div",{className:Zc.a.optionComponent,children:[Object(y.jsx)("div",{onClick:function(){a.options||n(a.value)},className:g()(i?Zc.a.groupTitle:Zc.a.option),style:r,children:a.label}),a.options&&Object(y.jsx)("div",{className:"nested-options",children:a.options.map((function(t,a){return Object(y.jsx)(e,{option:t,onSelect:n,level:s+1},a)}))})]})},Xc=a(214),Qc=a.n(Xc),$c=function(e){var t=e.options,a=e.selectedOption,n=e.onSelect,r=Object(s.useRef)(null),i=Object(s.useState)(!1),c=Object(u.a)(i,2),o=c[0],l=c[1];Object(C.j)(r,(function(e){r.current&&r.current.contains(e.target)||l(!1)}));var d=function(e){l(!1),n(e)};return Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsxs)("div",{className:g()(Qc.a.selectInput,o&&Qc.a.isFocused),onClick:function(e){e.stopPropagation(),l(!o)},children:[Object(y.jsx)("div",{children:a}),Object(y.jsx)(mt.a,{className:Qc.a.arrow,path:o?dt.j:dt.i,size:1})]}),o&&Object(y.jsx)("div",{ref:r,className:Qc.a.options,children:t.map((function(e){return Object(y.jsx)(Jc,{option:e,onSelect:d,level:1},e.id)}))})]})},eo=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.app})).user,a=Object(l.c)((function(e){return e.newPatientsDashboard})),n=a.selectedCardData,r=a.fileTypeSelection,i=a.documentTypes,c=Object(s.useState)(null),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useState)(!1),j=Object(u.a)(b,2),p=j[0],f=j[1],v=Object(s.useState)(!1),O=Object(u.a)(v,2),x=O[0],_=O[1],g=function(e){var t=[];return t.push.apply(t,Object(it.a)(function e(t){var a=[];for(var n in t)if(t.hasOwnProperty(n)){var s={label:t[n].type,options:[]};if(t[n].childs){var r=e(t[n].childs);r.length>0&&(s.options=r)}0===s.options.length?a.push({value:t[n].id,label:s.label}):a.push(s)}return a}(e))),t}(i),N=d?function e(t,a){var n,s="",r=Object(ni.a)(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.value===t){s=i.label;break}if(i.options){var c=e(t,i.options);if(c){s=c.label||c;break}}}}catch(o){r.e(o)}finally{r.f()}return s}(d,g):"",C=function(){return r.patientIsCreated?(e={id:r.fileId},h.a.post("documents/delete",e)):(t=r.fileId,h.a.delete("api/new-patients-crm/leads/documents/".concat(t)));var e,t};window.onbeforeunload=function(){C()};var w=function(){m(null),f(!1),_(!1)};return Object(y.jsxs)(re.a,{show:r.showModal,centered:!0,onHide:function(){C(),e(Ss({data:{showModal:!1,fileId:null,patientIsCreated:!1}})),w()},className:"custom-modal custom-modal-sm",children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("h4",{className:"modal-title m-0",children:"File Type"})}),Object(y.jsx)(re.a.Body,{className:"container",children:r.fileId?Object(y.jsxs)("div",{className:"d-flex flex-column align-items-end gap-3",children:[Object(y.jsx)("div",{className:"w-100",children:Object(y.jsx)($c,{options:g,selectedOption:N,onSelect:function(e){m(e)}})}),Object(y.jsx)("div",{className:"w-100 form-group custom-form-group",children:Object(y.jsx)("div",{className:"checkbox prompt-checkbox",children:Object(y.jsxs)("label",{htmlFor:"checkbox",className:"d-flex gap-2",style:{width:"fit-content"},children:[Object(y.jsx)("input",{type:"checkbox",id:"checkbox",defaultChecked:p,onChange:function(e){return f(e.target.checked)}}),Object(y.jsx)("span",{children:"Visible Only For Administrator"})]})})}),Object(y.jsx)("div",{children:x?Object(y.jsx)("div",{className:"spinner-border text-primary",role:"status"}):Object(y.jsx)("button",{onClick:function(){_(!0);var a={document_id:r.fileId,document_type_id:d,other_document_type:"",visible_only_for_admin:p},s=function(a){var s=a.data,r=s.original_document_name,i=s.document_type,c=s.document_uploader,o=s.created_at,l={model:"PatientDocument",full_admin_name:"".concat(t.firstname," ").concat(t.lastname),document_type:i.type,document_uploader:c,created_at:o,original_document_name:r};e(ks({data:[l].concat(Object(it.a)(n.comments))})),e(Ss({data:{showModal:!1,fileId:null,patientIsCreated:!1}})),w()};r.patientIsCreated?function(e){return h.a.post("/documents/set-type",e)}(a).then((function(e){s(e)})):function(e){return h.a.put("api/new-patients-crm/leads/documents/".concat(e.document_id,"/set-type"),e)}(a).then((function(e){s(e)}))},className:"btn btn-primary",disabled:!d,children:"Ok"})})]}):Object(y.jsx)("div",{className:"p-1 d-flex align-items-center justify-content-center",children:Object(y.jsx)("div",{className:"spinner-border text-primary",role:"status"})})})]})},to=(a(498),a.p+"static/media/search-icon.810019f4.svg"),ao=a(338),no=a.n(ao),so=function(e){var t=e.value,a=e.onChange,n=e.placeholder,s=e.style;return Object(y.jsxs)("div",{className:"position-relative d-flex align-items-center h-100",children:[Object(y.jsx)("img",{src:to,alt:"search-icon",className:no.a.searchIcon}),Object(y.jsx)("input",{value:t,onChange:a,className:g()(no.a.searchInput,"form-control"),style:s,placeholder:n})]})},ro=a(411),io=a.n(ro),co=a.p+"static/media/stethoscope.e603a773.svg",oo=a.p+"static/media/bin-red.c8e4693b.svg",lo=a.p+"static/media/forms-not-send.80f19fa7.svg",uo=a.p+"static/media/forms-send.3f59a22c.svg",mo=a.p+"static/media/forms-signed.4f571609.svg",bo=a(215),jo=a.n(bo),po=function(e){var t=e.inquirable,a=t.last_document_request,n=t.last_document,s="Forms not send",r="Forms send",i="Forms signed",c=a?n?i:r:s,o=c===s?{className:jo.a.notSend,icon:lo,tooltipText:"Forms not sent"}:c===r?{className:jo.a.send,icon:uo,tooltipText:"Forms sent at ".concat(Xi()(t.last_document_request.created_at).format("MM/DD/YY"))}:c===i?{className:jo.a.signed,icon:mo,tooltipText:"Forms signed at ".concat(Xi()(t.last_document.created_at).format("MM/DD/YY"))}:null;return o?Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:o.tooltipText}),children:Object(y.jsx)("div",{className:g()(jo.a.status,o.className),children:Object(y.jsx)("img",{src:o.icon,alt:"status-icon"})})}):Object(y.jsx)(y.Fragment,{})},fo=a(110),ho=a.n(fo),vo=a(415),Oo=a.n(vo),xo=function(e){var t=e.createdAt,a=e.stageChangedAt,n=Da(t).format("MM/DD/YY"),s=function(){if(!a){var e=Da();return Da.duration(e.diff(Da(t))).days()}var n=Da();return Da.duration(n.diff(Da(a))).days()}(),r=function(){var e,t,a=(e="day",t="days",1===s?e:t);return"".concat(s," ").concat(a," on the stage")}();return s?Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsxs)(_a.a,{children:[Object(y.jsx)("div",{children:r}),Object(y.jsxs)("div",{children:["Created at: ",n]})]}),children:Object(y.jsxs)("div",{className:Oo.a.durationIndicator,children:[s,"d"]})}):Object(y.jsx)(y.Fragment,{})},_o=function(e){var t=e.id,a=e.stageId,n=e.inquirable,r=e.source,i=e.registrationMethod,c=e.nextAppointment,o=e.rescheduledAppointment,d=e.style,m=e.createdAt,b=e.stageChangedAt,j=e.isPatientCreated,p=e.isArchived,f=e.initialSurveyComplete,h=e.secondSurveyComplete,v=e.onboardingDate,_=e.onboardingTime,N=e.onboardingPhone,C=e.onboardingCompleteComment,w=Object(l.b)(),D=Object(s.useState)(!1),S=Object(u.a)(D,2),P=S[0],k=S[1],I=1!==a&&2!==a,A=Object(y.jsxs)("div",{className:"d-flex gap-1 text-danger",children:[Object(y.jsx)("img",{src:oo,alt:"bin-icon"}),Object(y.jsx)("div",{children:"Archive inquiry"})]}),M=function(e){return jc(e).trim()}(n),T=function(e){var t=Da(e),a=Da().diff(t,"years");return"".concat(a," years")}(n.date_of_birth),F=n.status?n.status.status:"Not created",L=n.status?"#".concat(n.status.hex_color):"#000000",q=c?o?x:O:null,Y=function(){if(!c)return{__html:""};var e="",t="".concat(c.date_of_service.date," ").concat(c.date_of_service.time);switch(q){case O:e="Appointment scheduled: ".concat(t);break;case x:var a="".concat(o.date_of_service.date," ").concat(o.date_of_service.time);e="Old appointment: ".concat(a," <br /> Rescheduled appointment: ").concat(t);break;default:return}return{__html:e}}(),R=function(e){switch(e){case"M":return"Male";case"F":return"Female";case"U":return"Unknown";default:return"Not specified"}}(n.sex),E=Ti({nextAppointment:c,isPatientCreated:j,inquirable:n}),H=n.providers?n.providers.filter((function(e){return!E||e.id!==E.id})):[];return Object(y.jsxs)("div",{className:ho.a.patientCard,style:d,onClick:function(){p||w(os({data:Object(ct.a)(Object(ct.a)({},n),{},{inquiry_id:t,stageId:a,source:r,registrationMethod:i,isPatientCreated:j,nextAppointment:c,rescheduledAppointment:o,onboardingDate:v,onboardingTime:_,onboardingPhone:N,onboardingCompleteComment:C})}))},children:[Object(y.jsxs)("div",{className:ho.a.patientInfo,children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(y.jsxs)("div",{className:"d-flex gap-1 flex-wrap",children:[n.therapy_type&&Object(y.jsx)(_c,{source:n.therapy_type}),Object(y.jsx)(_c,{source:i}),Object(y.jsx)(_c,{source:r})]}),Object(y.jsxs)("div",{className:g()("d-flex align-items-center gap-2",p&&ho.a.archived),children:[I&&Object(y.jsx)(po,{inquirable:n}),Object(y.jsx)("div",{className:ho.a.threeDotsButton,children:Object(y.jsx)(Cc,{text:A,onAction:function(){w(ls({data:{cardId:t,laneId:a,patientName:M}}))}})})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{className:ho.a.patientName,children:M}),Object(y.jsxs)("div",{className:"d-flex justify-content-between align-items-end",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("span",{children:[T,", ",R,","," "]}),Object(y.jsx)("span",{className:ho.a.patientStatus,style:{color:L},children:F})]}),Object(y.jsxs)("div",{className:"d-flex flex-column align-items-center gap-1",children:[Object(y.jsxs)("div",{className:"d-flex gap-1",children:[C?Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{children:"Onboarding completed"})}),children:Object(y.jsx)(mt.a,{path:dt.g,size:1,color:"rgb(51, 135, 199)"})}):Object(y.jsx)(y.Fragment,{}),f?Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{children:"Survey completed"})}),children:Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)(mt.a,{path:dt.k,size:1,color:"rgb(51, 135, 199)"}),h&&Object(y.jsx)("span",{className:"fw-bold",style:{color:"rgb(51, 135, 199)"},children:"2"})]})}):Object(y.jsx)(y.Fragment,{})]}),Object(y.jsx)(xo,{createdAt:m,stageChangedAt:b})]})]})]})]}),E&&Object(y.jsxs)("div",{children:[Object(y.jsx)("hr",{className:"m-0"}),Object(y.jsx)(xa.a,{placement:"bottom",overlay:!P&&H.length>1?Object(y.jsx)(_a.a,{id:"plus-icon",children:Object(y.jsx)("div",{className:"text-start",children:H.map((function(e){return Object(y.jsx)("div",{children:e.provider_name},e.id)}))})}):Object(y.jsx)(y.Fragment,{}),children:Object(y.jsxs)("div",{className:ho.a.therapistInfo,style:{backgroundColor:d.backgroundColor},children:[Object(y.jsxs)("div",{className:ho.a.providerName,children:[Object(y.jsx)("img",{src:co,alt:"stethoscope-icon"}),Object(y.jsx)("div",{children:E.provider_name})]}),c&&Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("span",{dangerouslySetInnerHTML:Y})}),children:Object(y.jsxs)("div",{onMouseEnter:function(){k(!0)},onMouseLeave:function(){k(!1)},className:g()(ho.a.nexAppointmentDate,ho.a[q]),children:["(",Da.unix(c.time).format("MM/DD"),")"]})})]})})]})]})},go=a(340),yo=a.n(go),No=function(e){var t=e.id,a=e.titleText,n=Object(l.c)((function(e){return e.newPatientsDashboard})).lanes.find((function(e){return e.id===t}));return n?Object(y.jsxs)("div",{className:yo.a.laneHeader,children:[Object(y.jsx)("div",{children:a}),Object(y.jsx)("div",{className:yo.a.label,children:n.label||0})]}):Object(y.jsx)(y.Fragment,{})},Co=function(e){var t=e.data,a=e.eventBusHandle,n=e.handleDragEnd,s=e.onLaneScroll,r={Card:_o,LaneHeader:No};return Object(y.jsx)("div",{children:Object(y.jsx)(io.a,{data:t,style:{backgroundColor:"white",padding:"0",gap:"10px",display:"flex"},components:r,cardDraggable:!0,hideCardDeleteIcon:!0,eventBusHandle:a,handleDragEnd:n,onLaneScroll:s,laneStyle:{display:"flex",margin:"0",padding:"0",backgroundColor:"#FFFFFF"}})})},wo=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})),a=t.newPatientsDashboard,n=t.app,i=(n.userData,n.queryParams),c=a.filters,o=a.lanes,d=a.searchValue,m=a.callModalData,b=a.loading,j=Object(s.useState)({lanes:[]}),p=Object(u.a)(j,2),f=p[0],v=p[1],O=Object(s.useState)(!1),x=Object(u.a)(O,2),_=x[0],g=x[1],N=r.a.useState(!1),C=Object(u.a)(N,2),w=C[0],D=C[1],S=Object(s.useState)(!1),k=Object(u.a)(S,2),I=k[0],T=(k[1],Object(s.useState)(d)),F=Object(u.a)(T,2),L=F[0],q=F[1],Y=Object(s.useState)(c),R=Object(u.a)(Y,2),E=R[0],H=R[1],B=Object(s.useContext)(se).enqueueNotification,z=function(e){return e.map((function(e){return Di(e)}))},U=function(){var t=Object(M.a)(Object(A.a)().mark((function t(){var a,n;return Object(A.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Ds({value:!0})),a=o.filter((function(e){return 9!==e.id})),n=[],a.forEach((function(e){var t,a=e.id,s={page:e.currentPage,search_text:d,source_id:c.source};9===a?t=En(s):(s.stage_id=a,t=Rn(s)),n.push(t)})),t.next=6,Promise.all(n);case 6:t.sent.forEach((function(t,n){var s=t.data,r=s.data,i=s.meta,c=a[n].id,o=z(r);e(as({data:o,meta:i,laneId:c}))})),e(Ds({value:!1}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Object(M.a)(Object(A.a)().mark((function t(){var a,n,s,r,i,o,l,d,m,b,j,p,f,v,O,x,_,y;return Object(A.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=h.a.get("/api/new-patients-crm/registration-methods"),n=h.a.get("/api/new-patients-crm/channels"),s=h.a.get("/api/new-patients-crm/sources"),r=h.a.get("/documents/types-tree"),i=h.a.get("/provider/dataset-for-tribute"),o=h.a.get("api/therapy-types"),l=Qa(),t.next=10,Promise.all([a,n,s,r,i,o,l]);case 10:return d=t.sent,m=Object(u.a)(d,7),b=m[0],j=m[1],p=m[2],f=m[3],v=m[4],O=m[5],x=m[6],e(js({data:b.data})),e(ps({data:j.data})),e(fs({data:p.data})),_=p.data.map((function(e){return e.id})),y=Object(ct.a)(Object(ct.a)({},c),{},{source:_}),H(y),e(bs({data:y})),e(Ps({data:f.data})),e(Is({data:v.data})),e(rn({numbers:x.data})),e(Cs({data:O.data.therapy_types})),t.next=32,U();case 32:g(!0),t.next=37;break;case 35:t.prev=35,t.t0=t.catch(0);case 37:case"end":return t.stop()}}),t,null,[[0,35]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t,a){var n,s;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.find((function(e){return e.id===a})),!((s=n.currentPage+1)<=n.lastPage)){e.next=5;break}return e.next=5,G(s,a);case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Ts.a.cloneDeep(o);I||(e=e.filter((function(e){return 9!==e.id}))),v((function(t){return Object(ct.a)(Object(ct.a)({},t),{},{lanes:e})}))};Object(s.useEffect)((function(){K(),V()}),[]),Object(s.useEffect)((function(){_&&(K(),function(){var t,a=i.selectedCard;if(a&&Object.values(o).forEach((function(e){t||(t=e.cards.find((function(e){return e.id===a})),console.log(t))})),t){var n=t,s=n.inquirable,r=n.id,c=n.stageId,l=n.source,d=n.registrationMethod,u=n.isPatientCreated;e(os({data:Object(ct.a)(Object(ct.a)({},s),{},{inquiry_id:r,stageId:c,source:l,registrationMethod:d,isPatientCreated:u})}))}}())}),[_]),Object(s.useEffect)((function(){_&&K()}),[I]),Object(s.useEffect)((function(){_&&U()}),[d,c]),Object(s.useEffect)((function(){JSON.stringify(o)!==JSON.stringify(f.lanes)&&_&&K()}),[o]);var G=function(){var t=Object(M.a)(Object(A.a)().mark((function t(a,n){var s,r,i,l,u;return Object(A.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=o.find((function(e){return e.id===n})),i={page:a,search_text:d,source_id:c.source},9!==n){t.next=8;break}return t.next=5,En(i);case 5:r=t.sent,t.next=12;break;case 8:return i.stage_id=n,t.next=11,Rn(i);case 11:r=t.sent;case 12:l=z(r.data.data),u=s.cards.concat(l),e(as({data:u,meta:r.data.meta,laneId:n}));case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Z=JSON.stringify(c)===JSON.stringify(E)&&d.toLowerCase()===L.toLowerCase();return Object(y.jsxs)(P,{children:[Object(y.jsxs)("div",{className:"container-fluid",children:[b&&Object(y.jsx)(Yi,{}),Object(y.jsx)("div",{className:"dashboardCard fullHeightDashboardCard position-relative",children:Object(y.jsxs)("div",{className:"d-flex flex-column gap-3",children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between",style:{height:"44px"},children:[Object(y.jsxs)("div",{className:"position-relative d-flex align-items-center gap-3",children:[Object(y.jsx)(so,{value:L,onChange:function(e){return q(e.target.value)},placeholder:"Search by name",style:{width:"254px"}}),Object(y.jsx)(Ir,{filters:E,setFilters:H}),Object(y.jsx)("button",{className:"btn btn-primary text-white d-flex align-items-center",onClick:function(){var t=o.map((function(e){return Object(ct.a)(Object(ct.a)({},e),{},{currentPage:1})}));e(ts({data:t})),e(bs({data:E})),e(ms({value:L}))},disabled:Z,children:"Show"})]}),Object(y.jsxs)("button",{onClick:function(){e(cs({value:!0}))},className:"btn btn-large btn-primary text-white d-flex align-items-center gap-2 ps-3",children:[Object(y.jsx)("img",{src:Dr,alt:"edit-icon"}),Object(y.jsx)("span",{children:"Add patient inquiry"})]})]}),Object(y.jsx)(Co,{data:f,eventBusHandle:function(t){e(us({eventBus:t}))},handleDragEnd:function(t,a,n,s,r){if(9===a||9===n)return!1;if(a===n)return!0;var i=Mi[n];if(i){var c=i.check(r);if(c)return B("Error",c),!1}return e(ds({data:{fromLaneId:a,toLaneId:n,cardId:t,index:s,cardDetails:r}})),!1},onLaneScroll:W})]})})]}),!b&&Object(y.jsxs)("div",{children:[Object(y.jsx)(Fi,{}),Object(y.jsx)(Tc,{}),Object(y.jsx)(Fr,{}),Object(y.jsx)(Kc,{}),Object(y.jsx)(eo,{}),Object(y.jsx)(An,{patientId:null===m||void 0===m?void 0:m.patientId,patientType:null===m||void 0===m?void 0:m.patientType,showModal:!!m,closeModal:function(){e(ws({data:null}))},openCallResultModal:function(){w||D(!0)}}),Object(y.jsx)(Gs,{showModal:w,closeModal:function(){D(!1)}})]})]})},Do=function(){var e=null,t=null,a=Object(s.useState)(!1),n=Object(u.a)(a,2),r=n[0],i=n[1],c=!1,o=Math.round(50),l=function(e){"are_you_still_modal_has_shown"!==e.key||JSON.parse(e.newValue)||(v(),b())};Object(s.useEffect)((function(){return j(),localStorage.setItem("are_you_still_modal_has_shown",(!1).toString()),window.addEventListener("storage",l),function(){window.removeEventListener("storage",l)}}),[]);var d=Object(J.a)(3e4,(function(){h.a.post("/empty-request")})),m=function(){e=setTimeout(p,3e6)},b=function(){c||(localStorage.setItem("are_you_still_modal_has_shown",(!1).toString()),clearTimeout(e),t&&clearTimeout(t),m(),d())},j=function(){document.addEventListener("keypress",b),document.addEventListener("mousemove",b),document.addEventListener("mousedown",b),document.addEventListener("touchmove",b),m()},p=function(){localStorage.setItem("are_you_still_modal_has_shown",(!0).toString()),i(!0),c=!0,t=setTimeout(f,6e5)},f=function(){document.getElementById("logout-form").submit()},v=function(){i(!1),c=!1};return Object(y.jsx)(re.a,{show:r,centered:!0,style:{zIndex:9999},children:Object(y.jsxs)("div",{className:"modal-content",children:[Object(y.jsx)("div",{className:"modal-header",children:Object(y.jsx)("h4",{style:{fontSize:"18px"},className:"m-0",children:"Are you still here?"})}),Object(y.jsxs)("div",{className:"modal-body",children:["No activity for ",o," minutes. Are you still here?"]}),Object(y.jsx)("div",{className:"modal-footer",children:Object(y.jsx)("button",{type:"button",className:"btn btn-primary text-white",onClick:function(){h.a.post("/empty-request"),v(),b(),localStorage.setItem("are_you_still_modal_has_shown",(!1).toString())},children:"Yes"})})]})})},So=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.get("/api/supervisor/supervisees",{params:e})},Po={supervisees:null,tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"patient_insurance",Header:"Patient's Insurance",width:120},{accessor:"date_of_assignment",Header:"Date of Assignment",Cell:function(e){var t=e.value;return t?ya()(t).format("MM/DD/YY"):"-"},sortType:Wa,width:80},{accessor:"count_visits",Header:"Count of Visits",width:100},{accessor:"date_of_last_visit",Header:"Date of Last Visit",Cell:Ba,sortType:Wa,width:80}]},ko=Object(Oa.b)({name:"supervisorDashboard",initialState:Po,reducers:{setSuperviseesAC:function(e,t){e.supervisees=t.payload.data}}}),Io=ko.reducer,Ao=ko.actions.setSuperviseesAC,Mo=a(703),To=a(293),Fo=a.n(To),Lo=function(e){var t=e.supervisee,a=Object(l.c)((function(e){return e.supervisorDashboard})).tableColumns,n=Object(s.useState)(null),r=Object(u.a)(n,2),i=r[0],c=r[1];return Object(s.useEffect)((function(){t&&c((t.provider&&t.provider.patients?t.provider.patients:[]).map((function(e){return{id:e.id,patient_id:e.id,patient_name:jc(e),patient_status:e.status,patient_insurance:e.insurance?e.insurance.insurance:"-",count_visits:e.appointments_count,date_of_last_visit:e.last_appointment?e.last_appointment.date_of_service.date:"-",date_of_assignment:e.date_of_assignment}})))}),[t]),i?Object(y.jsx)(Mo.a,{className:Fo.a.accordion,children:Object(y.jsxs)(Mo.a.Item,{eventKey:t.id,children:[Object(y.jsx)(Mo.a.Header,{className:Fo.a.header,children:Object(y.jsxs)("div",{className:"d-flex gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:t.provider.provider_name}),Object(y.jsxs)("div",{children:["(Patients: ",t.provider.patients.length,")"]}),t.provider.user.deleted_at&&Object(y.jsx)("div",{className:"text-danger",children:"Access suspended"})]})}),Object(y.jsx)(Mo.a.Body,{className:Fo.a.body,children:Object(y.jsx)("div",{className:"dashboard-table-wrapper",children:Object(y.jsx)(_t,{pageSize:1e3,columns:a,data:i,dataIsLoaded:!!i})})})]})}):Object(y.jsx)(y.Fragment,{})},qo=a(416),Yo=a.n(qo),Ro=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.app})).user,a=Object(s.useState)(null),n=Object(u.a)(a,2),r=n[0],i=n[1],c=Object(s.useState)(null),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(l.c)((function(e){return e.supervisorDashboard})).supervisees,j=3===t.role.id,p=$r(),f=function(){return b?b.length?b.filter((function(e){return!!e.provider})).map((function(e){return Object(y.jsx)(Lo,{supervisee:e},e.id)})):Object(y.jsx)("div",{className:"dashboardCard d-flex align-items-center justify-content-center",style:{height:"54px",fontSize:"16px"},children:"There are no supervisees yet"}):Object(y.jsx)(lr,{absolute:!0})},v=function(){if(d){var e=r.find((function(e){return e.id===d}));return{value:e.id,label:e.provider_name}}return{value:"",label:""}}();return Object(s.useEffect)((function(){if(j)return So().then((function(t){return e(Ao({data:t.data}))}));h.a.get("/api/supervisor").then((function(e){return i(e.data)}))}),[]),Object(s.useEffect)((function(){!j&&d&&(e(Ao({data:null})),So({supervisor_id:d}).then((function(t){return e(Ao({data:t.data}))})))}),[d]),Object(y.jsx)(P,{children:Object(y.jsx)("div",{className:"container-fluid",children:Object(y.jsx)("div",{className:"d-flex flex-column gap-2",children:j?f():r?r?Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{className:Yo.a.selectSupervisorBlock,children:[Object(y.jsx)("div",{className:"fw-bold ps-1",children:"Supervisor Name"}),Object(y.jsx)(Hr.a,{value:v,onChange:function(e){return m(e.value)},options:r.map((function(e){return{value:e.id,label:e.provider_name}})),isSearchable:!1,styles:p})]}),d&&f()]}):void 0:Object(y.jsx)(lr,{absolute:!0})})})})},Eo=a(46),Ho=function(e){var t=e.handleClick,a=e.className;return Object(y.jsx)("div",{className:a,onClick:t,children:Object(y.jsx)("svg",{height:"20",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",children:Object(y.jsx)("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"})})})},Bo=function(e,t){return h.a.put("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms/".concat(e,"/change-stage"),t)},zo=function(e,t){return h.a.post("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms/".concat(e,"/create-log"),t)},Uo=function(e,t){return h.a.post("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms/".concat(e,"/future-insurance-reauthorization-data"),t)},Vo=a(390),Wo=a(417),Ko=a.n(Wo),Go=function(e){var t=e.document,a=e.show,n=e.closeModal,r=Object(l.b)(),i=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard})),c=i.documentDefaultFaxesList,o=i.submittedReauthorizationRequestForms,d=o.tableData,m=o.tableParams,b="submittedReauthorizationRequestForms",j=Object(s.useContext)(se).enqueueNotification,p={value:"",label:""},f=Object(s.useState)(!1),v=Object(u.a)(f,2),O=v[0],x=v[1],_=Object(s.useState)(p),N=Object(u.a)(_,2),C=N[0],w=N[1],D=Object(s.useState)(""),S=Object(u.a)(D,2),P=S[0],k=S[1],I=Object(s.useState)({}),A=Object(u.a)(I,2),M=A[0],T=A[1],F=$r({backgroundColor:"rgb(243, 246, 249)"}),L=function(){var e=t.document_type.split("\\");return e[e.length-1]},q=function(e){r(Dl({tableName:b,value:e})),e.length!==m.total&&r(Il({tableName:b,value:e.length}));var t,a=(t=e.length,Math.max(1,Math.ceil(t/m.per_page)));a!==m.last_page&&r(kl({tableName:b,value:a}))};return Object(s.useEffect)((function(){T({})}),[C]),Object(y.jsxs)(re.a,{show:a,size:"sm",onHide:n,id:Ko.a.sendByFaxDialog,centered:!0,className:"custom-modal",children:[Object(y.jsx)(Ar.a,{className:"h6",closeButton:!0,children:"Send this document via fax"}),Object(y.jsxs)(Mr.a,{className:"container p-3",children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 w-100",children:[Object(y.jsx)("div",{className:"fw-bold",children:"To:"}),Object(y.jsx)("div",{className:"w-100",children:Object(y.jsx)(Hr.a,{value:C,onChange:function(e){return w(e)},options:[].concat(Object(it.a)(c),[{fax:-1,title:"Enter another fax number"}]).map((function(e){return{value:e.fax,label:e.title}})),styles:F,className:g()(M.selectedFax&&"is-invalid")})})]}),C.value&&Object(y.jsx)("div",{children:-1===C.value?Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Please enter fax number, digits only."}),Object(y.jsx)(hn,{phone:P,setPhone:function(e){return function(e){10===e.length&&T({}),k(e)}(e.replace(/\D+/g,""))},error:!!M.customPhone,alwaysShowMask:!0})]}):Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Fax:"}),Object(y.jsx)("div",{children:C.value})]})})]}),Object(y.jsx)(Vo.a,{className:"p-2 border-top",children:Object(y.jsx)("div",{className:"d-flex justify-content-end",children:Object(y.jsx)(G.a,{onClick:function(){if(function(){var e={};return C.value||(e.selectedFax=!0),-1===C.value&&10!==P.length&&(e.customPhone=!0),T(e),0===Object.keys(e).length}()){x(!0);var e=d.map((function(e){if(JSON.stringify(e.document)===JSON.stringify(t)){var a={created_at:ya()().format("YYYY-MM-DD HH:mm:ss")},n=Ts.a.cloneDeep(t.document_shared);return n.unshift(a),Object(ct.a)(Object(ct.a)({},e),{},{send_method:"fax",sent_at:ya()().format("MM/DD/YYYY"),document:Object(ct.a)(Object(ct.a)({},e.document),{},{document_shared:n})})}return e}));(function(e){return h.a.post("/patient/document-fax-send",e)})({document_model:L(),method:"fax",patient_documents_id:t.id,recipient:C.value?-1===C.value?"+1".concat(P):"+1".concat(C.value):""}).then((function(){q(e),w(p),k(""),T({}),x(!1),n(),j("Success","Document sent successfully")})).catch((function(){return j("Error","Something went wrong")})).finally((function(){x(!1)}))}},children:"Send"})})}),O&&Object(y.jsx)(Yi,{})]})},Zo=a(294),Jo=a.n(Zo),Xo=function(e){var t=e.document,a=e.show,n=e.closeModal,r=Object(l.b)(),i=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard})),c=i.documentDefaultEmailsList,o=i.submittedReauthorizationRequestForms,d=o.tableData,m=o.tableParams,b="submittedReauthorizationRequestForms",j=Object(s.useContext)(se).enqueueNotification,p={value:"",label:""},f=Object(s.useState)(!1),v=Object(u.a)(f,2),O=v[0],x=v[1],_=Object(s.useState)(p),N=Object(u.a)(_,2),C=N[0],w=N[1],D=Object(s.useState)(""),S=Object(u.a)(D,2),P=S[0],k=S[1],I=Object(s.useState)(""),A=Object(u.a)(I,2),M=A[0],T=A[1],F=Object(s.useState)({}),L=Object(u.a)(F,2),q=L[0],Y=L[1],R=$r({backgroundColor:"rgb(243, 246, 249)"});function E(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}var H=function(){var e=t.document_type.split("\\");return e[e.length-1]},B=function(){return C.value?-1===C.value?M:c.find((function(e){return e.email===C.value})).password:""},z=function(e){r(Dl({tableName:b,value:e})),e.length!==m.total&&r(Il({tableName:b,value:e.length}));var t,a=(t=e.length,Math.max(1,Math.ceil(t/m.per_page)));a!==m.last_page&&r(kl({tableName:b,value:a}))};return Object(s.useEffect)((function(){Y({})}),[C]),Object(y.jsxs)(re.a,{show:a,size:"sm",onHide:n,id:Jo.a.sendByEmailDialog,centered:!0,className:"custom-modal",children:[Object(y.jsx)(Ar.a,{className:"h6",closeButton:!0,children:"Send this document via email"}),Object(y.jsxs)(Mr.a,{className:"container p-3",children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 w-100",children:[Object(y.jsx)("div",{className:"fw-bold",children:"To:"}),Object(y.jsx)("div",{className:"w-100",children:Object(y.jsx)(Hr.a,{value:C,onChange:function(e){return w(e)},options:[].concat(Object(it.a)(c),[{email:-1,title:"Enter another email address"}]).map((function(e){return{value:e.email,label:e.title}})),styles:R,className:g()(q.selectedEmail&&"is-invalid")})})]}),C.value&&Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("label",{className:"d-flex align-items-center gap-2",children:[Object(y.jsx)("div",{className:Jo.a.label,children:"Email:"}),-1===C.value?Object(y.jsx)("input",{className:g()("form-control",!!q.customEmail&&"is-invalid"),value:P,onChange:function(e){E(e.target.value)&&Y({}),k(e.target.value)}}):Object(y.jsx)("div",{children:C.value})]}),Object(y.jsxs)("label",{className:"d-flex align-items-center gap-2",children:[Object(y.jsx)("div",{className:Jo.a.label,children:"Password:"}),-1===C.value?Object(y.jsx)("input",{className:g()("form-control",!!q.customPassword&&"is-invalid"),value:M,onChange:function(e){e.target.value&&Y({}),T(e.target.value)}}):Object(y.jsx)("div",{children:B()})]})]})]}),Object(y.jsx)(Vo.a,{className:"p-2 border-top",children:Object(y.jsx)("div",{className:"d-flex justify-content-end",children:Object(y.jsx)(G.a,{onClick:function(){if(function(){var e={};return C.value||(e.selectedEmail=!0),-1===C.value&&(E(P)||(e.customEmail=!0),M||(e.customPassword=!0)),Y(e),0===Object.keys(e).length}()){x(!0);var e=Ia,a=d.map((function(a){if(JSON.stringify(a.document)===JSON.stringify(t)){var n={created_at:ya()().format("YYYY-MM-DD HH:mm:ss")},s=Ts.a.cloneDeep(t.document_shared);return s.unshift(n),Object(ct.a)(Object(ct.a)({},a),{},{send_method:e,sent_at:ya()().format("MM/DD/YYYY"),document:Object(ct.a)(Object(ct.a)({},a.document),{},{document_shared:s})})}return a}));(function(e){return h.a.post("/patient/document-mail-send",e)})({document_model:H(),method:e,patient_documents_id:t.id,recipient:C.value?-1===C.value?P:C.value:"",shared_link_password:B()}).then((function(){z(a),w(p),k(""),Y({}),x(!1),n(),j("Success","Document sent successfully")})).catch((function(){return j("Error","Something went wrong")})).finally((function(){x(!1)}))}},children:"Send"})})}),O&&Object(y.jsx)(Yi,{})]})},Qo=a(119),$o=a.n(Qo),el=function(e){var t=e.show,a=e.closeModal,n=e.handleClick,r=e.title,i=Object(s.useState)(!1),c=Object(u.a)(i,2),o=c[0],l=c[1],d=Object(s.useState)(""),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)({}),f=Object(u.a)(p,2),h=f[0],v=f[1],O=function(){j(""),v(""),l(!1)},x=function(){var e={};return 0===b.length&&(e.comment=!0),v(e),0===Object.keys(e).length},_=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x()){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,n(b);case 5:l(!1),a(),O();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(re.a,{show:t,size:"sm",onHide:a,centered:!0,className:"custom-modal",children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsx)("div",{children:r})}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Comment ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{placeholder:"Add your comment...",className:g()("form-control",!!h.comment&&"is-invalid"),style:{backgroundColor:"#fcfcfc"},autoFocus:!0,value:b,onChange:function(e){b.length>0&&v({}),j(e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Comment field is required."})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:function(){O(),a()},children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:_,children:"Confirm"})]})})]}),o&&Object(y.jsx)(Yi,{})]})},tl=a(418),al=a.n(tl),nl=[{accessor:"user_name",Header:"User",disableSortBy:!0,width:150},{accessor:"old_stage",Header:"Old Stage",disableSortBy:!0,width:130},{accessor:"new_stage",Header:"New Stage",disableSortBy:!0,width:130},{accessor:"comment",Header:"Comment",disableSortBy:!0,width:200},{accessor:"created_at",Header:"Stage changed on",Cell:Ba,sortType:Wa,width:120}],sl=function(e){var t=e.requestForm,a=e.show,n=e.closeModal,s=t.stage_change_history||[],r={total:s.length};return Object(y.jsxs)(re.a,{show:a,size:"lg",onHide:n,centered:!0,className:"custom-modal",children:[Object(y.jsxs)(Ar.a,{className:"h6",closeButton:!0,children:["Stage Change History: ",t.patient_name]}),Object(y.jsx)(Mr.a,{className:"container p-3",children:Object(y.jsx)("div",{className:al.a.tableWrapper,children:Object(y.jsx)("div",{className:"d-flex align-items-center gap-2 w-100",children:Object(y.jsx)(_t,{pageSize:r.per_page,columns:nl,currentPage:r.current_page,data:s,dataIsLoaded:!0})})})})]})},rl=function(e){var t=e.requestForm,a=Object(l.b)(),n=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard.submittedReauthorizationRequestForms})).tableData,r=Object(s.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],d=Object(s.useState)(!1),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(!1),f=Object(u.a)(p,2),h=f[0],v=f[1],O=Object(s.useState)(!1),x=Object(u.a)(O,2),_=x[0],g=x[1],N=Object(s.useState)(!1),w=Object(u.a)(N,2),D=w[0],S=w[1],P=Object(s.useState)(!1),k=Object(u.a)(P,2),I=k[0],T=k[1],F=Object(s.useState)(!1),L=Object(u.a)(F,2),q=L[0],Y=L[1],R=Object(s.useContext)(se).enqueueNotification,E=Object(s.useRef)(null),H=Object(s.useRef)(null),B=t.document;Object(C.j)(H,(function(e){E.current&&E.current.contains(e.target)||o(!1)}));var z=function(){var e=Object(M.a)(Object(A.a)().mark((function e(s,r){var i,c,o;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={log_type:s,comment:r},e.next=3,zo(t.id,i);case 3:c=e.sent,o=n.map((function(e){if(e.id===t.id){var a=c.data,n=Ts.a.cloneDeep(e.logs);return n.unshift(a),Object(ct.a)(Object(ct.a)({},e),{},{send_method:Aa(a.log_type),sent_at:ya()(a.created_at).format("MM/DD/YYYY"),logs:n})}return e})),a(Dl({tableName:"submittedReauthorizationRequestForms",value:o})),R("Success","Log successfully created");case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=[{handleClick:function(e){z(1,e)},show:_,closeModal:function(){g(!1)},title:"Log Sending via Email"},{handleClick:function(e){z(2,e)},show:D,closeModal:function(){S(!1)},title:"Log Sending via Fax"},{handleClick:function(e){z(3,e)},show:I,closeModal:function(){T(!1)},title:"Log Phone Call"}];return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:$o.a.actionsButton,onClick:function(e){e.stopPropagation(),o(!c)},children:[Object(y.jsx)("div",{ref:E,children:Object(y.jsx)(mt.a,{path:dt.e,size:1})}),c&&Object(y.jsxs)("div",{ref:H,className:$o.a.menuDialog,children:[B?Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){var e=function(){var e=B.document_type.split("\\");return e[e.length-1]}();return"PatientDocument"===e?window.open("/patient/download-document/".concat(B.aws_document_name),"_blank"):"PatientElectronicDocument"===e?window.open("/patient/electronic-document/".concat(B.id,"/download"),"_blank"):void 0},children:"Download"}),Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){j(!0)},children:"Send via Email"}),Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){g(!0)},children:"Log Sending via Email"}),Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){v(!0)},children:"Send via Fax"}),Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){S(!0)},children:"Log Sending via Fax"})]}):Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){T(!0)},children:"Log Phone Call"}),Object(y.jsx)("div",{className:$o.a.menuItem,onClick:function(){Y(!0)},children:"Show Stage History"})]})]}),Object(y.jsx)(Xo,{document:B,show:b,closeModal:function(){j(!1)}}),Object(y.jsx)(Go,{document:B,show:h,closeModal:function(){v(!1)}}),U.map((function(e,t){return Object(y.jsx)(el,{handleClick:e.handleClick,show:e.show,closeModal:e.closeModal,title:e.title},t)})),Object(y.jsx)(sl,{requestForm:t,show:q,closeModal:function(){Y(!1)}})]})},il=function(e){var t=e.show,a=e.closeModal,n=e.handleClick,r=e.requestForm,i=e.newStageId,c=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard.submittedReauthorizationRequestForms})).stages,o=Object(s.useState)(!1),d=Object(u.a)(o,2),m=d[0],b=d[1],j=Object(s.useState)(""),p=Object(u.a)(j,2),f=p[0],h=p[1],v=Object(s.useState)({}),O=Object(u.a)(v,2),x=O[0],_=O[1];if(!r||!i)return Object(y.jsx)(y.Fragment,{});var N=c.find((function(e){return e.id===r.stage})).name,C=c.find((function(e){return e.id===i})).name,w=function(){h(""),_(""),b(!1)},D=function(){var e={};return 0===f.length&&(e.comment=!0),_(e),0===Object.keys(e).length},S=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D()){e.next=2;break}return e.abrupt("return");case 2:return b(!0),e.next=5,n(f);case 5:b(!1),a(),w();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(re.a,{show:t,size:"sm",onHide:a,centered:!0,className:"custom-modal",children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("div",{children:["Change stage: ",r.patient_name]})}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 fs-16",children:[Object(y.jsxs)("div",{children:["From:"," ",Object(y.jsxs)("span",{className:"stage",children:['"',N,'"']})]}),Object(y.jsx)("img",{src:Fc,alt:"change-stage-icon"}),Object(y.jsxs)("div",{children:["To: ",Object(y.jsxs)("span",{className:"stage",children:['"',C,'"']})]})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Comment ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{placeholder:"Add your comment...",className:g()("form-control",!!x.comment&&"is-invalid"),style:{backgroundColor:"#fcfcfc"},autoFocus:!0,value:f,onChange:function(e){f.length>0&&_({}),h(e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Comment field is required."})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:function(){w(),a()},children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:S,children:"Confirm"})]})})]}),m&&Object(y.jsx)(Yi,{})]})},cl=Object(mi.a)({components:{MuiInputBase:{styleOverrides:{root:{height:"44px",backgroundColor:"#fcfcfc",fontSize:"14px",color:"inherit",font:"inherit"}}},MuiOutlinedInput:{styleOverrides:{root:function(e){var t=e.ownerState;return Object(ct.a)({},t.focused&&{boxShadow:"0 0 0 0.25rem rgba(45, 133, 201, 0.25)"})},notchedOutline:function(e){e.ownerState;return{border:"1px solid #ced4da !important"}}}}}}),ol=function(e){var t=e.parentCallback,a=e.show,n=e.closeModal,r=e.requestForm,i=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard.submittedReauthorizationRequestForms})).stages,c=Object(s.useState)(!1),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useState)({}),j=Object(u.a)(b,2),p=j[0],f=j[1],h={auth_number:"",visits_auth:"",eff_start_date:"",eff_stop_date:"",comment:""},v=Object(s.useState)(h),O=Object(u.a)(v,2),x=O[0],_=O[1],N=Object(s.useContext)(se).enqueueNotification;if(!r)return Object(y.jsx)(y.Fragment,{});var C="#fcfcfc",w=i.find((function(e){return e.id===r.stage})).name,D=i.find((function(e){return 3===e.id})).name,S=function(){_(h),f({}),m(!1),n()},P=function(){var e={};return x.comment||(e.comment=!0),f(e),0===Object.keys(e).length},k=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var a;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,P()){e.next=3;break}return e.abrupt("return");case 3:return m(!0),a={auth_number:x.auth_number,visits_auth:x.visits_auth,eff_start_date:x.eff_start_date,eff_stop_date:x.eff_stop_date},e.next=7,Uo(r.id,a);case 7:return e.next=9,t(a,x.comment);case 9:S(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),N("Error","Something went wrong");case 15:return e.prev=15,m(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),I=function(e,t){_(Object(ct.a)(Object(ct.a)({},x),{},Object(Fs.a)({},e,t))),p[e]&&f(Object(ct.a)(Object(ct.a)({},p),{},Object(Fs.a)({},e,"")))};return Object(y.jsxs)(re.a,{show:a,size:"sm",onHide:n,centered:!0,className:"custom-modal",children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("div",{children:["Change stage: ",r.patient_name]})}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 fs-16",children:[Object(y.jsxs)("div",{children:["From:"," ",Object(y.jsxs)("span",{className:"stage",children:['"',w,'"']})]}),Object(y.jsx)("img",{src:Fc,alt:"change-stage-icon"}),Object(y.jsxs)("div",{children:["To: ",Object(y.jsxs)("span",{className:"stage",children:['"',D,'"']})]})]}),Object(y.jsxs)("div",{className:"custom-form-group",children:[Object(y.jsxs)("label",{children:["Comment ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{placeholder:"Add your comment...",className:g()("form-control",!!p.comment&&"is-invalid"),style:{backgroundColor:C},autoFocus:!0,value:x.comment,onChange:function(e){return I("comment",e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Comment field is required."})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group flex-grow-1",children:[Object(y.jsx)("label",{children:"Authorization Number"}),Object(y.jsx)("input",{className:"form-control",style:{backgroundColor:C},value:x.auth_number,onChange:function(e){return I("auth_number",e.target.value)}})]}),Object(y.jsxs)("div",{className:"custom-form-group flex-grow-1",children:[Object(y.jsx)("label",{children:"No. of Visits Authorized"}),Object(y.jsx)("input",{className:"form-control",style:{backgroundColor:C},value:x.visits_auth,onChange:function(e){return I("visits_auth",e.target.value)}})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group w-100",children:[Object(y.jsx)("label",{children:"Eff. Start Date"}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:cl,children:Object(y.jsx)(Yr.a,{value:x.eff_start_date?Er()(x.eff_start_date):null,onChange:function(e){return I("eff_start_date",Er()(e).format("YYYY-MM-DD"))},openTo:"year"})})}),Object(y.jsx)("input",{readOnly:!0,hidden:!0,className:"form-control",value:x.eff_start_date,type:"date"})]}),Object(y.jsxs)("div",{className:"custom-form-group w-100",children:[Object(y.jsx)("label",{children:"Eff. Stop Date"}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:cl,children:Object(y.jsx)(Yr.a,{value:x.eff_stop_date?Er()(x.eff_stop_date):null,onChange:function(e){return I("eff_stop_date",Er()(e).format("YYYY-MM-DD"))},openTo:"year"})})}),Object(y.jsx)("input",{readOnly:!0,hidden:!0,className:"form-control",value:x.eff_stop_date,type:"date"})]})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:S,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:k,children:"Update"})]})})]}),d&&Object(y.jsx)(Yi,{})]})},ll=a(154),dl=a.n(ll),ul=function(e){var t=e.parentCallback,a=e.show,n=e.closeModal,r=e.requestForm,i=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard.submittedReauthorizationRequestForms})).stages,c=Object(s.useState)(!1),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useState)({}),j=Object(u.a)(b,2),p=j[0],f=j[1],v=function(){var e={patient_id:r.patient_id,auth_number:"",visits_auth:"",eff_start_date:"",eff_stop_date:""};return r.future_auth_number_data&&(e.auth_number=r.future_auth_number_data.auth_number||"",e.visits_auth=r.future_auth_number_data.visits_auth||"",e.visits_auth=r.future_auth_number_data.visits_auth||"",e.eff_start_date=r.future_auth_number_data.eff_start_date||"",e.eff_stop_date=r.future_auth_number_data.eff_stop_date||""),e},O=v(),x=Object(s.useState)(O),_=Object(u.a)(x,2),N=_[0],C=_[1],w=Object(s.useContext)(se).enqueueNotification;if(Object(s.useEffect)((function(){var e=v();N!==e&&C(e)}),[r]),!r)return Object(y.jsx)(y.Fragment,{});var D=i.find((function(e){return e.id===r.stage})).name,S=i.find((function(e){return 6===e.id})).name,P=function(){C(O),f({}),m(!1),n()},k=function(){var e={};for(var t in N)N[t]||(e[t]=!0);return f(e),0===Object.keys(e).length},I=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k()){e.next=3;break}return e.abrupt("return");case 3:return m(!0),e.next=6,a=N,h.a.put("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms/auth-number",a);case 6:return w("Success","Authorization number successfully updated"),e.next=9,t(N);case 9:P(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w("Error","Something went wrong");case 15:return e.prev=15,m(!1),e.finish(15);case 18:case"end":return e.stop()}var a}),e,null,[[0,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),T=function(e,t){C(Object(ct.a)(Object(ct.a)({},N),{},Object(Fs.a)({},e,t))),p[e]&&f(Object(ct.a)(Object(ct.a)({},p),{},Object(Fs.a)({},e,"")))};return Object(y.jsxs)(re.a,{show:a,size:"sm",onHide:n,centered:!0,className:"custom-modal",children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("div",{children:["Change stage: ",r.patient_name]})}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsxs)("div",{className:"d-flex align-items-center gap-2 fs-16",children:[Object(y.jsxs)("div",{children:["From:"," ",Object(y.jsxs)("span",{className:"stage",children:['"',D,'"']})]}),Object(y.jsx)("img",{src:Fc,alt:"change-stage-icon"}),Object(y.jsxs)("div",{children:["To: ",Object(y.jsxs)("span",{className:"stage",children:['"',S,'"']})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group flex-grow-1",children:[Object(y.jsxs)("label",{children:["Authorization Number"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{className:g()("form-control",!!p.auth_number&&"is-invalid"),style:{backgroundColor:"#fcfcfc"},autoFocus:!0,value:N.auth_number,onChange:function(e){return T("auth_number",e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Auth Number field is required"})]}),Object(y.jsxs)("div",{className:"custom-form-group flex-grow-1",children:[Object(y.jsxs)("label",{children:["No. of Visits Authorized"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{className:g()("form-control",!!p.visits_auth&&"is-invalid"),style:{backgroundColor:"#fcfcfc"},value:N.visits_auth,onChange:function(e){return T("visits_auth",e.target.value)}}),Object(y.jsx)("div",{className:"invalid-feedback",children:"No. of Visits Authorized field is required"})]})]}),Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsxs)("div",{className:"custom-form-group w-100",children:[Object(y.jsxs)("label",{children:["Eff. Start Date"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:cl,children:Object(y.jsx)(Yr.a,{defaultValue:N.eff_start_date?Er()(N.eff_start_date):null,value:N.eff_start_date?Er()(N.eff_start_date):null,onChange:function(e){return T("eff_start_date",Er()(e).format("YYYY-MM-DD"))},openTo:"year"})})}),Object(y.jsx)("input",{readOnly:!0,hidden:!0,className:g()("form-control",p.eff_start_date&&"is-invalid"),value:N.eff_start_date,type:"date"}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Eff. Start Date field is required"})]}),Object(y.jsxs)("div",{className:"custom-form-group w-100",children:[Object(y.jsxs)("label",{children:["Eff. Stop Date"," ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(qr.a,{dateAdapter:Lr.a,children:Object(y.jsx)(ui.a,{theme:cl,children:Object(y.jsx)(Yr.a,{defaultValue:N.eff_stop_date?Er()(N.eff_stop_date):null,value:N.eff_stop_date?Er()(N.eff_stop_date):null,onChange:function(e){return T("eff_stop_date",Er()(e).format("YYYY-MM-DD"))},openTo:"year"})})}),Object(y.jsx)("input",{readOnly:!0,hidden:!0,className:g()("form-control",p.eff_stop_date&&"is-invalid"),value:N.eff_stop_date,type:"date"}),Object(y.jsx)("div",{className:"invalid-feedback",children:"Eff. Stop Date field is required"})]})]}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:P,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:I,children:"Update"})]})})]}),d&&Object(y.jsx)(Yi,{})]})},ml=function(e){var t=e.requestForm,a=Object(l.b)(),n=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard.submittedReauthorizationRequestForms})),r=n.tableData,i=n.tableParams,c=n.stages,o=n.selectedStages,d=Object(s.useState)(!1),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(!1),f=Object(u.a)(p,2),h=f[0],v=f[1],O=Object(s.useState)(!1),x=Object(u.a)(O,2),_=x[0],N=x[1],C=Object(s.useState)(null),w=Object(u.a)(C,2),D=w[0],S=w[1],P="submittedReauthorizationRequestForms",k=Object(s.useContext)(se).enqueueNotification,I=function(e){a(Dl({tableName:P,value:e})),e.length!==i.total&&a(Il({tableName:P,value:e.length}));var t,n=(t=e.length,Math.max(1,Math.ceil(t/i.per_page)));n!==i.last_page&&a(kl({tableName:P,value:n}))},T=function(){var e=Object(M.a)(Object(A.a)().mark((function e(t){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(D,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(M.a)(Object(A.a)().mark((function e(a,n){var s;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.filter((function(e){return!(e.id===t.id&&o.length>0)||o.some((function(e){return 3===e.value}))})).map((function(e){return e.id===t.id?Object(ct.a)(Object(ct.a)({},e),{},{stage:3,stage_changed_on:ya()().format("MM/DD/YYYY"),future_auth_number_data:a,stage_comment:n}):e})),e.next=3,q(3,n);case 3:I(s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(M.a)(Object(A.a)().mark((function e(a){var n;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.filter((function(e){return!(e.id===t.id&&o.length>0)||o.some((function(e){return 3===e.value}))})).map((function(e){return e.id===t.id?Object(ct.a)(Object(ct.a)({},e),{},{stage:6,stage_changed_on:ya()().format("MM/DD/YYYY"),auth_number_data:Object(ct.a)(Object(ct.a)({},e.auth_number_data),{},{insurance_authorization_number:a.auth_number,insurance_visits_auth:a.visits_auth,insurance_visits_auth_left:a.visits_auth,insurance_eff_start_date:a.eff_start_date,insurance_eff_stop_date:a.eff_stop_date}),stage_comment:""}):e})),e.next=3,q(6);case 3:I(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(M.a)(Object(A.a)().mark((function e(a){var n,s,i,c,l=arguments;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,e.next=3,Bo(t.id,{stage_id:a,comment:n});case 3:s=e.sent,i=s.data,c=r.filter((function(e){return!(e.id===t.id&&o.length>0)||o.some((function(e){return e.value===a}))})).map((function(e){return e.id===t.id?Object(ct.a)(Object(ct.a)({},e),{},{stage:a,stage_changed_on:ya()().format("MM/DD/YYYY"),stage_comment:n,stage_change_history:Ta(i)}):e})),S(null),I(c),k("Success","Stage successfully changed");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=$r({backgroundColor:"rgb(243, 246, 249)",fontSize:"12px"}),R=Object(ct.a)(Object(ct.a)({},Y),{},{container:function(e){return Object(ct.a)(Object(ct.a)({},e),{},{position:"static",height:"24px"})},control:function(e){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),Y.menu),{},{height:"24px",minHeight:"1px"})},menu:function(e){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),Y.menu),{},{top:"",width:"140px",transform:"translateY(-4px)"})},menuList:function(e){return Object(ct.a)(Object(ct.a)({},e),{},{overflow:"visible",maxHeight:"fit-content"})},indicatorsContainer:function(e){return Object(ct.a)(Object(ct.a)({},e),{},{height:"100%"})},indicatorSeparator:function(e){return Object(ct.a)(Object(ct.a)({},e),{},{height:"14px",margin:"4px 0"})}}),E=function(e){return t.stage===e||6===e&&(!function(){if(!t.auth_number_data)return!0;var e=t.auth_number_data,a=e.insurance_authorization_number,n=e.insurance_visits_auth_left,s=e.insurance_eff_stop_date;return!(a&&n&&s)||ya()(s,"YYYY-MM-DD").diff(ya()(),"days")<=0||n<=0}()&&!function(){if(!t.auth_number_data)return!1;var e=t.auth_number_data,a=e.insurance_authorization_number,n=e.insurance_visits_auth_left,s=e.insurance_eff_stop_date,r=e.reauthorization_notification_days_count,i=e.reauthorization_notification_visits_count;if(!a||!n||!s)return!1;var c=ya()(s,"YYYY-MM-DD").diff(ya()(),"days");return!(c<=0||n<=0)&&(c<=r||n<=i)}())},H=function(){var e=c.find((function(e){return e.id===t.stage}));return{value:e.id,label:e.name}}();return Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)(Hr.a,{value:H,onChange:function(e){return t=e.value,S(t),3===t?v(!0):6===t?N(!0):j(!0);var t},options:c.map((function(e){return{value:e.id,label:e.name,isDisabled:E(e.id)}})),isSearchable:!1,styles:R,className:g()(dl.a.stageSelect,"w-100")}),Object(y.jsx)("div",{children:function(){if(3===t.stage){var e="N/A",a="N/A",n="N/A",s="N/A";return t.future_auth_number_data&&(e=t.future_auth_number_data.auth_number||"N/A",a=t.future_auth_number_data.visits_auth||"N/A",n=t.future_auth_number_data.eff_start_date?ya()(t.future_auth_number_data.eff_start_date).format("MM/DD/YYYY"):"N/A",s=t.future_auth_number_data.eff_stop_date?ya()(t.future_auth_number_data.eff_stop_date).format("MM/DD/YYYY"):"N/A"),Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{style:{maxWidth:"300px"},children:Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[Object(y.jsx)("span",{className:dl.a.tooltipFieldName,children:"Comment:"}),Object(y.jsx)("span",{children:t.stage_comment})]}),Object(y.jsx)("hr",{className:"m-0 mb-1 mt-1"}),Object(y.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[Object(y.jsx)("span",{className:dl.a.tooltipFieldName,children:"Authorization Number:"}),Object(y.jsx)("span",{children:e})]}),Object(y.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[Object(y.jsx)("span",{className:dl.a.tooltipFieldName,children:"Visits Auth:"}),Object(y.jsx)("span",{children:a})]}),Object(y.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[Object(y.jsx)("span",{className:dl.a.tooltipFieldName,children:"Eff. Start Date:"}),Object(y.jsx)("span",{children:n})]}),Object(y.jsxs)("div",{className:"d-flex gap-1 align-items-center",children:[Object(y.jsx)("span",{className:dl.a.tooltipFieldName,children:"Eff. Stop Date:"}),Object(y.jsx)("span",{children:s})]})]})}),children:Object(y.jsx)("div",{children:Object(y.jsx)(ka,{})})})}return t.stage_comment?Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{children:t.stage_comment})}),children:Object(y.jsx)("div",{children:Object(y.jsx)(ka,{})})}):Object(y.jsx)(y.Fragment,{})}()}),Object(y.jsx)(ol,{parentCallback:F,show:h,closeModal:function(){return v(!1)},requestForm:t}),Object(y.jsx)(ul,{parentCallback:L,show:_,closeModal:function(){return N(!1)},requestForm:t}),Object(y.jsx)(il,{handleClick:T,show:b,closeModal:function(){return j(!1),void S(null)},requestForm:t,newStageId:D})]})},bl=a(187),jl=a.n(bl),pl=function(e){var t=e.authNumberData,a=t&&t.insurance_requires_verification?t.insurance_authorization_number||"N/A":"-",n=function(){if(!t||!t.insurance_requires_verification)return null;if(!t.insurance_authorization_number)return{__html:"Authorization number is not set"};var e=t.insurance_visits_auth,a=t.insurance_visits_auth_left,n=t.insurance_eff_start_date,s=t.insurance_eff_stop_date;return{__html:"<div>\n        No. of Visits Authorized: ".concat(e," <br />\n        No. of Visits Left: ").concat(a," <br />\n        Eff. Start Date: ").concat(n?ya()(n,"YYYY-MM-DD").format("MM/DD/YY"):"N/A"," <br />\n        Eff. Stop Date: ").concat(s?ya()(s,"YYYY-MM-DD").format("MM/DD/YY"):"N/A","\n        </div>")}}(),s=function(){if(!t)return!1;var e=t.insurance_requires_verification,a=t.insurance_authorization_number,n=t.insurance_visits_auth_left,s=t.insurance_eff_stop_date;if(e&&!a)return!0;if(e&&n<=0)return!0;var r=ya()(ya()().format("YYYY-MM-DD"));return!!(e&&s&&ya()(s).diff(r,"days")<=0)}()?jl.a.overdue:function(){if(!t)return!1;var e=t.insurance_requires_verification,a=t.insurance_visits_auth_left,n=t.insurance_eff_stop_date,s=t.reauthorization_notification_visits_count,r=t.reauthorization_notification_days_count;if(e&&a<=s&&a>0)return!0;var i=ya()(ya()().format("YYYY-MM-DD"));return!!(e&&n&&ya()(n).diff(i,"days")<=r&&ya()(n).diff(i,"days")>0)}()?jl.a.almostOverdue:"";return Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("div",{className:s,children:a}),t&&n&&Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{dangerouslySetInnerHTML:n})}),children:Object(y.jsx)("div",{className:jl.a.helpIcon,children:Object(y.jsx)(mt.a,{path:dt.h,size:.6})})})]})},fl=a(419),hl=a.n(fl),vl=function(e){var t=e.patientId,a=Object(l.b)(),n=Object(l.c)((function(e){return e})),r=n.app,i=n.reauthorizationRequestsDashboard,c=Object(s.useState)(!1),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useContext)(se).enqueueNotification,j=function(e){return e.insurance_plan?{insurance_requires_verification:e.insurance_plan.is_verification_required,insurance_authorization_number:e.auth_number,insurance_visits_auth:e.visits_auth,insurance_visits_auth_left:e.visits_auth_left,insurance_eff_start_date:e.eff_start_date,insurance_eff_stop_date:e.eff_stop_date,reauthorization_notification_visits_count:e.insurance_plan.reauthorization_notification_visits_count,reauthorization_notification_days_count:e.insurance_plan.reauthorization_notification_days_count}:null},p=function(e){var t="submittedReauthorizationRequestForms",n=r.user,s=e.patient,c=i.submittedReauthorizationRequestForms,o=c.tableData,l=c.tableParams,d=Ts.a.cloneDeep(o),u={id:e.id,patient_id:s.id,patient_name:"".concat(s.first_name," ").concat(s.last_name),insurance:s.primary_insurance||s.secondary_insurance||"-",patient_status:s.status,logs:[],document:null,auth_number_data:j(s),submitted_by:"".concat(n.firstname," ").concat(n.lastname),submitted_at:ya()(e.created_at).format("MM/DD/YYYY"),send_method:"-",sent_at:"-",stage:e.stage_id,stage_changed_on:e.stage_changed_at?ya()(e.stage_changed_at).format("MM/DD/YYYY"):"-",stage_comment:e.comment};d.unshift(u),a(Pl({tableName:t,value:1})),a(Dl({tableName:t,value:d})),a(Il({tableName:t,value:d.length}));var m,b=(m=d.length,Math.max(1,Math.ceil(m/i.submittedReauthorizationRequestForms.tableParams.per_page)));b!==l.last_page&&a(kl({tableName:t,value:b}))};return Object(y.jsx)("button",{onClick:function(){m(!0),function(e){return h.a.post("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms",e)}({patient_id:t}).then((function(e){var n=e.data;!function(){var e=i.upcomingReauthorizationRequests.tableData.map((function(e){return e.patient_id===t?Object(ct.a)(Object(ct.a)({},e),{},{can_create_reauthorization_form:!1}):e}));a(Dl({tableName:"upcomingReauthorizationRequests",value:e}))}(),p(n),b("Success","Reauthorization request form successfully created")})).finally((function(){return m(!1)}))},className:g()("btn btn-primary",hl.a.tableActionButton),children:d?Object(y.jsx)(lr,{color:"#fff",size:"sm"}):Object(y.jsx)("span",{children:"Create request"})})},Ol={patientStatuses:[],providersList:[],documentDefaultFaxesList:[],documentDefaultEmailsList:[],upcomingReauthorizationRequests:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,sortType:Ua,width:150},{accessor:"insurance",Header:"Insurance",width:100},{accessor:"provider",Header:"Therapist Name",width:120},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"auth_number",Header:"Authorization number",width:110},{accessor:"eff_start_date",Header:"Eff. Start Date",sortType:Wa,width:100},{accessor:"eff_stop_date",Header:"Eff. Stop Date",sortType:Wa,width:100},{accessor:"visits_auth",Header:"Visits Auth",width:60},{accessor:"visits_auth_left",Header:"Visits Auth Left",width:100},{accessor:"reauhtorization_request_document",Header:"Document Status",Cell:function(e){var t=e.row,a=e.value,n="Not created",s="red";return t.original.insurance_plan&&!t.original.insurance_plan.requires_reauthorization_document?(n="Not required",s="yellow"):a&&(n="Created",s="green"),Object(y.jsx)(Ea,{title:n,className:s})},sortType:function(e,t,a){var n="Not created",s="Not created";return e.original.insurance_plan&&!e.original.insurance_plan.requires_reauthorization_document?n="Not required":e.original[a]&&(n="Created"),t.original.insurance_plan&&!t.original.insurance_plan.requires_reauthorization_document?s="Not required":t.original[a]&&(s="Created"),n<s?-1:n>s?1:0},width:100},{accessor:"action",Header:"Action",disableSortBy:!0,Cell:function(e){var t=e.row;return t.original.can_create_reauthorization_form?Object(y.jsx)(vl,{patientId:t.original.id}):Object(y.jsx)(y.Fragment,{})},width:110}],loading:!0,dataIsLoaded:!1,tableParams:{total:0,per_page:15,current_page:1,last_page:1},therapistName:{value:0,label:"All"},selectedPatientStatuses:[{value:1,label:"Active"}],expirationsList:[],selectedExpiration:[],searchText:""},submittedReauthorizationRequestForms:{tableData:[],tableColumns:[{Header:"",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:function(e){var t=e.row,a=e.value,n=t.original.patient_id,s=t.original.document;if(!s)return Object(y.jsx)("a",{className:"text-decoration-none",href:"/chart/".concat(n),children:a});var r=s.document_type.split("\\"),i=r[r.length-1];return Object(y.jsx)("a",{className:"text-decoration-none",href:"/chart/".concat(n,"?scrollto=").concat(i).concat(s.id),children:a})},sortType:Ua,width:150},{accessor:"insurance",Header:"Insurance",width:120},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"auth_number_data",Header:"Authorization number",Cell:function(e){var t=e.value;return Object(y.jsx)(pl,{authNumberData:t})},width:120},{accessor:"submitted_by",Header:"Request filed by",width:120},{accessor:"submitted_at",Header:"Request filed at",sortType:Wa,width:80},{accessor:"send_method",Header:"Submitted via",Cell:function(e){var t,a=e.value.charAt(0).toUpperCase()+e.value.slice(1),n=e.row.original.logs?e.row.original.logs[0]:null,s=null!==(t=e.row.original.document)&&void 0!==t&&t.document_shared?e.row.original.document.document_shared[0]:null;if(!n&&!s)return a;var r=Ma(n,s);if(!r.log_type)return a;var i=r.comment;return Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsx)("span",{children:a}),Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{children:i})}),children:Object(y.jsx)("div",{children:Object(y.jsx)(ka,{})})})]})},width:100},{accessor:"sent_at",Header:"Submitted at",sortType:Wa,width:100},{accessor:"stage",Header:"Stage",Cell:function(e){var t=e.row;return Object(y.jsx)(ml,{requestForm:t.original})},width:150},{accessor:"stage_changed_on",Header:"Stage changed on",sortType:Wa,width:110},{accessor:"actions",Header:"Actions",disableSortBy:!0,Cell:function(e){var t=e.row;return Object(y.jsx)(rl,{requestForm:t.original})},width:80}],loading:!0,dataIsLoaded:!1,tableParams:{total:0,per_page:15,current_page:1,last_page:1},stages:[],submittedBy:{value:0,label:"All"},selectedPatientStatuses:[],selectedStages:[{value:1,label:"Ready to send"}],searchText:""}},xl=Object(Oa.b)({name:"reauthorizationRequestsDashboard",initialState:Ol,reducers:{setPatientStatusesAC:function(e,t){e.patientStatuses=t.payload.value},setProvidersListAC:function(e,t){e.providersList=t.payload.value},setDocumentDefaultFaxesListAC:function(e,t){e.documentDefaultFaxesList=t.payload.value},setDocumentDefaultEmailsListAC:function(e,t){e.documentDefaultEmailsList=t.payload.value},setDataInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableData=s},setDataIsLoadedAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].dataIsLoaded=s},setCurrentPageInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.current_page=s},setLastPageInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.last_page=s},setTotalInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.total=s},setUpcomingReauthorizationTherapistNameAC:function(e,t){e.upcomingReauthorizationRequests.therapistName=t.payload.value},setUpcomingReauthorizationSelectedPatientStatusesAC:function(e,t){e.upcomingReauthorizationRequests.selectedPatientStatuses=t.payload.value},setUpcomingReauthorizationExpirationsListAC:function(e,t){e.upcomingReauthorizationRequests.expirationsList=t.payload.value},setUpcomingReauthorizationSelectedExpirationAC:function(e,t){e.upcomingReauthorizationRequests.selectedExpiration=t.payload.value},setUpcomingReauthorizationSearchTextAC:function(e,t){e.upcomingReauthorizationRequests.searchText=t.payload.value},setRequestFormStagesAC:function(e,t){e.submittedReauthorizationRequestForms.stages=t.payload.value},setRequestFormSubmittedByAC:function(e,t){e.submittedReauthorizationRequestForms.submittedBy=t.payload.value},setRequestFormSelectedPatientStatusesAC:function(e,t){e.submittedReauthorizationRequestForms.selectedPatientStatuses=t.payload.value},setRequestFormSelectedStagesAC:function(e,t){e.submittedReauthorizationRequestForms.selectedStages=t.payload.value},setRequestFormSearchTextAC:function(e,t){e.submittedReauthorizationRequestForms.searchText=t.payload.value}}}),_l=xl.reducer,gl=xl.actions,yl=gl.setPatientStatusesAC,Nl=gl.setProvidersListAC,Cl=gl.setDocumentDefaultFaxesListAC,wl=gl.setDocumentDefaultEmailsListAC,Dl=gl.setDataInTableAC,Sl=gl.setDataIsLoadedAC,Pl=gl.setCurrentPageInTableAC,kl=gl.setLastPageInTableAC,Il=gl.setTotalInTableAC,Al=gl.setUpcomingReauthorizationTherapistNameAC,Ml=gl.setUpcomingReauthorizationSelectedPatientStatusesAC,Tl=gl.setUpcomingReauthorizationExpirationsListAC,Fl=gl.setUpcomingReauthorizationSelectedExpirationAC,Ll=gl.setUpcomingReauthorizationSearchTextAC,ql=gl.setRequestFormStagesAC,Yl=gl.setRequestFormSubmittedByAC,Rl=gl.setRequestFormSelectedPatientStatusesAC,El=gl.setRequestFormSelectedStagesAC,Hl=gl.setRequestFormSearchTextAC,Bl=a(87),zl=a.n(Bl),Ul=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard})),a=t.patientStatuses,n=t.providersList,r=t.upcomingReauthorizationRequests,i=r.tableData,c=r.tableColumns,o=r.tableParams,d=r.dataIsLoaded,u=r.therapistName,m=r.selectedPatientStatuses,b=r.expirationsList,j=r.selectedExpiration,p=r.searchText,f="upcomingReauthorizationRequests",v=$r(),O=Object(ct.a)(Object(ct.a)({},v),{},{valueContainer:function(e){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),v.valueContainer),{},{paddingRight:"25px"})}}),x=function(e){return function(e){if(!e.auth_number||!e.visits_auth_left||!e.eff_stop_date)return!1;var t=ya()(e.eff_stop_date,"YYYY-MM-DD").diff(ya()(),"days");return!(t<=0||e.visits_auth_left<=0)&&(t<=e.insurance_plan.reauthorization_notification_days_count||e.visits_auth_left<=e.insurance_plan.reauthorization_notification_visits_count)}(e)?"almost-overdue":function(e){return!(e.auth_number&&e.visits_auth_left&&e.eff_stop_date)||ya()(e.eff_stop_date,"YYYY-MM-DD").diff(ya()(),"days")<=0||e.visits_auth_left<=0}(e)?"overdue":""},_=function(e){var t=e.insurance_plan,a=e.insurance_reauthorization_request_forms;return!(!t||t.requires_reauthorization_document)&&(!a&&0===a.length||!a.some((function(e){return 1===e.stage_id})))},N=function(){var t;e(Sl({tableName:f,value:!1})),e(Pl({tableName:f,value:1})),(t=function(){var e={};return u.value&&(e.provider_id=u.value),m.length>0&&(e.patient_statuses=m.map((function(e){return e.value}))),j.length>0&&(e.expiration=j.map((function(e){return e.value}))),p&&(e.search_text=p),e}(),h.a.get("/api/reauthorization-request-dashboard/upcoming-reauthorization-requests",{params:t})).then((function(t){var a=t.data,n=function(e){var t=[];return e.forEach((function(e){var a,n;t.push({id:e.id,patient_id:e.id,patient_name:"".concat(e.first_name," ").concat(e.last_name),insurance:e.primary_insurance||e.secondary_insurance||"-",insurance_plan:e.insurance_plan,provider:(null===(a=e.last_appointment)||void 0===a||null===(n=a.provider)||void 0===n?void 0:n.provider_name)||"-",patient_status:e.status,auth_number:e.auth_number||"N/A",eff_start_date:e.eff_start_date?ya()(e.eff_start_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"-",eff_stop_date:e.eff_stop_date?ya()(e.eff_stop_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"-",visits_auth:e.visits_auth||"-",visits_auth_left:e.visits_auth_left||"-",reauhtorization_request_document:e.reauhtorization_request_document,row_class_name:x(e),can_create_reauthorization_form:_(e)})})),t}(a.data);e(Dl({tableName:f,value:n})),e(Il({tableName:f,value:a.meta.total}));var s,r=(s=a.meta.total,Math.max(1,Math.ceil(s/o.per_page)));r!==o.last_page&&e(kl({tableName:f,value:r})),e(Sl({tableName:f,value:!0}))}))};Object(s.useEffect)((function(){N()}),[]);var C=document.getElementById("upcoming-reauthorization-requests");return Object(y.jsxs)("div",{className:"dashboard-table-wrapper",children:[C&&Object(Eo.createPortal)(Object(y.jsxs)("div",{className:"d-flex gap-2 mb-2",style:{minHeight:"44px"},children:[Object(y.jsxs)("div",{className:"flex-shrink-0 d-flex flex-column gap-1",style:{width:"200px"},children:[Object(y.jsx)("div",{className:"fw-bold",children:"Therapist Name"}),Object(y.jsxs)("div",{className:"position-relative d-flex align-items-center",children:[Object(y.jsx)(Hr.a,{value:u,onChange:function(t){return e(Al({value:t}))},options:[{id:0,provider_name:"All"}].concat(Object(it.a)(n)).map((function(e){return{value:e.id,label:e.provider_name}})),className:zl.a.submittedBySelect,styles:O}),0!==u.value&&Object(y.jsx)(Ho,{handleClick:function(){e(Al({value:{value:0,label:"All"}}))},className:g()(zl.a.cross,zl.a.submittedByCross)})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Patient Name"}),Object(y.jsxs)("div",{className:"position-relative d-flex align-items-center",children:[Object(y.jsx)(so,{value:p,onChange:function(t){return e(Ll({value:t.target.value}))},placeholder:"Search by name",style:{width:"200px",height:"38px",paddingRight:"30px"}}),p&&Object(y.jsx)(Ho,{handleClick:function(){e(Ll({value:""}))},className:g()(zl.a.cross,zl.a.searchCross)})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",style:{width:"400px"},children:[Object(y.jsx)("div",{className:"fw-bold",children:"Patient Status"}),Object(y.jsx)(Hr.a,{value:m,onChange:function(t){return e(Ml({value:t}))},options:a.map((function(e){return{value:e.id,label:e.status}})),isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select statuses...",styles:v})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",style:{width:"400px"},children:[Object(y.jsx)("div",{className:"fw-bold",children:"Expiration"}),Object(y.jsx)(Hr.a,{value:j,onChange:function(t){return e(Fl({value:t}))},options:b.map((function(e){return{value:e.id,label:e.title}})),isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select expiration...",styles:v})]}),Object(y.jsx)("button",{className:g()("btn btn-large btn-primary",zl.a.btnFetchTableData),disabled:!d,onClick:N,children:"Show"})]}),C),Object(y.jsx)(_t,{pageSize:o.per_page,columns:c,currentPage:o.current_page,data:i,dataIsLoaded:d})]})},Vl=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.reauthorizationRequestsDashboard})),a=t.patientStatuses,n=t.providersList,r=t.submittedReauthorizationRequestForms,i=r.tableData,c=r.tableColumns,o=r.dataIsLoaded,d=r.tableParams,u=r.stages,m=r.submittedBy,b=r.selectedPatientStatuses,j=r.selectedStages,p=r.searchText,f="submittedReauthorizationRequestForms",v=$r(),O=Object(ct.a)(Object(ct.a)({},v),{},{valueContainer:function(e){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),v.valueContainer),{},{paddingRight:"25px"})}}),x=function(e){if(!e)return"-";if(e.provider_id)return e.provider.provider_name;var t=e.meta,a=t.firstname,n=t.lastname;return"".concat(a," ").concat(n)},_=function(e){return e.document?ya()(e.document.created_at).format("MM/DD/YYYY"):ya()(e.created_at).format("MM/DD/YYYY")},N=function(e){var t=e.document,a=null,n=null;if(e.logs&&e.logs.length>0&&(a=e.logs[0]),t&&0!==t.document_shared.length&&(n=t.document_shared[0]),!a&&!n)return"-";var s=Ma(a,n);return s.log_type?Aa(s.log_type):s.shared_method.method},C=function(e){var t=e.document,a=null,n=null;if(e.logs&&e.logs.length>0)return a=e.logs[0],ya()(e.logs[0].created_at).format("MM/DD/YYYY");if(t&&0!==t.document_shared.length)return n=t.document_shared[0],ya()(t.document_shared[0].created_at).format("MM/DD/YYYY");if(!a&&!n)return"-";var s=Ma(a,n);return ya()(s.created_at).format("MM/DD/YYYY")},w=function(e){return e.insurance_plan?{insurance_requires_verification:e.insurance_plan.is_verification_required,insurance_authorization_number:e.auth_number,insurance_visits_auth:e.visits_auth,insurance_visits_auth_left:e.visits_auth_left,insurance_eff_start_date:e.eff_start_date,insurance_eff_stop_date:e.eff_stop_date,reauthorization_notification_visits_count:e.insurance_plan.reauthorization_notification_visits_count,reauthorization_notification_days_count:e.insurance_plan.reauthorization_notification_days_count}:null},D=function(){var t;e(Sl({tableName:f,value:!1})),e(Pl({tableName:f,value:1})),(t=function(){var e={};return m.value&&(e.submitted_by=m.value),b.length>0&&(e.patient_statuses=b.map((function(e){return e.value}))),j.length>0&&(e.stages=j.map((function(e){return e.value}))),p&&(e.search_text=p),e}(),h.a.get("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms",{params:t})).then((function(t){var a=t.data,n=function(e){var t=[];return e.forEach((function(e){var a,n=e.patient;t.push({id:e.id,patient_id:n.id,patient_name:"".concat(n.first_name," ").concat(n.last_name),insurance:n.primary_insurance||n.secondary_insurance||"-",patient_status:n.status,document:(a=e,a.document?Object(ct.a)(Object(ct.a)({},a.document),{},{document_type:a.document_type}):null),auth_number_data:w(n),submitted_by:x(e.submitter),submitted_at:_(e),send_method:N(e),sent_at:C(e),stage:e.stage_id,stage_changed_on:e.stage_changed_at?ya()(e.stage_changed_at).format("MM/DD/YYYY"):"-",stage_comment:e.comment,logs:e.logs||null,future_auth_number_data:e.future_insurance_reauthorization_data,stage_change_history:Ta(e)})})),t}(a.data);e(Dl({tableName:f,value:n})),e(Il({tableName:f,value:a.meta.total}));var s,r=(s=a.meta.total,Math.max(1,Math.ceil(s/d.per_page)));r!==d.last_page&&e(kl({tableName:f,value:r})),e(Sl({tableName:f,value:!0}))}))};Object(s.useEffect)((function(){D()}),[]);var S=document.getElementById("submitted-reauthorization-request-forms");return Object(y.jsxs)("div",{className:"dashboard-table-wrapper",style:{maxHeight:"none"},children:[S&&Object(Eo.createPortal)(Object(y.jsxs)("div",{className:"d-flex gap-2 mb-2",style:{minHeight:"44px"},children:[Object(y.jsxs)("div",{className:"flex-shrink-0 d-flex flex-column gap-1",style:{width:"200px"},children:[Object(y.jsx)("div",{className:"fw-bold",children:"Request filed by"}),Object(y.jsxs)("div",{className:"position-relative d-flex align-items-center",children:[Object(y.jsx)(Hr.a,{value:m,onChange:function(t){return e(Yl({value:t}))},options:[{id:0,provider_name:"All"}].concat(Object(it.a)(n)).map((function(e){return{value:e.id,label:e.provider_name}})),className:zl.a.submittedBySelect,styles:O}),0!==m.value&&Object(y.jsx)(Ho,{handleClick:function(){e(Yl({value:{value:0,label:"All"}}))},className:g()(zl.a.cross,zl.a.submittedByCross)})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",children:[Object(y.jsx)("div",{className:"fw-bold",children:"Patient Name"}),Object(y.jsxs)("div",{className:"position-relative d-flex align-items-center",children:[Object(y.jsx)(so,{value:p,onChange:function(t){return e(Hl({value:t.target.value}))},placeholder:"Search by name",style:{width:"200px",height:"38px",paddingRight:"30px"}}),p&&Object(y.jsx)(Ho,{handleClick:function(){e(Hl({value:""}))},className:g()(zl.a.cross,zl.a.searchCross)})]})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",style:{width:"400px"},children:[Object(y.jsx)("div",{className:"fw-bold",children:"Patient Status"}),Object(y.jsx)(Hr.a,{value:b,onChange:function(t){return e(Rl({value:t}))},options:a.map((function(e){return{value:e.id,label:e.status}})),isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select statuses...",styles:v})]}),Object(y.jsxs)("div",{className:"d-flex flex-column gap-1",style:{width:"400px"},children:[Object(y.jsx)("div",{className:"fw-bold",children:"Stage"}),Object(y.jsx)(Hr.a,{value:j,onChange:function(t){return e(El({value:t}))},options:u.map((function(e){return{value:e.id,label:e.name}})),isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select stages...",styles:v})]}),Object(y.jsx)("button",{className:g()("btn btn-large btn-primary",zl.a.btnFetchTableData),disabled:!o,onClick:D,children:"Show"})]}),S),Object(y.jsx)(_t,{pageSize:d.per_page,columns:c,currentPage:d.current_page,data:i,dataIsLoaded:o})]})},Wl=function(){var e,t=Object(l.b)(),a=Object(l.c)((function(e){return e})).reauthorizationRequestsDashboard,n=a.upcomingReauthorizationRequests,r=a.submittedReauthorizationRequestForms,i=Object(s.useState)(!1),c=Object(u.a)(i,2),o=c[0],d=c[1],m=[{id:"upcoming-reauthorization-requests",eventKey:"upcoming_reauthorization_requests",title:"Upcoming Reauthorization Requests",numberOfRecords:n.tableParams.total,disabled:!1,component:Object(y.jsx)(Ul,{})},{id:"submitted-reauthorization-request-forms",eventKey:"submitted_reauthorization_request_forms",title:"Submitted Reauthorization Request Forms",numberOfRecords:r.tableParams.total,disabled:!1,component:Object(y.jsx)(Vl,{})}],b=Object(s.useState)(m[0].eventKey),j=Object(u.a)(b,2),p=j[0],f=j[1],v="upcoming_reauthorization_requests"===(e=p)?"upcomingReauthorizationRequests":"submitted_reauthorization_request_forms"===e?"submittedReauthorizationRequestForms":void 0,O=a[v].tableParams,x=function(){var e=Object(M.a)(Object(A.a)().mark((function e(){var a;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([h.a.get("/api/reauthorization-request-dashboard/submitted-reauthorization-request-forms/stages"),h.a.get("/patient/statuses"),h.a.get("/provider/all"),h.a.get("/document-default-faxes"),h.a.get("/document-default-emails"),h.a.get("/api/reauthorization-request-dashboard/upcoming-reauthorization-requests/expirations")]);case 2:a=e.sent,[ql,yl,Nl,Cl,wl,Tl].forEach((function(e,n){t(e({value:a[n].data}))})),d(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){x()}),[]),Object(y.jsx)(P,{children:Object(y.jsx)("div",{className:"container-fluid",children:o?Object(y.jsxs)("div",{className:"dashboardCard d-flex flex-column flex-columm gap-2 p-3",children:[Object(y.jsx)("h4",{children:"Reauthorization Requests"}),Object(y.jsx)(vr,{defaultActiveKey:p,tabs:m,className:"mb-2",tabStyles:{border:"0.5px solid #D9D9D9",overflow:"hidden",borderRadius:"4px"},onSelect:function(e){return f(e)}}),Object(y.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(y.jsx)(ra,{params:O,currentPage:O.current_page,setCurrentPage:function(e){return t(Pl({tableName:v,value:e}))},loading:!1})})]}):Object(y.jsx)(lr,{absolute:!0})})})},Kl=a(47),Gl=a.n(Kl),Zl=$r(),Jl=Object(ct.a)(Object(ct.a)({},Zl),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),Zl.control(e,t)),{},{minWidth:"115px",width:"200px",minHeight:"38px",height:"auto"})}}),Xl=function(e){var t=e.requestId,a=e.showModal,n=e.closeModal,r=Object(s.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],d=Object(l.c)((function(e){return e.doctorsRequestsDashboard.patientNoteUnlockRequests})).tableParams,m=Object(l.b)(),b="patientNoteUnlockRequests";return Object(y.jsxs)(re.a,{show:a,onHide:n,className:"custom-modal",centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("div",{children:"Approve Patient Note Unlock Request"})}),Object(y.jsx)(re.a.Body,{children:"You are about to unlock progress note editing. Please confirm."}),Object(y.jsx)(re.a.Footer,{children:Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:n,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:function(){o(!0),function(e){var t=e.id;return h.a.put("/dashboard/patient-note-unlock-requests/accept",{request_id:t})}({id:t}).then((function(){m(bd({tableName:b,id:t})),m(ud({tableName:b,value:d.total-1})),o(!1),n()}))},disabled:c,children:"Confirm"})]})})]})},Ql=function(e){var t=e.requestId,a=e.showModal,n=e.closeModal,r=Object(s.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],d=Object(s.useState)(""),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(""),f=Object(u.a)(p,2),v=f[0],O=f[1],x=Object(l.c)((function(e){return e.doctorsRequestsDashboard.patientNoteUnlockRequests})).tableParams,_=Object(l.b)(),N="patientNoteUnlockRequests";return Object(y.jsxs)(re.a,{show:a,onHide:n,className:"custom-modal",centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("div",{children:"Decline Patient Note Unlock Request"})}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsx)("div",{children:"You are about to decline unlock progress note editing request. Please confirm."}),Object(y.jsxs)("div",{className:g()("form-group",Gl.a.formGroup,v?Gl.a.formGroupHasError:""),children:[Object(y.jsx)("label",{htmlFor:"unassignReason",className:g()("control-label mb-1",Gl.a.formLabel),children:"Comment:"}),Object(y.jsx)("input",{id:"unassignReason",className:g()("form-control",Gl.a.formInput),value:b,onChange:function(e){return j(e.target.value)}}),v&&Object(y.jsx)("div",{className:Gl.a.formErrors,children:v})]})]}),Object(y.jsx)(re.a.Footer,{children:Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:n,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-danger",onClick:function(){b?(O(""),o(!0),function(e){var t=e.id,a=e.reason;return h.a.put("/dashboard/patient-note-unlock-requests/decline",{request_id:t,reason:a})}({id:t,reason:b}).then((function(){_(bd({tableName:N,id:t})),_(ud({tableName:N,value:x.total-1})),o(!1),n()}))):O("The reason is required")},disabled:c,children:"Confirm"})]})})]})},$l=function(e){var t=e.requestId,a=Object(s.useState)(!1),n=Object(u.a)(a,2),r=n[0],i=n[1],c=Object(s.useState)(!1),o=Object(u.a)(c,2),l=o[0],d=o[1],m=Object(s.useState)(!1),b=Object(u.a)(m,2),j=b[0],p=b[1],f=Object(s.useRef)(null),h=Object(s.useRef)(null);Object(C.j)(h,(function(e){f.current&&f.current.contains(e.target)||i(!1)}));return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:Gl.a.actionsButton,onClick:function(e){e.stopPropagation(),i(!r)},children:[Object(y.jsx)("div",{ref:f,children:Object(y.jsx)(mt.a,{path:dt.e,size:1})}),r&&Object(y.jsxs)("div",{ref:h,className:Gl.a.menuDialog,children:[Object(y.jsx)("div",{className:Gl.a.menuItem,onClick:function(){d(!0)},children:"Approve"}),Object(y.jsx)("div",{className:Gl.a.menuItem,onClick:function(){p(!0)},children:"Decline"})]})]}),Object(y.jsx)(Xl,{requestId:t,showModal:l,closeModal:function(){d(!1)}}),Object(y.jsx)(Ql,{requestId:t,showModal:j,closeModal:function(){p(!1)}})]})},ed=function(e){var t=e.requestId,a=e.showModal,n=e.closeModal,r=Object(s.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],d=Object(l.c)((function(e){return e.doctorsRequestsDashboard.patientNoteUnlockRequests})).tableParams,m=Object(l.b)(),b="patientRemovalRequests";return Object(y.jsxs)(re.a,{show:a,onHide:n,className:"custom-modal",centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("div",{children:"Approve Patient Removal Request"})}),Object(y.jsx)(re.a.Body,{children:"You are about to remove therapist from the patient. Please confirm."}),Object(y.jsx)(re.a.Footer,{children:Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:n,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-primary",onClick:function(){o(!0),function(e){var t=e.id;return h.a.put("/dashboard/patient-removal-requests/accept",{request_id:t})}({id:t}).then((function(){m(bd({tableName:b,id:t})),m(ud({tableName:b,value:d.total-1})),o(!1),n()}))},disabled:c,children:"Confirm"})]})})]})},td=function(e){var t=e.requestId,a=e.showModal,n=e.closeModal,r=Object(s.useState)(!1),i=Object(u.a)(r,2),c=i[0],o=i[1],d=Object(s.useState)(""),m=Object(u.a)(d,2),b=m[0],j=m[1],p=Object(s.useState)(""),f=Object(u.a)(p,2),v=f[0],O=f[1],x=Object(l.c)((function(e){return e.doctorsRequestsDashboard.patientNoteUnlockRequests})).tableParams,_=Object(l.b)(),N="patientRemovalRequests";return Object(y.jsxs)(re.a,{show:a,onHide:n,className:"custom-modal",centered:!0,children:[Object(y.jsx)(re.a.Header,{closeButton:!0,children:Object(y.jsx)("div",{children:"Decline Patient Removal Request"})}),Object(y.jsxs)(re.a.Body,{children:[Object(y.jsx)("div",{children:"You are about to decline patient removal request. Please confirm."}),Object(y.jsxs)("div",{className:g()("form-group",Gl.a.formGroup,v?Gl.a.formGroupHasError:""),children:[Object(y.jsx)("label",{htmlFor:"unassignReason",className:g()("control-label mb-1",Gl.a.formLabel),children:"Comment:"}),Object(y.jsx)("input",{id:"unassignReason",className:g()("form-control",Gl.a.formInput),value:b,onChange:function(e){return j(e.target.value)}}),v&&Object(y.jsx)("div",{className:Gl.a.formErrors,children:v})]})]}),Object(y.jsx)(re.a.Footer,{children:Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:n,children:"Cancel"}),Object(y.jsx)("button",{className:"btn btn-large btn-danger",onClick:function(){b?(O(""),o(!0),function(e){var t=e.id,a=e.reason;return h.a.put("/dashboard/patient-removal-requests/decline",{request_id:t,reason:a})}({id:t,reason:b}).then((function(){_(bd({tableName:N,id:t})),_(ud({tableName:N,value:x.total-1})),o(!1),n()}))):O("The reason is required")},disabled:c,children:"Confirm"})]})})]})},ad=function(e){var t=e.requestId,a=Object(s.useState)(!1),n=Object(u.a)(a,2),r=n[0],i=n[1],c=Object(s.useState)(!1),o=Object(u.a)(c,2),l=o[0],d=o[1],m=Object(s.useState)(!1),b=Object(u.a)(m,2),j=b[0],p=b[1],f=Object(s.useRef)(null),h=Object(s.useRef)(null);Object(C.j)(h,(function(e){f.current&&f.current.contains(e.target)||i(!1)}));return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:Gl.a.actionsButton,onClick:function(e){e.stopPropagation(),i(!r)},children:[Object(y.jsx)("div",{ref:f,children:Object(y.jsx)(mt.a,{path:dt.e,size:1})}),r&&Object(y.jsxs)("div",{ref:h,className:Gl.a.menuDialog,children:[Object(y.jsx)("div",{className:Gl.a.menuItem,onClick:function(){d(!0)},children:"Approve"}),Object(y.jsx)("div",{className:Gl.a.menuItem,onClick:function(){p(!0)},children:"Decline"})]})]}),Object(y.jsx)(ed,{requestId:t,showModal:l,closeModal:function(){d(!1)}}),Object(y.jsx)(td,{requestId:t,showModal:j,closeModal:function(){p(!1)}})]})},nd={filtersData:{requestStatusesData:{requestStatuses:[{id:0,label:"New"},{id:1,label:"Accepted"},{id:2,label:"Declined"},{id:3,label:"Canceled By Therapist"}]}},patientRemovalRequests:{tableData:[],tableColumns:[{Header:"#",accessor:v,disableSortBy:!0,width:50},{accessor:"therapist_name",Header:"Therapist's Name",disableSortBy:!0,width:150},{accessor:"patient_name",Header:"Patient's Name",disableSortBy:!0,Cell:function(e){var t=e.row,a=e.value,n=t.original.id;return Object(y.jsx)("a",{className:"text-decoration-none",href:"/chart/".concat(n),children:a})},width:150},{accessor:"reason",Header:"Reason",disableSortBy:!0,width:200},{accessor:"requested_at",Header:"Requested at",sortType:Wa,width:130},{accessor:"request_status",Header:"Request status",width:100,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t.label})}},{accessor:"approver",Header:"Approver",width:150,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t.name||"-"})}},{accessor:"approved_at",Header:"Closed at",width:130,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},sortType:Wa},{accessor:"approver_comment",Header:"Approver Comment",width:200,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})}},{accessor:"id",Header:"Actions",disableSortBy:!0,Cell:function(e){var t=e.row;return Object(y.jsx)(y.Fragment,{children:0===t.original.request_status.id?Object(y.jsx)(ad,{requestId:t.original.id}):"-"})},width:60}],loading:!0,dataIsLoaded:!1,tableParams:{total:0,per_page:15,current_page:1,last_page:1},filters:{requestStatuses:[{id:0,label:"New"}]}},patientNoteUnlockRequests:{tableData:[],tableColumns:[{Header:"#",accessor:v,disableSortBy:!1,width:50},{accessor:"therapist_name",Header:"Therapist's Name",disableSortBy:!1,width:150},{accessor:"progress_note",Header:"Progress Note",disableSortBy:!0,Cell:function(e){e.row;var t=e.value;return Object(y.jsx)("a",{className:"text-decoration-none",href:"/chart/"+t.patients_id+"?progress_note_id="+t.id,target:"_blank",rel:"noreferrer",children:"View"})},width:70},{accessor:"reason",Header:"Reason",disableSortBy:!0,width:200},{accessor:"requested_at",Header:"Requested at",sortType:Wa,width:130},{accessor:"request_status",Header:"Request status",width:100,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t.label})}},{accessor:"approver",Header:"Approver",width:150,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t.name||"-"})}},{accessor:"approved_at",Header:"Closed at",width:130,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},sortType:Wa},{accessor:"approver_comment",Header:"Approver Comment",width:200,Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})}},{accessor:"id",Header:"Actions",disableSortBy:!0,Cell:function(e){var t=e.row;return Object(y.jsx)(y.Fragment,{children:0===t.original.request_status.id?Object(y.jsx)($l,{requestId:t.original.id}):"-"})},width:60}],loading:!0,dataIsLoaded:!1,tableParams:{total:0,per_page:15,current_page:1,last_page:1},filters:{requestStatuses:[{id:0,label:"New"}]}}},sd=Object(Oa.b)({name:"doctorsRequestsDashboard",initialState:nd,reducers:{setDataInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableData=s},setDataIsLoadedAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].dataIsLoaded=s},setCurrentPageInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.current_page=s},setLastPageInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.last_page=s},setTotalInTableAC:function(e,t){var a=t.payload,n=a.tableName,s=a.value;e[n].tableParams.total=s},setRequestStatusesFilterInTable:function(e,t){var a=t.payload,n=a.tableName,s=a.options;e[n].filters.requestStatuses=s.map((function(e){return{id:e.value,label:e.label}}))},removeItemFromTableDataByIdAC:function(e,t){var a=t.payload,n=a.tableName,s=a.id,r=e[n].tableData.findIndex((function(e){return e.id===s}));-1!==r&&e[n].tableData.splice(r,1)}}}),rd=sd.reducer,id=sd.actions,cd=id.setDataInTableAC,od=id.setDataIsLoadedAC,ld=id.setCurrentPageInTableAC,dd=id.setLastPageInTableAC,ud=id.setTotalInTableAC,md=id.setRequestStatusesFilterInTable,bd=id.removeItemFromTableDataByIdAC,jd=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.doctorsRequestsDashboard})),a=t.patientRemovalRequests,n=t.filtersData,r=a.filters,i=a.tableParams,c=n.requestStatusesData,o="patientRemovalRequests";Object(s.useEffect)((function(){e(od({tableName:o,value:!1})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.get("/api/doctors-requests-dashboard/patient-removal-requests",{params:e})}(function(){var e={};return r.requestStatuses.length&&(e.request_statuses=r.requestStatuses.map((function(e){return e.id}))),e}()).then((function(t){var a=function(e,t){var a=[];return t.forEach((function(e){var t,s,r,i,c,o;a.push({id:e.id,therapist_name:null===(t=e.provider)||void 0===t?void 0:t.provider_name,patient_id:e.patient_id,patient_name:null===(s=e.patient)||void 0===s?void 0:s.full_name,reason:e.reason,requested_at:Da(e.created_at).format("MM/DD/YYYY hh:mm:ss"),request_status:{id:e.status,label:null===(r=n.requestStatusesData.requestStatuses.find((function(t){return t.id===e.status})))||void 0===r?void 0:r.label},approver:{id:null===(i=e.approver)||void 0===i?void 0:i.id,name:null===(c=e.approver)||void 0===c||null===(o=c.meta)||void 0===o?void 0:o.full_name},approver_comment:e.approver_comment,approved_at:e.approved_at?Da(e.approved_at).format("MM/DD/YYYY hh:mm:ss"):null})})),a}(0,t.data.data);e(cd({tableName:o,value:a})),e(ud({tableName:o,value:t.data.meta.total})),e(od({tableName:o,value:!0}));var s,r=(s=t.data.meta.total,Math.max(1,Math.ceil(s/i.per_page)));r!==i.last_page&&e(dd({tableName:o,value:r}))}))}),[r.requestStatuses]);var d=Object(ct.a)(Object(ct.a)({},Jl),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),Jl.control(e,t)),{},{width:"340px"})}});return Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsx)("div",{className:"d-flex flex-wrap align-items-stretch gap-2 px-1",children:Object(y.jsxs)("div",{className:Gl.a.selectBlock,children:[Object(y.jsx)("div",{className:"fw-bold",children:"Request Status"}),Object(y.jsx)(Hr.a,{value:r.requestStatuses.length&&r.requestStatuses.map((function(e){return{value:e.id,label:e.label}})),options:c.requestStatuses.map((function(e){return{value:e.id,label:e.label}})),onChange:function(t){return e(md({tableName:o,options:t}))},isMulti:!0,isSearchable:!1,closeMenuOnSelect:!1,styles:d})]})}),Object(y.jsx)("div",{className:Gl.a.dashboardTableWrapper,children:Object(y.jsx)(_t,{columns:a.tableColumns,data:a.tableData,pageSize:i.per_page,currentPage:i.current_page,dataIsLoaded:a.dataIsLoaded})}),Object(y.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(y.jsx)(ra,{params:i,currentPage:i.current_page,setCurrentPage:function(t){return e(ld({tableName:o,value:t}))},loading:!1})})]})},pd=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.doctorsRequestsDashboard})),a=t.patientNoteUnlockRequests,n=t.filtersData,r=a.filters,i=a.tableParams,c=n.requestStatusesData,o="patientNoteUnlockRequests";Object(s.useEffect)((function(){e(od({tableName:o,value:!1})),e(ld({tableName:o,value:1})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.get("/api/doctors-requests-dashboard/patient-note-unlock-requests",{params:e})}(function(){var e={};return r.requestStatuses.length&&(e.request_statuses=r.requestStatuses.map((function(e){return e.id}))),e}()).then((function(t){var a=function(e){var t=[];return e.forEach((function(e){var a,s,r,i,c;t.push({id:e.id,therapist_name:null===(a=e.provider)||void 0===a?void 0:a.provider_name,progress_note:e.patient_note,reason:e.reason,requested_at:Da(e.created_at).format("MM/DD/YYYY hh:mm:ss"),request_status:{id:e.status,label:null===(s=n.requestStatusesData.requestStatuses.find((function(t){return t.id===e.status})))||void 0===s?void 0:s.label},approver:{id:null===(r=e.approver)||void 0===r?void 0:r.id,name:null===(i=e.approver)||void 0===i||null===(c=i.meta)||void 0===c?void 0:c.full_name},approver_comment:e.approver_comment,approved_at:e.approved_at?Da(e.approved_at).format("MM/DD/YYYY hh:mm:ss"):null})})),t}(t.data.data);e(cd({tableName:o,value:a})),e(ud({tableName:o,value:t.data.meta.total})),e(od({tableName:o,value:!0}));var s,r=(s=t.data.meta.total,Math.max(1,Math.ceil(s/i.per_page)));r!==i.last_page&&e(dd({tableName:o,value:r}))}))}),[r.requestStatuses]);var d=Object(ct.a)(Object(ct.a)({},Jl),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),Jl.control(e,t)),{},{width:"340px"})}});return Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsx)("div",{className:"d-flex flex-wrap align-items-stretch gap-2 px-1",children:Object(y.jsxs)("div",{className:Gl.a.selectBlock,children:[Object(y.jsx)("div",{className:"fw-bold",children:"Request Status"}),Object(y.jsx)(Hr.a,{value:r.requestStatuses.length&&r.requestStatuses.map((function(e){return{value:e.id,label:e.label}})),options:c.requestStatuses.map((function(e){return{value:e.id,label:e.label}})),onChange:function(t){return e(md({tableName:o,options:t}))},isMulti:!0,isSearchable:!1,closeMenuOnSelect:!1,styles:d})]})}),Object(y.jsx)("div",{className:Gl.a.dashboardTableWrapper,children:Object(y.jsx)(_t,{columns:a.tableColumns,data:a.tableData,pageSize:i.per_page,currentPage:i.current_page,dataIsLoaded:a.dataIsLoaded})}),Object(y.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(y.jsx)(ra,{params:i,currentPage:i.current_page,setCurrentPage:function(t){return e(ld({tableName:o,value:t}))},loading:!1})})]})},fd=function(){var e=Object(l.c)((function(e){return e.doctorsRequestsDashboard})),t=e.patientRemovalRequests,a=e.patientNoteUnlockRequests,n=[{eventKey:"patient_removal_requests",title:"Removal Requests",numberOfRecords:t.tableParams.total,disabled:!1,component:Object(y.jsx)(jd,{})},{eventKey:"patient_note_unlock_requests",title:"Patient Note Unlock Requests",numberOfRecords:a.tableParams.total,disabled:!1,component:Object(y.jsx)(pd,{})}];return Object(y.jsx)(P,{children:Object(y.jsx)("div",{className:"container-fluid",children:Object(y.jsxs)("div",{className:"dashboardCard d-flex flex-column flex-columm gap-2 p-3",children:[Object(y.jsx)("h4",{children:"Doctors Requests"}),Object(y.jsx)(vr,{defaultActiveKey:n[0].eventKey,tabs:n,className:"mb-2"})]})})})},hd=a(20),vd=a.n(hd),Od=function(e){var t=e.patientId,a=Object(l.b)(),n=Object(l.c)((function(e){return e.patientTransfersDashboard.unassignedPatients})),s=n.assignData,r=n.archiveData,i=s.loadingPatients.includes(t),c=r.loadingPatients.includes(t);return Object(y.jsx)("button",{onClick:function(){a(lu({patientId:t}))},disabled:i||c,className:g()("btn btn-sm btn-primary d-flex justify-content-center align-items-center",vd.a.tableActionButton),style:{width:"60px"},children:i?Object(y.jsx)(lr,{color:"#fff",size:"sm"}):"Assign"})},xd=function(e){var t=e.patientId,a=Object(l.b)(),n=Object(l.c)((function(e){return e.patientTransfersDashboard.unassignedPatients})),s=n.assignData,r=n.archiveData,i=s.loadingPatients.includes(t),c=r.loadingPatients.includes(t);return Object(y.jsx)("button",{onClick:function(){a(iu({patientId:t}))},disabled:i||c,className:g()("btn btn-sm btn-danger d-flex justify-content-center align-items-center",vd.a.tableActionButton),style:{width:"60px"},children:c?Object(y.jsx)(lr,{color:"#fff",size:"sm"}):"Archive"})},_d=function(e){var t=e.patientId,a=Object(l.b)(),n=Object(l.c)((function(e){return e.patientTransfersDashboard.assignedPatients})),s=n.transferData,r=n.unassignData.loadingPatients.includes(t),i=s.loadingPatients.includes(t);return Object(y.jsx)("button",{onClick:function(){a(Bd({patientId:t}))},disabled:r||i,className:g()("btn btn-sm btn-primary d-flex justify-content-center align-items-center",vd.a.tableActionButton),style:{width:"75px"},children:r?Object(y.jsx)(lr,{color:"#fff",size:"sm"}):"Unassign"})},gd=function(e){var t=e.patientId,a=Object(l.b)(),n=Object(l.c)((function(e){return e.patientTransfersDashboard.assignedPatients})),s=n.transferData,r=n.unassignData,i=s.loadingPatients.includes(t),c=r.loadingPatients.includes(t);return Object(y.jsx)("button",{onClick:function(){a(Vd({patientId:t}))},disabled:i||c,className:g()("btn btn-sm btn-primary d-flex justify-content-center align-items-center",vd.a.tableActionButton),style:{width:"75px"},children:i?Object(y.jsx)(lr,{color:"#fff",size:"sm"}):"Transfer"})},yd={userData:{isOnlyAdmin:!1,isLoadedIsOnlyAdmin:!1},filtersData:{statusesData:{statuses:[],isLoading:!1},providersData:{providers:[],isLoading:!1},insurancesData:{insurances:[],isLoading:!1},dateOfUnassignmentData:{intervals:[{value:7,label:"1 week"},{value:14,label:"2 weeks"},{value:21,label:"3 weeks"},{value:30,label:"1 month"},{value:60,label:"2 months"},{value:90,label:"3 months"},{value:-1,label:"All"},{value:null,label:"Never"}]},dateOfPatientCreationData:{intervals:[{value:7,label:"1 week"},{value:14,label:"2 weeks"},{value:21,label:"3 weeks"},{value:30,label:"1 month"},{value:60,label:"2 months"},{value:90,label:"3 months"},{value:-1,label:"All"}]}},assignedPatients:{tableData:[],filteredTableData:[],tableColumns:[{Header:"#",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"patient_insurance",Header:"Patient's Insurance",Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},width:120},{accessor:"missing_notes_count",Header:"Missing Notes Count",width:100},{accessor:"drafts_count",Header:"Drafts Count",width:80},{accessor:"visits_count",Header:"Visits count",width:80},{accessor:"last_visit_date",Header:"Last Visit Date",Cell:Ba,sortType:Wa,width:100},{accessor:"date_of_assignment",Header:"Date of Assignment",Cell:Ba,sortType:Wa,width:100},{Header:"Actions",Cell:function(e){var t=e.row;return Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)(_d,{patientId:t.original.patient_id}),Object(y.jsx)(gd,{patientId:t.original.patient_id})]})},disableSortBy:!0,width:160}],currentPage:1,isLoaded:!1,isLoading:!1,filters:{provider:{id:null,provider_name:""},search:"",statuses:[],insurance:{id:null,insurance:""}},unassignData:{patientId:null,loadingPatients:[]},transferData:{patientId:null,loadingPatients:[]}},unassignedPatients:{tableData:[],filteredTableData:[],tableColumns:[{Header:"#",accessor:v,disableSortBy:!0,width:50},{accessor:"patient_name",Header:"Patient's Name",Cell:Ha,width:150},{accessor:"patient_status",Header:"Patient's Status",Cell:function(e){var t=e.value;return Object(y.jsx)(Ea,{title:t.status,background:Js("#"+t.hex_color,.2),textColor:"#"+t.hex_color})},sortType:Ka,width:80},{accessor:"patient_insurance",Header:"Patient's Insurance",Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t||"-"})},width:120},{accessor:"old_provider",Cell:function(e){var t=e.value;return Object(y.jsx)("div",{children:t.provider_name||"-"})},Header:"Old Therapist",width:120},{accessor:"date_of_unassignment",Header:"Date of Unassignment",Cell:Ba,sortType:Wa,width:100},{accessor:"date_of_patient_creation",Header:"Date of Pt. Creation",Cell:Ba,sortType:Wa,width:100},{Header:"Actions",Cell:function(e){var t=e.row;return Object(y.jsxs)("div",{className:"d-flex gap-2",children:[Object(y.jsx)(Od,{patientId:t.original.patient_id}),"Archived"!==t.original.patient_status.status?Object(y.jsx)(xd,{patientId:t.original.patient_id}):null]})},disableSortBy:!0,width:130}],currentPage:1,isLoading:!0,filters:{old_provider:{id:null,provider_name:""},search:"",statuses:[],insurance:{id:null,insurance:""},date_of_unassignment:{value:-1,label:"All"},date_of_patient_creation:{value:-1,label:"All"},show_archived_patients:!1},archiveData:{patientId:null,loadingPatients:[]},assignData:{patientId:null,loadingPatients:[]}}},Nd=Object(Oa.b)({name:"patientTransfersDashboardReducer",initialState:yd,reducers:{setUserDataIsOnlyAdmin:function(e,t){e.userData.isOnlyAdmin=t.payload.value},setUserDataIsLoadedIsOnlyAdmin:function(e,t){e.userData.isLoadedIsOnlyAdmin=t.payload.value},setFiltersDataProvidersDataProvidersAC:function(e,t){e.filtersData.providersData.providers=t.payload.data},setFiltersDataProvidersDataIsLoadingAC:function(e,t){e.filtersData.providersData.isLoading=t.payload.value},setFiltersDataStatusesDataStatusesAC:function(e,t){e.filtersData.statusesData.statuses=t.payload.data},setFiltersDataStatusesDataIsLoadingAC:function(e,t){e.filtersData.statusesData.isLoading=t.payload.value},setFiltersDataInsurancesDataInsurancesAC:function(e,t){e.filtersData.insurancesData.insurances=t.payload.data},setFiltersDataInsurancesDataIsLoadingAC:function(e,t){e.filtersData.insurancesData.isLoading=t.payload.value},setAssignedPatientsTableDataAC:function(e,t){e.assignedPatients.tableData=t.payload.data.map((function(t){var a,n,s,r=null===(a=t.patient_has_providers.filter((function(t){return t.providers_id===e.assignedPatients.filters.provider.id}))[0])||void 0===a?void 0:a.created_at;return{id:t.id,patient_id:t.id,patient_name:t.full_name,patient_status:t.status,patient_insurance_id:null===(n=t.insurance)||void 0===n?void 0:n.id,patient_insurance:null===(s=t.insurance)||void 0===s?void 0:s.insurance,patient_sex:t.sex,patient_age:t.date_of_birth?Da().diff(t.date_of_birth,"years"):null,missing_notes_count:t.missing_notes_count,drafts_count:t.drafts_count,visits_count:t.visits_count,upcoming_appointments_count:t.upcoming_appointments_count,last_visit_date:t.last_visit_date?Da(t.last_visit_date).format("MM/DD/YYYY"):null,date_of_assignment:r?Da(r).format("MM/DD/YYYY"):null,next_appointment_date:t.next_appointment_date?Da(t.next_appointment_date).format("MM/DD/YYYY"):null,patient_has_providers:t.patient_has_providers}}))},setAssignedPatientsFilteredTableDataAC:function(e,t){e.assignedPatients.filteredTableData=t.payload.data},updateAssignedPatientsFilteredTableDataAC:function(e){var t=e.assignedPatients.filters,a=t.search.toLowerCase(),n=t.statuses.map((function(e){return e.status}));e.assignedPatients.filteredTableData=e.assignedPatients.tableData.filter((function(e){return(!t.search||-1!==e.patient_name.toLowerCase().indexOf(a))&&(!(t.statuses.length&&!n.includes(e.patient_status.status))&&(!t.insurance.id||e.patient_insurance_id===t.insurance.id))}))},setAssignedPatientsCurrentPageAC:function(e,t){e.assignedPatients.currentPage=t.payload.value},setAssignedPatientsIsLoadingAC:function(e,t){e.assignedPatients.isLoading=t.payload.value},setAssignedPatientsIsLoadedAC:function(e,t){e.assignedPatients.isLoaded=t.payload.value},setAssignedPatientsFiltersProviderAC:function(e,t){var a=t.payload,n=a.id,s=a.provider_name;e.assignedPatients.filters.provider.id=n,e.assignedPatients.filters.provider.provider_name=s},setAssignedPatientsFiltersSearchAC:function(e,t){e.assignedPatients.currentPage=1,e.assignedPatients.filters.search=t.payload.value},setAssignedPatientsFiltersStatusesAC:function(e,t){e.assignedPatients.currentPage=1,e.assignedPatients.filters.statuses=t.payload.options.map((function(e){return{id:e.value,status:e.label}}))},setAssignedPatientsFiltersInsuranceAC:function(e,t){var a=t.payload,n=a.id,s=a.insurance;e.assignedPatients.filters.insurance.id=n,e.assignedPatients.filters.insurance.insurance=s},setAssignedPatientsUnassignDataPatientIdAC:function(e,t){e.assignedPatients.unassignData.patientId=t.payload.patientId},addAssignedPatientsUnassignDataLoadingPatientsAC:function(e,t){e.assignedPatients.unassignData.loadingPatients.includes(t.payload.patientId)||e.assignedPatients.unassignData.loadingPatients.push(t.payload.patientId)},removePatientIdFromAssignedPatientsUnassignDataLoadingPatientsAC:function(e,t){var a=e.assignedPatients.unassignData.loadingPatients.findIndex((function(e){return e===t.payload.patientId}));-1!==a&&e.assignedPatients.unassignData.loadingPatients.splice(a,1)},setAssignedPatientsTransferDataPatientIdAC:function(e,t){e.assignedPatients.transferData.patientId=t.payload.patientId},addAssignedPatientsTransferDataLoadingPatientsAC:function(e,t){e.assignedPatients.transferData.loadingPatients.includes(t.payload.patientId)||e.assignedPatients.transferData.loadingPatients.push(t.payload.patientId)},removePatientIdFromAssignedPatientsTransferDataLoadingPatientsAC:function(e,t){var a=e.assignedPatients.transferData.loadingPatients.findIndex((function(e){return e===t.payload.patientId}));-1!==a&&e.assignedPatients.transferData.loadingPatients.splice(a,1)},deletePatientFromAssignedPatientsTableDataAC:function(e,t){var a=e.assignedPatients.tableData.findIndex((function(e){return e.patient_id===t.payload.patientId}));-1!==a&&e.assignedPatients.tableData.splice(a,1)},setUnassignedPatientsTableDataAC:function(e,t){e.unassignedPatients.tableData=t.payload.data.map((function(e){var t,a,n,s;return{id:e.id,patient_id:e.patient.id,patient_name:"".concat(e.patient.first_name," ").concat(e.patient.last_name," ").concat(e.patient.middle_name||""),patient_status:e.patient.status,patient_insurance_id:null===(t=e.patient.insurance)||void 0===t?void 0:t.id,patient_insurance:null===(a=e.patient.insurance)||void 0===a?void 0:a.insurance,old_provider:{id:null===(n=e.old_provider)||void 0===n?void 0:n.id,provider_name:null===(s=e.old_provider)||void 0===s?void 0:s.provider_name},date_of_unassignment:e.unassigned_at?Da(e.unassigned_at).format("MM/DD/YYYY"):null,date_of_patient_creation:e.patient.created_at?Da(e.patient.created_at).format("MM/DD/YYYY"):null}}))},setUnassignedPatientsFilteredTableDataAC:function(e,t){e.unassignedPatients.filteredTableData=t.payload.data},setUnassignedPatientsCurrentPageAC:function(e,t){e.unassignedPatients.currentPage=t.payload.value},setUnassignedPatientsIsLoadingAC:function(e,t){e.unassignedPatients.isLoading=t.payload.value},setUnassignedPatientsFiltersOldProviderAC:function(e,t){var a=t.payload,n=a.id,s=a.provider_name;e.unassignedPatients.filters.old_provider.id=n,e.unassignedPatients.filters.old_provider.provider_name=s},setUnassignedPatientsFiltersSearchAC:function(e,t){e.unassignedPatients.currentPage=1,e.unassignedPatients.filters.search=t.payload.value},setUnassignedPatientsFiltersStatusesAC:function(e,t){e.unassignedPatients.currentPage=1,e.unassignedPatients.filters.statuses=t.payload.options.map((function(e){return{id:e.value,status:e.label}}))},setUnassignedPatientsFiltersInsuranceAC:function(e,t){var a=t.payload,n=a.id,s=a.insurance;e.unassignedPatients.filters.insurance.id=n,e.unassignedPatients.filters.insurance.insurance=s},setUnassignedPatientsFiltersDateOfUnassignAC:function(e,t){var a=t.payload,n=a.value,s=a.label;e.unassignedPatients.currentPage=1,e.unassignedPatients.filters.date_of_unassignment.value=n,e.unassignedPatients.filters.date_of_unassignment.label=s},setUnassignedPatientsFiltersDateOfPatientCreationAC:function(e,t){var a=t.payload,n=a.value,s=a.label;e.unassignedPatients.currentPage=1,e.unassignedPatients.filters.date_of_patient_creation.value=n,e.unassignedPatients.filters.date_of_patient_creation.label=s},setUnassignedPatientsFiltersShowArchivedPatientsAC:function(e,t){e.unassignedPatients.filters.show_archived_patients=t.payload.value},updateUnassignedPatientsFilteredTableDataAC:function(e){var t=e.unassignedPatients.filters,a=t.search.toLowerCase(),n=t.statuses.map((function(e){return e.status})),s=t.date_of_unassignment.value&&t.date_of_unassignment.value>0?Da().subtract(t.date_of_unassignment.value,"days"):null,r=t.date_of_patient_creation.value&&t.date_of_patient_creation.value>0?Da().subtract(t.date_of_patient_creation.value,"days"):null;e.unassignedPatients.filteredTableData=e.unassignedPatients.tableData.filter((function(e){if(t.old_provider.id&&e.old_provider.id!==t.old_provider.id)return!1;if(t.search&&-1===e.patient_name.toLowerCase().indexOf(a))return!1;if(t.statuses.length&&!n.includes(e.patient_status.status))return!1;if(t.insurance.id&&e.patient_insurance_id!==t.insurance.id)return!1;if(-1!==t.date_of_unassignment.value){if(null===t.date_of_unassignment.value&&null!==e.date_of_unassignment)return!1;if(null!==t.date_of_unassignment.value&&null===e.date_of_unassignment||Da(e.date_of_unassignment).isBefore(s))return!1}return(-1===t.date_of_patient_creation.value||!Da(e.date_of_patient_creation).isBefore(r))&&!(!t.show_archived_patients&&"Archived"===e.patient_status.status)}))},setUnassignedPatientsArchiveDataPatientId:function(e,t){e.unassignedPatients.archiveData.patientId=t.payload.patientId},addPatientIdToUnassignedPatientsArchiveDataLoadingPatients:function(e,t){e.unassignedPatients.archiveData.loadingPatients.includes(t.payload.patientId)||e.unassignedPatients.archiveData.loadingPatients.push(t.payload.patientId)},removePatientIdFromUnassignedPatientsArchiveDataLoadingPatients:function(e,t){var a=e.unassignedPatients.archiveData.loadingPatients.findIndex((function(e){return e===t.payload.patientId}));-1!==a&&e.unassignedPatients.archiveData.loadingPatients.splice(a,1)},setUnassignedPatientsAssignDataPatientId:function(e,t){e.unassignedPatients.assignData.patientId=t.payload.patientId},addPatientIdToUnassignedPatientsAssignDataLoadingPatients:function(e,t){e.unassignedPatients.assignData.loadingPatients.includes(t.payload.patientId)||e.unassignedPatients.assignData.loadingPatients.push(t.payload.patientId)},removePatientIdFromUnassignedPatientsAssignDataLoadingPatients:function(e,t){var a=e.unassignedPatients.assignData.loadingPatients.findIndex((function(e){return e===t.payload.patientId}));-1!==a&&e.unassignedPatients.assignData.loadingPatients.splice(a,1)},deletePatientFromUnassignedPatientTableData:function(e,t){var a=e.unassignedPatients.tableData.findIndex((function(e){return e.patient_id===t.payload.patientId}));-1!==a&&e.unassignedPatients.tableData.splice(a,1)}}}),Cd=Nd.reducer,wd=Nd.actions,Dd=(wd.setUserDataIsOnlyAdmin,wd.setUserDataIsLoadedIsOnlyAdmin,wd.setFiltersDataProvidersDataProvidersAC),Sd=wd.setFiltersDataProvidersDataIsLoadingAC,Pd=wd.setFiltersDataStatusesDataStatusesAC,kd=wd.setFiltersDataStatusesDataIsLoadingAC,Id=wd.setFiltersDataInsurancesDataInsurancesAC,Ad=wd.setFiltersDataInsurancesDataIsLoadingAC,Md=wd.setAssignedPatientsTableDataAC,Td=wd.setAssignedPatientsFiltersStatusesAC,Fd=wd.setAssignedPatientsCurrentPageAC,Ld=wd.setAssignedPatientsIsLoadingAC,qd=wd.setAssignedPatientsIsLoadedAC,Yd=wd.setAssignedPatientsFiltersProviderAC,Rd=wd.setAssignedPatientsFiltersSearchAC,Ed=wd.setAssignedPatientsFiltersInsuranceAC,Hd=(wd.setAssignedPatientsFilteredTableDataAC,wd.updateAssignedPatientsFilteredTableDataAC),Bd=wd.setAssignedPatientsUnassignDataPatientIdAC,zd=wd.addAssignedPatientsUnassignDataLoadingPatientsAC,Ud=wd.removePatientIdFromAssignedPatientsUnassignDataLoadingPatientsAC,Vd=wd.setAssignedPatientsTransferDataPatientIdAC,Wd=wd.addAssignedPatientsTransferDataLoadingPatientsAC,Kd=wd.removePatientIdFromAssignedPatientsTransferDataLoadingPatientsAC,Gd=wd.deletePatientFromAssignedPatientsTableDataAC,Zd=wd.setUnassignedPatientsTableDataAC,Jd=(wd.setUnassignedPatientsFilteredTableDataAC,wd.setUnassignedPatientsCurrentPageAC),Xd=wd.setUnassignedPatientsIsLoadingAC,Qd=wd.setUnassignedPatientsFiltersOldProviderAC,$d=wd.setUnassignedPatientsFiltersSearchAC,eu=wd.setUnassignedPatientsFiltersStatusesAC,tu=wd.setUnassignedPatientsFiltersInsuranceAC,au=wd.setUnassignedPatientsFiltersDateOfUnassignAC,nu=wd.setUnassignedPatientsFiltersDateOfPatientCreationAC,su=wd.setUnassignedPatientsFiltersShowArchivedPatientsAC,ru=wd.updateUnassignedPatientsFilteredTableDataAC,iu=wd.setUnassignedPatientsArchiveDataPatientId,cu=wd.addPatientIdToUnassignedPatientsArchiveDataLoadingPatients,ou=wd.removePatientIdFromUnassignedPatientsArchiveDataLoadingPatients,lu=wd.setUnassignedPatientsAssignDataPatientId,du=wd.addPatientIdToUnassignedPatientsAssignDataLoadingPatients,uu=wd.removePatientIdFromUnassignedPatientsAssignDataLoadingPatients,mu=wd.deletePatientFromUnassignedPatientTableData,bu=function(){return h.a.get("/api/transfers")},ju=function(e){var t,a=e.patientData,n=e.provider,s=e.supervisor,r=e.otherProviders;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("span",{children:"Patient:"}),Object(y.jsx)("b",{className:"ms-1",children:a.patient_name}),",",Object(y.jsxs)("span",{className:"ms-1",children:[a.patient_age," years old,"]}),Object(y.jsxs)("span",{className:"mx-1",children:[a.patient_sex,","]}),Object(y.jsx)("div",{className:"d-inline-flex",children:Object(y.jsx)(Ea,{title:a.patient_status.status,background:Js("#"+a.patient_status.hex_color,.2),textColor:"#"+a.patient_status.hex_color})})]}),Object(y.jsxs)("div",{className:"d-flex align-items-center gap-1",children:[Object(y.jsxs)("span",{children:["Provider: ",Object(y.jsx)("b",{children:n.provider_name})]}),0!==r.length&&Object(y.jsx)(xa.a,{placement:"bottom",overlay:Object(y.jsx)(_a.a,{children:Object(y.jsx)("div",{children:r.map((function(e){return Object(y.jsx)("div",{children:e.provider.provider_name},e.id)}))})}),children:Object(y.jsx)("div",{className:jl.a.helpIcon,children:Object(y.jsx)(mt.a,{path:dt.h,size:.6})})})]}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{children:["Missing progress notes count: ",a.missing_notes_count]}),Object(y.jsxs)("div",{children:["Drafts count: ",a.drafts_count]}),Object(y.jsxs)("div",{children:["Upcoming appointments count: ",a.upcoming_appointments_count]}),Object(y.jsxs)("div",{children:["Next appointment: ",a.next_appointment_date||"-"]}),Object(y.jsxs)("div",{children:["Supervisor: ",s?Object(y.jsx)("b",{children:null===(t=s.provider)||void 0===t?void 0:t.provider_name}):"-"]})]})]})},pu=function(e){var t,a=e.patientData,n=e.supervisor,s=[];("Lost"===a.patient_status.status&&a.visits_count&&s.push("The patient\u2019s status is \u201cLost\u201c and the therapist has a completed appointment with the patient."),a.missing_notes_count&&s.push("The therapist has ".concat(a.missing_notes_count," missing progress note").concat(a.missing_notes_count>1?"s":"",".")),a.upcoming_appointments_count&&s.push("Upcoming appointments with selected provider will be deleted"),n)&&s.push("Supervisor ".concat(null===(t=n.provider)||void 0===t?void 0:t.provider_name," will be unassigned"));return 0===s.length?null:Object(y.jsxs)("div",{className:"text-danger",children:["Warnings:",Object(y.jsx)("ul",{className:"ps-4",children:s.map((function(e,t){return Object(y.jsx)("li",{children:e},t)}))})]})},fu=function(e){var t=e.patientData;return Object(y.jsxs)("div",{className:"alert alert-danger mb-0",role:"alert",children:["The therapist has ",t.drafts_count," draft progress note",t.drafts_count>1?"s":""," and ",t.missing_notes_count," missing progress note",t.missing_notes_count>1?"s":"",". Make sure that all progress notes have been finalized before you proceed"]})},hu=function(){var e=Object(l.b)(),t=Object(s.useState)(!1),a=Object(u.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),c=Object(u.a)(i,2),o=c[0],d=c[1],m=Object(s.useState)(!1),b=Object(u.a)(m,2),j=b[0],p=b[1],f=Object(s.useState)(""),v=Object(u.a)(f,2),O=v[0],x=v[1],_=Object(l.c)((function(e){return e.patientTransfersDashboard})),N=_.userData,C=_.assignedPatients,w=C.unassignData,D=C.tableData,S=C.filters;Object(s.useEffect)((function(){w.patientId&&(localStorage.setItem("currentUnassignPatientId",w.patientId),d(""),p(!1),x(""),r(!1))}),[w.patientId]);var P=D[D.findIndex((function(e){return e.patient_id===w.patientId}))];if(!P)return null;var k=S.provider,I=P.patient_has_providers.filter((function(e){return e.supervisee_id===k.id}))[0],A=P.patient_has_providers.filter((function(e){return e.providers_id!==k.id&&!e.chart_read_only})),M=P.drafts_count&&P.missing_notes_count,T=N.isOnlyAdmin||!M,F=function(){e(Bd({patientId:null}))};return Object(y.jsxs)(re.a,{show:k.id,onHide:F,className:"custom-modal",centered:!0,children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsx)("div",{children:"Unassign patient"})}),Object(y.jsxs)(Mr.a,{style:{gap:"24px",paddingBottom:"20px"},children:[M?Object(y.jsx)(fu,{patientData:P}):null,Object(y.jsx)(ju,{patientData:P,provider:k,supervisor:I,otherProviders:A}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:g()("form-group",vd.a.formGroup,O?vd.a.formGroupHasError:""),children:[Object(y.jsxs)("label",{htmlFor:"unassignReason",className:g()("control-label mb-1",vd.a.formLabel),children:["Reason ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{id:"unassignReason",className:g()("form-control",vd.a.formInput),value:o,onChange:function(e){return d(e.target.value)}}),O&&Object(y.jsx)("div",{className:vd.a.formErrors,children:O})]}),0!==A.length&&Object(y.jsxs)("div",{className:g()("form-check mt-3",vd.a.formCheck),children:[Object(y.jsx)("input",{type:"checkbox",id:"unassign-all-providers",className:g()("form-check-input",vd.a.formCheckInput),checked:j,onChange:function(e){return p(e.target.checked)}}),Object(y.jsx)("label",{htmlFor:"unassign-all-providers",className:vd.a.formCheckLabel,children:"Unassign all providers from this patient"})]})]}),Object(y.jsx)(pu,{patientData:P,supervisor:I})]}),Object(y.jsx)(Vo.a,{children:Object(y.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:F,children:"Cancel"}),Object(y.jsx)("button",{onClick:function(){T&&(o?(x(""),r(!0),e(zd({patientId:P.patient_id})),function(e){var t=e.patientId,a=e.providerId,n=e.reason,s=e.unassignAllProviders;return h.a.post("/dashboard/delete-patient-provider",{patientId:t,providerId:a,reason:n,unassignAllProviders:s})}({patientId:P.patient_id,providerId:k.id,reason:o,unassignAllProviders:j}).then((function(){e(Gd({patientId:P.patient_id})),e(Xd({value:!0})),bu().then((function(t){e(Zd({data:t.data.data}))})).finally((function(){e(Xd({value:!1}))})),localStorage.getItem("currentUnassignPatientId")===P.patient_id.toString()&&F()})).finally((function(){r(!1),e(Ud({patientId:P.patient_id}))}))):x("Reason of unassignment is required"))},className:"btn btn-large btn-primary d-flex align-items-center justify-content-center gap-1",style:{width:"125px"},disabled:n||!T,children:n?Object(y.jsx)(lr,{color:"#fff",size:"small"}):"Unassign"})]})})]})},vu=$r(),Ou=function(e){var t;return t="has-error"===e.selectProps.className?"#dc3545":e.isFocused?"#A4C9E5":e.isDisabled?"#e6e6e6":"#ccc","1px solid ".concat(t)},xu=Object(ct.a)(Object(ct.a)({},vu),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),vu.control(e,t)),{},{minWidth:"115px",width:"200px",minHeight:"38px",height:"auto",border:Ou(t),"&:hover":{border:"1px solid "+("has-error"===t.selectProps.className?"#dc3545":"#b3b3b3")}})}}),_u=function(){var e,t=Object(l.b)(),a=Object(s.useState)(!1),n=Object(u.a)(a,2),r=n[0],i=n[1],c=Object(s.useState)(""),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useState)(""),j=Object(u.a)(b,2),p=j[0],f=j[1],v=Object(s.useState)({reason:"",newProviderId:""}),O=Object(u.a)(v,2),x=O[0],_=O[1],N=Object(l.c)((function(e){return e.patientTransfersDashboard})),C=N.userData,w=N.assignedPatients,D=N.filtersData,S=w.transferData,P=w.tableData,k=w.filters,I=D.providersData.providers;Object(s.useEffect)((function(){S.patientId&&(localStorage.setItem("currentTransferPatientId",S.patientId),m(""),f(null),_({reason:"",newProviderId:""}),i(!1))}),[S.patientId]);var A=P[P.findIndex((function(e){return e.patient_id===S.patientId}))];if(!A)return null;var M=p?null===(e=I.filter((function(e){return e.id===p}))[0])||void 0===e?void 0:e.provider_name:"",T=k.provider,F=A.patient_has_providers.filter((function(e){return e.supervisee_id===T.id}))[0],L=A.patient_has_providers.filter((function(e){return e.providers_id!==T.id&&!e.chart_read_only})),q=A.drafts_count&&A.missing_notes_count,Y=C.isOnlyAdmin||!q,R=function(){t(Vd({patientId:null}))},E=Object(ct.a)(Object(ct.a)({},xu),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),xu.control(e,t)),{},{width:"100%"})}});return Object(y.jsxs)(re.a,{show:T.id,onHide:R,className:"custom-modal",centered:!0,children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsx)("div",{children:"Transfer patient"})}),Object(y.jsxs)(Mr.a,{style:{gap:"24px",paddingBottom:"20px"},children:[q?Object(y.jsx)(fu,{patientData:A}):null,Object(y.jsx)(ju,{patientData:A,provider:T,supervisor:F,otherProviders:L}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:g()("form-group",vd.a.formGroup,x.newProviderId?vd.a.formGroupHasError:""),children:[Object(y.jsxs)("label",{htmlFor:"assignProviderId",className:g()("control-label mb-1",vd.a.formLabel),children:["Provider ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(Hr.a,{value:p&&{value:p,label:M},onChange:function(e){f(e.value)},options:I.map((function(e){return{value:e.id,label:e.provider_name}})),className:x.newProviderId&&"has-error",isSearchable:!0,styles:E,id:"assignProviderId"}),x.newProviderId&&Object(y.jsx)("div",{className:vd.a.formErrors,children:x.newProviderId})]}),Object(y.jsxs)("div",{className:g()("form-group mt-2",vd.a.formGroup,x.reason?vd.a.formGroupHasError:""),children:[Object(y.jsxs)("label",{htmlFor:"unassignReason",className:g()("control-label mb-1",vd.a.formLabel),children:["Reason ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{id:"unassignReason",className:g()("form-control",vd.a.formInput),value:d,onChange:function(e){return m(e.target.value)}}),x.reason&&Object(y.jsx)("div",{className:vd.a.formErrors,children:x.reason})]})]}),Object(y.jsx)(pu,{patientData:A,supervisor:F})]}),Object(y.jsx)(Vo.a,{children:Object(y.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:R,children:"Cancel"}),Object(y.jsx)("button",{onClick:function(){Y&&function(){var e=!1,t=Object(ct.a)({},x);return d||(t.reason="Reason of unassignment is required",e=!0),p||(t.newProviderId="New provider is required",e=!0),_(t),!e}()&&(i(!0),t(Wd({patientId:A.patient_id})),function(e){var t=e.patientId,a=e.oldProviderId,n=e.newProviderId,s=e.reason;return h.a.post("/api/transfers/transfer-patient",{patient_id:t,old_provider_id:a,new_provider_id:n,reason:s})}({patientId:A.patient_id,oldProviderId:T.id,newProviderId:p,reason:d}).then((function(){t(Gd({patientId:A.patient_id})),localStorage.getItem("currentTransferPatientId")===A.patient_id.toString()&&R()})).finally((function(){i(!1),t(Kd({patientId:A.patient_id}))})))},className:"btn btn-large btn-primary d-flex align-items-center justify-content-center gap-1",style:{width:"125px"},disabled:r||!Y,children:r?Object(y.jsx)(lr,{color:"#fff",size:"small"}):"Transfer"})]})})]})},gu=function(){var e,t=Object(l.b)(),a=Object(l.c)((function(e){return e.patientTransfersDashboard.assignedPatients})),n=a.filters,r=a.tableColumns,i=a.tableData,c=a.filteredTableData,o=a.currentPage,d=a.isLoaded,u=a.isLoading,m=Object(l.c)((function(e){return e.patientTransfersDashboard.filtersData})),b=m.statusesData,j=m.providersData,p=m.insurancesData;Object(s.useEffect)((function(){var e;n.provider.id&&(t(Fd({value:1})),t(Rd({value:""})),t(Td({options:[]})),t(Ed({id:null,insurance:""})),t(Md({data:[]})),t(Ld({value:!0})),(e=n.provider.id,h.a.get("/api/providers/".concat(e,"/patients"))).then((function(e){t(Md({data:e.data.data,meta:e.data.meta}))})).finally((function(){t(Ld({value:!1})),d||t(qd({value:!0}))})))}),[n.provider.id]),Object(s.useEffect)((function(){t(Hd())}),[i,n.search,n.statuses,n.insurance.id]);var f={last_page:Math.ceil(c.length/25)||1},v=Object(ct.a)(Object(ct.a)({},xu),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),xu.control(e,t)),{},{width:"300px"})}}),O=Object(ct.a)(Object(ct.a)({},xu),{},{valueContainer:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),xu.valueContainer(e,t)),{},{paddingRight:"25px"})}});return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{className:"d-flex flex-wrap gap-2 px-1",children:[Object(y.jsxs)("div",{className:vd.a.selectBlock,children:[Object(y.jsx)("div",{className:"fw-bold",children:"Therapist Name"}),Object(y.jsx)(Hr.a,{value:n.provider.id&&{value:n.provider.id,label:n.provider.provider_name},onChange:function(e){t(Yd({id:e.value,provider_name:e.label}))},options:j.providers.map((function(e){return{value:e.id,label:e.provider_name}})),isLoading:j.isLoading,isSearchable:!0,styles:xu})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,!n.provider.id&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",!n.provider.id&&"text-muted"),children:"Patient Name"}),Object(y.jsx)("input",{value:n.search,disabled:!n.provider.id,onChange:function(e){return t(Rd({value:e.target.value}))},className:g()("form-control",vd.a.searchInput),placeholder:"Search..."})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,!n.provider.id&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",!n.provider.id&&"text-muted"),children:"Patient Status"}),Object(y.jsx)(Hr.a,{value:n.statuses.length&&n.statuses.map((function(e){return{value:e.id,label:e.status}})),options:b.statuses.map((function(e){return{value:e.id,label:e.status}})),onChange:function(e){return t(Td({options:e}))},isLoading:b.isLoading,isDisabled:!n.provider.id,isMulti:!0,isSearchable:!1,closeMenuOnSelect:!1,styles:v})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,!n.provider.id&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",!n.provider.id&&"text-muted"),children:"Patient Insurance"}),Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsx)(Hr.a,{value:(null===(e=n.insurance)||void 0===e?void 0:e.id)&&{value:n.insurance.id,label:n.insurance.insurance},options:p.insurances.map((function(e){return{value:e.id,label:e.insurance}})),onChange:function(e){t(Ed({id:e.value,insurance:e.label}))},isLoading:p.isLoading,isDisabled:!n.provider.id,isSearchable:!0,styles:O}),null!==n.insurance.id&&Object(y.jsx)(Ho,{handleClick:function(){t(Ed({id:null,insurance:""}))},className:g()(vd.a.cross,vd.a.selectCross)})]})]})]}),Object(y.jsx)("div",{className:vd.a.dashboardTableWrapper,children:Object(y.jsx)(_t,{columns:r,data:c,currentPage:o,pageSize:25,dataIsLoaded:d&&!u,showLabelNotLoaded:!n.provider.id,labelNotLoaded:"Choose provider..."})}),Object(y.jsx)("div",{className:"d-flex justify-content-center mb-2",children:Object(y.jsx)(ra,{params:f,currentPage:o,setCurrentPage:function(e){return t(Fd({value:e}))},loading:!d||u})})]}),Object(y.jsx)(hu,{}),Object(y.jsx)(_u,{})]})},yu=function(){var e=Object(l.b)(),t=Object(s.useState)(!1),a=Object(u.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),c=Object(u.a)(i,2),o=c[0],d=c[1],m=Object(s.useState)(""),b=Object(u.a)(m,2),j=b[0],p=b[1],f=Object(l.c)((function(e){return e.patientTransfersDashboard.unassignedPatients})),v=f.archiveData,O=f.tableData;Object(s.useEffect)((function(){v.patientId&&(localStorage.setItem("currentArchivePatientId",v.patientId),d(""),p(""),r(!1))}),[v.patientId]);var x=O[O.findIndex((function(e){return e.patient_id===v.patientId}))];if(!x)return null;var _=function(){r(!1),e(iu({patientId:null}))};return Object(y.jsxs)(re.a,{show:v.patientId,onHide:_,className:"custom-modal",centered:!0,children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("div",{className:"text-danger",children:["Archive patient: ",x.patient_name]})}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsx)("div",{className:"fs-16",children:"Are you sure you want to archive this patient?"}),Object(y.jsxs)("div",{className:g()("form-group",vd.a.formGroup,j?vd.a.formGroupHasError:""),children:[Object(y.jsxs)("label",{htmlFor:"unassignReason",className:g()("control-label mb-1",vd.a.formLabel),children:["Comment ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)("input",{id:"unassignReason",className:g()("form-control",vd.a.formInput),value:o,onChange:function(e){return d(e.target.value)}}),j&&Object(y.jsx)("div",{className:vd.a.formErrors,children:j})]}),Object(y.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:_,children:"Cancel"}),Object(y.jsx)("button",{onClick:function(){o?(p(""),r(!0),e(cu({patientId:v.patientId})),function(e){var t=e.patientId,a=e.comment;return h.a.put("/dashboard/patients/".concat(t),{status_id:7,comment:a})}({patientId:v.patientId,comment:o}).then((function(){e(mu({patientId:x.patient_id})),d(""),localStorage.getItem("currentArchivePatientId")===x.patient_id&&_()})).finally((function(){r(!1),e(ou({patientId:v.patientId}))}))):p("The comment is required")},className:"btn btn-large btn-danger d-flex align-items-center justify-content-center gap-1",style:{width:"125px"},disabled:n,children:n?Object(y.jsx)(lr,{color:"#fff",size:"small"}):"Archive"})]})]})]})},Nu=function(){var e,t=Object(l.b)(),a=Object(s.useState)(!1),n=Object(u.a)(a,2),r=n[0],i=n[1],c=Object(s.useState)(null),o=Object(u.a)(c,2),d=o[0],m=o[1],b=Object(s.useState)(""),j=Object(u.a)(b,2),p=j[0],f=j[1],v=Object(l.c)((function(e){return e.patientTransfersDashboard})),O=v.unassignedPatients,x=v.filtersData,_=O.assignData,N=O.tableData,C=x.providersData.providers;Object(s.useEffect)((function(){_.patientId&&(localStorage.setItem("currentAssignPatientId",_.patientId),m(null),f(""),i(!1))}),[_.patientId]);var w=N[N.findIndex((function(e){return e.patient_id===_.patientId}))];if(!w)return null;var D=d?null===(e=C.filter((function(e){return e.id===d}))[0])||void 0===e?void 0:e.provider_name:"",S=function(){t(lu({patientId:null}))},P=Object(ct.a)(Object(ct.a)({},xu),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),xu.control(e,t)),{},{width:"100%"})}});return Object(y.jsxs)(re.a,{show:_.patientId,onHide:S,className:"custom-modal",centered:!0,children:[Object(y.jsx)(Ar.a,{closeButton:!0,children:Object(y.jsxs)("div",{children:["Assign patient: ",w.patient_name]})}),Object(y.jsxs)(Mr.a,{children:[Object(y.jsxs)("div",{className:"fs-16",children:["Patient: ",Object(y.jsx)("b",{children:w.patient_name})]}),Object(y.jsxs)("div",{className:g()("form-group",vd.a.formGroup,p?vd.a.formGroupHasError:""),children:[Object(y.jsxs)("label",{htmlFor:"assignProviderId",className:g()("control-label mb-1",vd.a.formLabel),children:["Provider ",Object(y.jsx)("span",{className:"text-danger",children:"*"})]}),Object(y.jsx)(Hr.a,{value:d&&{value:d,label:D},onChange:function(e){m(e.value)},options:C.map((function(e){return{value:e.id,label:e.provider_name}})),className:p&&"has-error",isSearchable:!0,styles:P,id:"assignProviderId"}),p&&Object(y.jsx)("div",{className:vd.a.formErrors,children:p})]}),Object(y.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[Object(y.jsx)("button",{className:"btn btn-large btn-outline-primary",onClick:S,children:"Cancel"}),Object(y.jsx)("button",{onClick:function(){(d?(f(""),1):(f("The provider is required"),0))&&(i(!0),t(du({patientId:_.patientId})),function(e){var t=e.patientId,a=e.providerId;return h.a.post("/dashboard/add-patient-provider",{patientId:t,providerId:a})}({patientId:_.patientId,providerId:d}).then((function(){t(mu({patientId:_.patientId})),localStorage.getItem("currentAssignPatientId")===w.patient_id&&S()})).finally((function(){i(!1),t(uu({patientId:_.patientId}))})))},className:"btn btn-large btn-primary d-flex align-items-center justify-content-center gap-1",style:{width:"125px"},disabled:r,children:r?Object(y.jsx)(lr,{color:"#fff",size:"small"}):"Assign"})]})]})]})},Cu=function(){var e,t,a,n=Object(l.b)(),r=Object(l.c)((function(e){return e.patientTransfersDashboard})),i=r.filtersData,c=r.unassignedPatients,o=c.isLoading,d=c.tableData,u=c.filteredTableData,m=c.tableColumns,b=c.currentPage,j=c.filters,p=i.providersData,f=i.statusesData,h=i.insurancesData,v=i.dateOfUnassignmentData,O=i.dateOfPatientCreationData,x={last_page:Math.ceil(u.length/25)||1},_=Object(ct.a)(Object(ct.a)({},xu),{},{valueContainer:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),xu.valueContainer(e,t)),{},{paddingRight:"25px"})}}),N=Object(ct.a)(Object(ct.a)({},xu),{},{control:function(e,t){return Object(ct.a)(Object(ct.a)(Object(ct.a)({},e),xu.control(e,t)),{},{width:"300px"})}});return Object(s.useEffect)((function(){n(Xd({value:!0})),bu().then((function(e){n(Zd({data:e.data.data}))})).finally((function(){n(Xd({value:!1}))}))}),[]),Object(s.useEffect)((function(){n(ru())}),[d,j.old_provider.id,j.search,j.statuses,j.insurance.id,j.date_of_unassignment.value,j.date_of_patient_creation,j.show_archived_patients]),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"d-flex flex-column gap-2",children:[Object(y.jsxs)("div",{className:"d-flex flex-wrap align-items-stretch gap-2 px-1",children:[Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,o&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",o&&"text-muted"),children:"Old Therapist Name"}),Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsx)(Hr.a,{value:(null===(e=j.old_provider)||void 0===e?void 0:e.id)&&{value:j.old_provider.id,label:j.old_provider.provider_name},onChange:function(e){n(Qd({id:e.value,provider_name:e.label}))},options:p.providers.map((function(e){return{value:e.id,label:e.provider_name}})),isLoading:p.isLoading,isDisabled:o,isSearchable:!0,styles:_}),null!==(null===(t=j.old_provider)||void 0===t?void 0:t.id)&&Object(y.jsx)(Ho,{handleClick:function(){n(Qd({id:null,provider_name:""}))},className:g()(vd.a.cross,vd.a.selectCross)})]})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,o&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",o&&"text-muted"),children:"Patient Name"}),Object(y.jsx)("input",{value:j.search,disabled:o,onChange:function(e){return n($d({value:e.target.value}))},className:g()("form-control",vd.a.searchInput),placeholder:"Search..."})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,o&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",o&&"text-muted"),children:"Patient Status"}),Object(y.jsx)(Hr.a,{value:j.statuses.length&&j.statuses.map((function(e){return{value:e.id,label:e.status}})),options:f.statuses.map((function(e){return{value:e.id,label:e.status}})),onChange:function(e){return n(eu({options:e}))},isLoading:f.isLoading,isDisabled:o,isMulti:!0,isSearchable:!1,closeMenuOnSelect:!1,styles:N})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,o&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",o),children:"Patient Insurance"}),Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsx)(Hr.a,{value:(null===(a=j.insurance)||void 0===a?void 0:a.id)&&{value:j.insurance.id,label:j.insurance.insurance},options:h.insurances.map((function(e){return{value:e.id,label:e.insurance}})),onChange:function(e){n(tu({id:e.value,insurance:e.label}))},isLoading:h.isLoading,isDisabled:o,isSearchable:!0,styles:_}),null!==j.insurance.id&&Object(y.jsx)(Ho,{handleClick:function(){n(tu({id:null,insurance:""}))},className:g()(vd.a.cross,vd.a.selectCross)})]})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,o&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",o&&"text-muted"),children:"Date of Unassignment"}),Object(y.jsx)(Hr.a,{value:j.date_of_unassignment,options:v.intervals,onChange:function(e){return n(au(e))},isDisabled:o,isSearchable:!1,styles:xu})]}),Object(y.jsxs)("div",{className:g()(vd.a.selectBlock,o&&vd.a.disabled),children:[Object(y.jsx)("div",{className:g()("fw-bold",o&&"text-muted"),children:"Date of Pt. Creation"}),Object(y.jsx)(Hr.a,{value:j.date_of_patient_creation,options:O.intervals,onChange:function(e){return n(nu(e))},isDisabled:o,isSearchable:!1,styles:xu})]})]}),Object(y.jsx)("div",{className:"d-flex flex-wrap align-items-stretch gap-2 px-1",children:Object(y.jsx)("div",{className:"d-flex align-items-center",style:{minHeight:"38px",marginTop:"auto"},children:Object(y.jsxs)("div",{className:g()("form-check",vd.a.formCheck,o&&vd.a.disabled),children:[Object(y.jsx)("input",{type:"checkbox",id:"show-archived-patients",className:g()("form-check-input",vd.a.formCheckInput),disabled:o,checked:j.show_archived_patients,onChange:function(e){return n(su({value:e.target.checked}))}}),Object(y.jsx)("label",{htmlFor:"show-archived-patients",className:g()(vd.a.formCheckLabel,"fw-bold",o&&"text-muted"),children:"Show archived patients"})]})})}),Object(y.jsx)("div",{className:vd.a.dashboardTableWrapper,children:Object(y.jsx)(_t,{columns:m,data:u,currentPage:b,pageSize:25,dataIsLoaded:!o})}),Object(y.jsx)("div",{className:"d-flex justify-content-center mb-2",children:Object(y.jsx)(ra,{params:x,currentPage:b,setCurrentPage:function(e){return n(Jd({value:e}))},loading:o})})]}),Object(y.jsx)(Nu,{}),Object(y.jsx)(yu,{})]})},wu=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.app})).userData,a=Object(l.c)((function(e){return e.patientTransfersDashboard})),n=a.assignedPatients,r=a.unassignedPatients,i=a.filtersData,c=[{eventKey:"assigned_patients",title:"Assigned Patients",numberOfRecords:n.filteredTableData.length,disabled:!1,component:Object(y.jsx)(gu,{})},{eventKey:"unassigned_patients",title:"Unassigned Patients",numberOfRecords:r.filteredTableData.length,disabled:!1,component:Object(y.jsx)(Cu,{})}];return Object(s.useEffect)((function(){i.providersData.providers.length||i.providersData.isLoading||(e(Sd({value:!0})),h.a.get("/provider/all",{params:{with_trashed:1}}).then((function(t){e(Dd({data:t.data}))})).finally((function(){e(Sd({value:!1}))}))),i.insurancesData.insurances.length||i.insurancesData.isLoading||(e(Ad({value:!0})),h.a.get("/api/insurances/all").then((function(t){e(Id({data:t.data}))})).finally((function(){e(Ad({value:!1}))}))),i.statusesData.statuses.length||i.statusesData.isLoading||(e(kd({value:!0})),h.a.get("/patient/statuses/").then((function(t){e(Pd({data:t.data}))})).finally((function(){e(kd({value:!1}))})))}),[]),Object(y.jsx)(P,{children:Object(y.jsx)("div",{className:"container-fluid ".concat(vd.a.secretaryDashboard),children:t.isLoadedIsOnlyAdmin?Object(y.jsxs)("div",{className:"dashboardCard d-flex flex-column flex-columm gap-2 p-3",children:[Object(y.jsx)("h4",{children:"Patients Management"}),Object(y.jsx)(vr,{tabs:c,defaultActiveKey:c[0].eventKey,tabStyles:{minHeight:"518px",overflow:"hidden",borderRadius:"4px"},className:"mb-2"})]}):Object(y.jsx)(lr,{absolute:!0})})})},Du=function(){var e=Object(d.k)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.app})),n=a.user,r=a.userData;return Object(s.useEffect)((function(){h.a.get("/user/meta").then((function(e){return t(on({user:e.data}))})),r.isLoadedIsOnlyAdmin||h.a.get("/user/is-only-admin").then((function(e){t(dn({value:!!e.data}))})).finally((function(){t(un({value:!0}))}))}),[]),Object(s.useEffect)((function(){!function(){var a=new URLSearchParams(e.search),n={};a.forEach((function(e,t){n[t]=e})),t(ln({data:n}))}()}),[e.search]),n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(d.c,{children:[Object(y.jsx)(d.a,{path:"/faxes",element:Object(y.jsx)(la,{})}),Object(y.jsx)(d.a,{path:"/secretary-dashboard",element:Object(y.jsx)(wr,{})}),Object(y.jsx)(d.a,{path:"/new-patients-dashboard",element:Object(y.jsx)(wo,{})}),Object(y.jsx)(d.a,{path:"/supervisor-dashboard",element:Object(y.jsx)(Ro,{})}),Object(y.jsx)(d.a,{path:"/dashboard/reauthorization-request",element:Object(y.jsx)(Wl,{})}),Object(y.jsx)(d.a,{path:"/dashboard/doctors-requests",element:Object(y.jsx)(fd,{})}),Object(y.jsx)(d.a,{path:"/dashboard/patients-management",element:Object(y.jsx)(wu,{})})]}),Object(y.jsx)(Do,{})]}):Object(y.jsx)(y.Fragment,{})},Su=a(707),Pu=a(697),ku=["title","titleId"];function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Iu.apply(this,arguments)}function Au(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Mu(e,t){var a=e.title,n=e.titleId,r=Au(e,ku);return s.createElement("svg",Iu({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,wa||(wa=s.createElement("path",{d:"M7.99979 0.888672C6.59334 0.888672 5.21848 1.30573 4.04906 2.08711C2.87965 2.86849 1.9682 3.97909 1.42998 5.27848C0.891753 6.57786 0.750929 8.00767 1.02531 9.38709C1.2997 10.7665 1.97696 12.0336 2.97147 13.0281C3.96598 14.0226 5.23306 14.6999 6.61248 14.9743C7.9919 15.2486 9.4217 15.1078 10.7211 14.5696C12.0205 14.0314 13.1311 13.1199 13.9125 11.9505C14.6938 10.7811 15.1109 9.40623 15.1109 7.99978C15.1109 6.1138 14.3617 4.30506 13.0281 2.97147C11.6945 1.63788 9.88577 0.888672 7.99979 0.888672ZM12.6442 5.61312L6.80423 11.4487L3.35534 7.99978C3.23747 7.88191 3.17125 7.72204 3.17125 7.55534C3.17125 7.38864 3.23747 7.22877 3.35534 7.11089C3.47322 6.99302 3.63309 6.9268 3.79979 6.9268C3.96649 6.9268 4.12636 6.99302 4.24423 7.11089L6.81312 9.67978L11.7642 4.73312C11.8226 4.67475 11.8919 4.62845 11.9681 4.59687C12.0444 4.56528 12.1261 4.54902 12.2087 4.54902C12.2912 4.54902 12.3729 4.56528 12.4492 4.59687C12.5255 4.62845 12.5948 4.67475 12.6531 4.73312C12.7115 4.79148 12.7578 4.86077 12.7894 4.93703C12.821 5.01329 12.8372 5.09502 12.8372 5.17756C12.8372 5.2601 12.821 5.34183 12.7894 5.41809C12.7578 5.49435 12.7115 5.56364 12.6531 5.622L12.6442 5.61312Z",fill:"#5AC499"})))}var Tu,Fu=s.forwardRef(Mu),Lu=(a.p,["title","titleId"]);function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},qu.apply(this,arguments)}function Yu(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Ru(e,t){var a=e.title,n=e.titleId,r=Yu(e,Lu);return s.createElement("svg",qu({width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Tu||(Tu=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-1.5-5.009c0-.867.659-1.491 1.491-1.491.85 0 1.509.624 1.509 1.491 0 .867-.659 1.509-1.509 1.509-.832 0-1.491-.642-1.491-1.509zM11.172 6a.5.5 0 0 0-.499.522l.306 7a.5.5 0 0 0 .5.478h1.043a.5.5 0 0 0 .5-.478l.305-7a.5.5 0 0 0-.5-.522h-1.655z",fill:"#FB0007"})))}var Eu=s.forwardRef(Ru),Hu=(a.p,a(141)),Bu=a.n(Hu),zu=function(e){var t,a=e.id,n=e.type,r=e.message,i=Object(s.useContext)(se).dequeueNotification,c=Object(s.useState)(!1),o=Object(u.a)(c,2),l=o[0],d=o[1];return Object(s.useEffect)((function(){d(!0)}),[]),Object(y.jsxs)(Su.a,{className:g()(Bu.a.toast,"Error"===n?Bu.a.toastError:""),show:l,delay:5e3,onClose:function(){return i(a)},autohide:!0,children:[Object(y.jsxs)(Su.a.Header,{className:Bu.a.toastHeader,children:["Error"===n?Object(y.jsx)(Eu,{className:Bu.a.toastIcon}):Object(y.jsx)(Fu,{className:Bu.a.toastIcon}),null!==(t="Error"!==n)&&void 0!==t?t:Object(y.jsx)("strong",{className:g()(Bu.a.toastHeaderTitle,"me-auto"),children:n})]}),Object(y.jsx)(Su.a.Body,{className:Bu.a.toastBody,children:r})]})},Uu=function(){var e=Object(s.useContext)(se).notificationsQueue;return Object(y.jsx)(Pu.a,{position:"bottom-end",className:"p-3",children:e.map((function(e){return Object(y.jsx)(zu,{id:e.id,type:e.type,message:e.message},e.id)}))})},Vu=function(e){var t=e.children,a=Object(s.useState)([]),n=Object(u.a)(a,2),r=n[0],i=n[1];return Object(y.jsxs)(se.Provider,{value:{enqueueNotification:function(e,t){var a={id:Date.now(),type:e,message:t};i((function(e){return[].concat(Object(it.a)(e),[a])}))},dequeueNotification:function(e){i((function(t){return Object(it.a)(t.filter((function(t){return t.id!==e})))}))},notificationsQueue:r,setNotificationsQueue:i},children:[t,r&&Object(y.jsx)(Uu,{})]})},Wu=a(69),Ku=a(205),Gu=Object(Wu.combineReducers)({app:nn,secretaryDashboard:$s,newPatientsDashboard:$n,supervisorDashboard:Io,reauthorizationRequestsDashboard:_l,doctorsRequestsDashboard:rd,patientTransfersDashboard:Cd}),Zu=Object(Oa.a)({reducer:Gu,middleware:function(e){return e({serializableCheck:!1}).prepend(Ku.a)}});window.store=Zu,c.a.createRoot(document.getElementById("root")).render(Object(y.jsx)(o.a,{children:Object(y.jsx)(Vu,{children:Object(y.jsx)(l.a,{store:Zu,children:Object(y.jsx)(Du,{})})})}))},63:function(e,t,a){e.exports={formCheck:"MoveToAppointmentScheduledStageModal_formCheck__3u8qw",formLabel:"MoveToAppointmentScheduledStageModal_formLabel__2IjNj",formInput:"MoveToAppointmentScheduledStageModal_formInput__1zaqh",formListInputBtn:"MoveToAppointmentScheduledStageModal_formListInputBtn__2yDg-",hidden:"MoveToAppointmentScheduledStageModal_hidden__2rgAd",formTagList:"MoveToAppointmentScheduledStageModal_formTagList__1y1dN",formTagListItem:"MoveToAppointmentScheduledStageModal_formTagListItem__3VXB_",formTag:"MoveToAppointmentScheduledStageModal_formTag__1owYf",formTagText:"MoveToAppointmentScheduledStageModal_formTagText__a-elg",formTagRemove:"MoveToAppointmentScheduledStageModal_formTagRemove__3hO37"}},86:function(e,t,a){e.exports={badge:"CustomBadge_badge__2UzKp",red:"CustomBadge_red__35C8y",yellow:"CustomBadge_yellow__q4g-Z",green:"CustomBadge_green__YwU6X",gray:"CustomBadge_gray__xCeXu"}},87:function(e,t,a){e.exports={cross:"ReauthorizationRequestsDashboard_cross__2WiRb",submittedBySelect:"ReauthorizationRequestsDashboard_submittedBySelect__OJGt8",submittedByCross:"ReauthorizationRequestsDashboard_submittedByCross__kys9C",searchCross:"ReauthorizationRequestsDashboard_searchCross__2ALnT",btnFetchTableData:"ReauthorizationRequestsDashboard_btnFetchTableData__1v7bB"}},88:function(e,t,a){e.exports={formWrapper:"AssigneeForm_formWrapper__M7kHt",title:"AssigneeForm_title__3gaM7",patientSearch:"AssigneeForm_patientSearch__lt9FU",patientSearchClear:"AssigneeForm_patientSearchClear__1GNqE",input:"AssigneeForm_input__1noje",list:"AssigneeForm_list__2-TnA",stepTwo:"AssigneeForm_stepTwo__2W2yd",buttonBack:"AssigneeForm_buttonBack__2up_l",patient:"AssigneeForm_patient__BSk53",textareaBox:"AssigneeForm_textareaBox__1O1G2",textarea:"AssigneeForm_textarea__3sWtq",checkbox:"AssigneeForm_checkbox__28Mnq"}},91:function(e,t,a){e.exports={modalDialog:"ConfirmSendingDocumentRequestModal_modalDialog__3lVlf",unordered:"ConfirmSendingDocumentRequestModal_unordered__1WvSc",formGroup:"ConfirmSendingDocumentRequestModal_formGroup__qW47v",formInput:"ConfirmSendingDocumentRequestModal_formInput__1XTTp",formLabel:"ConfirmSendingDocumentRequestModal_formLabel__2CSpz",formGroupHasError:"ConfirmSendingDocumentRequestModal_formGroupHasError__1s3zN",formErrors:"ConfirmSendingDocumentRequestModal_formErrors__jeuzJ"}}},[[629,1,2]]]);
//# sourceMappingURL=main.055f7a00.chunk.js.map